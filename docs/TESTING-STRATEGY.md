# ğŸ§ª Testing Strategy - Ğ¡Ñ‚Ñ€Ğ°Ñ‚ĞµĞ³Ğ¸Ñ Ñ‚ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ v16.27+

**Ğ’ĞµÑ€ÑĞ¸Ñ:** v16.27  
**Ğ”Ğ°Ñ‚Ğ°:** 2026-02-13  
**Ğ¤Ğ¸Ğ»Ğ¾ÑĞ¾Ñ„Ğ¸Ñ:** Real tests > Unit tests  

---

## ğŸ¯ ĞÑĞ½Ğ¾Ğ²Ğ½Ñ‹Ğµ Ğ¿Ñ€Ğ¸Ğ½Ñ†Ğ¸Ğ¿Ñ‹

### Ğ˜ĞµÑ€Ğ°Ñ€Ñ…Ğ¸Ñ Ñ‚ĞµÑÑ‚Ğ¾Ğ²:

```
1. REAL TEST (Ñ€ĞµĞ°Ğ»ÑŒĞ½Ğ¾Ğµ Ğ°ÑƒĞ´Ğ¸Ğ¾)
   â†“ Ğ¡Ğ°Ğ¼Ñ‹Ğ¹ Ğ²Ğ°Ğ¶Ğ½Ñ‹Ğ¹!

2. VALIDATION CHECKLIST (7 Ğ¿ÑƒĞ½ĞºÑ‚Ğ¾Ğ²)
   â†“ ĞĞ±ÑĞ·Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ°Ñ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ°

3. INTEGRATION TESTS (Ğ²Ğ·Ğ°Ğ¸Ğ¼Ğ¾Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğµ)
   â†“ Ğ”Ğ»Ñ regression

4. UNIT TESTS (Ğ¸Ğ·Ğ¾Ğ»Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğµ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¸)
   â†“ Ğ¢Ğ¾Ğ»ÑŒĞºĞ¾ Ğ´Ğ»Ñ ÑƒÑ‚Ğ¸Ğ»Ğ¸Ñ‚
```

**Ğ—Ğ¾Ğ»Ğ¾Ñ‚Ğ¾Ğµ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»Ğ¾:** Ğ•ÑĞ»Ğ¸ ÑĞ¾Ğ¼Ğ½ĞµĞ²Ğ°ĞµÑˆÑŒÑÑ â†’ **Real test!**

---

## âœ… Real Test - ĞÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğ¹ Ğ¼ĞµÑ‚Ğ¾Ğ´

### Ğ§Ñ‚Ğ¾ ÑÑ‚Ğ¾?
Ğ—Ğ°Ğ¿ÑƒÑĞº Ğ²ÑĞµĞ³Ğ¾ pipeline Ğ½Ğ° **Ñ€ĞµĞ°Ğ»ÑŒĞ½Ğ¾Ğ¼ Ğ°ÑƒĞ´Ğ¸Ğ¾** Ğ¸ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ¿Ğ¾ VALIDATION.md (7 Ğ¿ÑƒĞ½ĞºÑ‚Ğ¾Ğ²).

### ĞšĞ¾Ğ³Ğ´Ğ° Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ?
- âœ… **Ğ’Ğ¡Ğ•Ğ“Ğ”Ğ** Ğ¿Ñ€Ğ¸ Ñ„Ğ¸ĞºÑĞµ Ğ±Ğ°Ğ³Ğ°
- âœ… **Ğ’Ğ¡Ğ•Ğ“Ğ”Ğ** Ğ¿Ñ€Ğ¸ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğ¸ Ñ„Ğ¸Ñ‡Ğ¸
- âœ… ĞŸĞµÑ€ĞµĞ´ ĞšĞĞ–Ğ”Ğ«Ğœ ĞºĞ¾Ğ¼Ğ¼Ğ¸Ñ‚Ğ¾Ğ¼

### ĞšĞ°Ğº Ğ¿Ñ€Ğ¾Ğ²Ğ¾Ğ´Ğ¸Ñ‚ÑŒ?

```bash
# 1. Ğ—Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ pipeline
python scripts/transcribe.py

# 2. ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ 7 Ğ¿ÑƒĞ½ĞºÑ‚Ğ¾Ğ² VALIDATION.md:

# Ğ”Ğ»Ğ¸Ğ½Ğ½Ñ‹Ğµ Ğ±Ğ»Ğ¾ĞºĞ¸
grep -oE "\[.*\]" result.txt | head -20

# Ğ”ÑƒĞ±Ğ»Ğ¸
grep -E "(.{20,})\. \1" result.txt

# Ğ—Ğ°Ğ¸ĞºĞ°Ğ½Ğ¸Ñ
grep -oE "\b(\w+) \1\b" result.txt

# Ending hallucinations
grep -i "Ğ¿Ñ€Ğ¾Ğ´Ğ¾Ğ»Ğ¶ĞµĞ½Ğ¸Ğµ" result.txt

# Ğ¡Ğ¼ĞµĞ¶Ğ½Ñ‹Ğµ Ñ€ĞµĞ¿Ğ»Ğ¸ĞºĞ¸ (Ğ²Ğ¸Ğ·ÑƒĞ°Ğ»ÑŒĞ½Ğ¾)
# Timestamp drift (Audacity)
# Ğ“Ğ°Ğ¿Ñ‹ (>3 ÑĞµĞº Ğ¾Ğ±ÑŠÑÑĞ½ĞµĞ½Ñ‹?)

# 3. Ğ•ÑĞ»Ğ¸ Ğ’Ğ¡Ğ• 7 Ğ¿ÑƒĞ½ĞºÑ‚Ğ¾Ğ² âœ… â†’ ĞºĞ¾Ğ¼Ğ¼Ğ¸Ñ‚ÑŒ
```

### ĞŸÑ€ĞµĞ¸Ğ¼ÑƒÑ‰ĞµÑÑ‚Ğ²Ğ°:
- âœ… Ğ’Ğ¸Ğ´Ğ¸Ñ‚ **Ğ²ĞµÑÑŒ pipeline**
- âœ… Ğ ĞµĞ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ
- âœ… ĞĞ±Ğ½Ğ°Ñ€ÑƒĞ¶Ğ¸Ğ²Ğ°ĞµÑ‚ **Ğ²Ğ·Ğ°Ğ¸Ğ¼Ğ¾Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğµ Ğ¼Ğ¾Ğ´ÑƒĞ»ĞµĞ¹**
- âœ… Ğ•Ğ´Ğ¸Ğ½ÑÑ‚Ğ²ĞµĞ½Ğ½Ğ°Ñ **Ğ½Ğ°ÑÑ‚Ğ¾ÑÑ‰Ğ°Ñ Ğ³Ğ°Ñ€Ğ°Ğ½Ñ‚Ğ¸Ñ**

---

## ğŸ“‹ Validation Checklist

### 7 Ğ¾Ğ±ÑĞ·Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ñ… Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€Ğ¾Ğº:

1. **Ğ”Ğ»Ğ¸Ğ½Ğ½Ñ‹Ğµ Ğ±Ğ»Ğ¾ĞºĞ¸:** ĞĞµÑ‚ >30 ÑĞµĞº Ğ±ĞµĞ· timestamp?
2. **Ğ”ÑƒĞ±Ğ»Ğ¸:** ĞĞµÑ‚ Ğ¿Ğ¾Ğ²Ñ‚Ğ¾Ñ€ÑÑÑ‰Ğ¸Ñ…ÑÑ Ñ„Ñ€Ğ°Ğ·?
3. **Ğ—Ğ°Ğ¸ĞºĞ°Ğ½Ğ¸Ñ:** Ğ’ÑĞµ Ğ¸Ğ¼ĞµÑÑ‚ "..."?
4. **Ending hallucinations:** ĞĞµÑ‚ "ĞŸÑ€Ğ¾Ğ´Ğ¾Ğ»Ğ¶ĞµĞ½Ğ¸Ğµ ÑĞ»ĞµĞ´ÑƒĞµÑ‚"?
5. **Ğ¡Ğ¼ĞµĞ¶Ğ½Ñ‹Ğµ Ñ€ĞµĞ¿Ğ»Ğ¸ĞºĞ¸:** ĞĞµÑ‚ Ğ´Ğ²ÑƒÑ… Ğ¿Ğ¾Ğ´Ñ€ÑĞ´ Ğ¾Ğ´Ğ½Ğ¾Ğ³Ğ¾ ÑĞ¿Ğ¸ĞºĞµÑ€Ğ°?
6. **Timestamp drift:** 3-5 Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€Ğ¾Ğº Ğ² Audacity
7. **Ğ“Ğ°Ğ¿Ñ‹:** Ğ’ÑĞµ >3 ÑĞµĞº Ğ¾Ğ±ÑŠÑÑĞ½ĞµĞ½Ñ‹?

**ĞŸÑ€Ğ°Ğ²Ğ¸Ğ»Ğ¾:** Ğ’ÑĞµ 7 âœ… GREEN = Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ ĞºĞ¾Ğ¼Ğ¼Ğ¸Ñ‚Ğ¸Ñ‚ÑŒ!

---

## ğŸ”— Integration Tests

### ĞšĞ¾Ğ³Ğ´Ğ° ÑĞ¾Ğ·Ğ´Ğ°Ğ²Ğ°Ñ‚ÑŒ?
- âœ… ĞŸĞ¾ÑĞ»Ğµ Ñ„Ğ¸ĞºÑĞ° Ğ±Ğ°Ğ³Ğ° Ğ²Ğ·Ğ°Ğ¸Ğ¼Ğ¾Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ Ğ¼Ğ¾Ğ´ÑƒĞ»ĞµĞ¹
- âœ… Ğ”Ğ»Ñ Ğ·Ğ°Ñ‰Ğ¸Ñ‚Ñ‹ Ğ¾Ñ‚ regression
- âœ… ĞšĞ¾Ğ³Ğ´Ğ° unit test ĞĞ• Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ¿Ğ¾ĞºÑ€Ñ‹Ñ‚ÑŒ

### ĞŸÑ€Ğ¸Ğ¼ĞµÑ€:

```python
# tests/integration/test_replica_merger_txt_export.py

def test_no_duplicate_timestamps():
    # Regression: v16.22-v16.26 Ğ´ÑƒĞ±Ğ»Ğ¸
    segments = [...]
    merged = merge_replicas(segments)
    result = export_to_txt_string(merged)
    
    assert "00:00:30 00:00:30" not in result
```

---

## ğŸ§© Unit Tests - Ğ¢Ğ¾Ğ»ÑŒĞºĞ¾ Ğ´Ğ»Ñ ÑƒÑ‚Ğ¸Ğ»Ğ¸Ñ‚

### âœ… ĞšĞ¾Ğ³Ğ´Ğ° ÑĞ¾Ğ·Ğ´Ğ°Ğ²Ğ°Ñ‚ÑŒ:
- Ğ£Ñ‚Ğ¸Ğ»Ğ¸Ñ‚Ñ‹: `seconds_to_hms()`
- Regex patterns (Ğ¸Ğ·Ğ¾Ğ»Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğµ)
- Edge cases Ğ¿Ñ€Ğ¾ÑÑ‚Ñ‹Ñ… Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¹

### âŒ ĞšĞ¾Ğ³Ğ´Ğ° ĞĞ• ÑĞ¾Ğ·Ğ´Ğ°Ğ²Ğ°Ñ‚ÑŒ:
- Ğ’Ğ·Ğ°Ğ¸Ğ¼Ğ¾Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğµ Ğ¼Ğ¾Ğ´ÑƒĞ»ĞµĞ¹
- Pipeline ÑÑ‚Ğ°Ğ¿Ñ‹
- Ğ‘Ğ°Ğ³Ğ¸ v16.22-v16.26 (Ğ²ÑĞµ Ğ¸Ğ·-Ğ·Ğ° Ğ²Ğ·Ğ°Ğ¸Ğ¼Ğ¾Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ!)

---

## ğŸ† Golden Dataset

### Ğ§Ñ‚Ğ¾ ÑÑ‚Ğ¾?
Ğ­Ñ‚Ğ°Ğ»Ğ¾Ğ½Ğ½Ñ‹Ğµ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ñ‹ Ğ´Ğ»Ñ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğ¹ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ¸ regression.

### ĞšĞ¾Ğ³Ğ´Ğ° Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ?
- âœ… ĞŸĞ¾ÑĞ»Ğµ Ñ„Ğ¸ĞºÑĞ° ĞºÑ€Ğ¸Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğ³Ğ¾ Ğ±Ğ°Ğ³Ğ°
- âœ… ĞŸĞ¾ÑĞ»Ğµ ÑÑ‚Ğ°Ğ±Ğ¸Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸ Ğ²ĞµÑ€ÑĞ¸Ğ¸
- âœ… ĞšĞ¾Ğ³Ğ´Ğ° Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚ Ğ¿Ñ€Ğ¾ÑˆÑ‘Ğ» Ğ²ÑĞµ 7 Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€Ğ¾Ğº

**ĞŸĞ¾Ğ´Ñ€Ğ¾Ğ±Ğ½ĞµĞµ:** Ğ¡Ğ¼. `docs/GOLDEN-DATASET.md`

---

## ğŸ“Š Ğ¡Ğ²Ğ¾Ğ´Ğ½Ğ°Ñ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ°

| Ğ¡Ğ¸Ñ‚ÑƒĞ°Ñ†Ğ¸Ñ | Real Test | Integration | Unit Test |
|----------|-----------|-------------|----------|
| **Ğ¤Ğ¸ĞºÑ Ğ±Ğ°Ğ³Ğ°** | âœ… ĞĞ‘Ğ¯Ğ—ĞĞ¢Ğ•Ğ›Ğ¬ĞĞ | âš ï¸ Regression | âŒ ĞĞ•Ğ¢ |
| **ĞĞ¾Ğ²Ğ°Ñ Ñ„Ğ¸Ñ‡Ğ°** | âœ… ĞĞ‘Ğ¯Ğ—ĞĞ¢Ğ•Ğ›Ğ¬ĞĞ | âš ï¸ ĞšÑ€Ğ¸Ñ‚Ğ¸Ñ‡Ğ½Ğ¾ | âš ï¸ Ğ£Ñ‚Ğ¸Ğ»Ğ¸Ñ‚Ñ‹ |
| **Ğ£Ñ‚Ğ¸Ğ»Ğ¸Ñ‚Ğ°** | âš ï¸ ĞĞ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾ | âŒ ĞĞ•Ğ¢ | âœ… Ğ”Ğ |
| **ĞŸĞµÑ€ĞµĞ´ ĞºĞ¾Ğ¼Ğ¼Ğ¸Ñ‚Ğ¾Ğ¼** | âœ… ĞĞ‘Ğ¯Ğ—ĞĞ¢Ğ•Ğ›Ğ¬ĞĞ | âš ï¸ Ğ•ÑĞ»Ğ¸ ĞµÑÑ‚ÑŒ | âš ï¸ Ğ•ÑĞ»Ğ¸ ĞµÑÑ‚ÑŒ |

---

## ğŸ“ Ğ£Ñ€Ğ¾ĞºĞ¸ v16.22-v16.26

### Ğ§Ñ‚Ğ¾ Ğ¿Ğ¾ÑˆĞ»Ğ¾ Ğ½Ğµ Ñ‚Ğ°Ğº?

```
v16.22: Unit tests â†’ pytest GREEN â†’ real test â†’ âŒ ĞĞĞ’Ğ«Ğ• Ğ‘ĞĞ“Ğ˜!
v16.23: Unit tests â†’ pytest GREEN â†’ real test â†’ âŒ Ğ’Ñ‹Ñ€ĞµĞ·Ğ°ĞµÑ‚ Ñ‚ĞµĞºÑÑ‚!
v16.25: Ğ‘Ğ•Ğ— unit tests â†’ real test â†’ âœ… Ğ Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚!
```

**Ğ˜Ñ‚Ğ¾Ğ³Ğ¾:** 8 Ğ¸Ñ‚ĞµÑ€Ğ°Ñ†Ğ¸Ğ¹ Ğ²Ğ¼ĞµÑÑ‚Ğ¾ 1-2!

### ROOT CAUSE:

1. ĞŸĞ¾Ñ‡ĞµĞ¼Ñƒ 8 Ğ¸Ñ‚ĞµÑ€Ğ°Ñ†Ğ¸Ğ¹? â†’ Unit tests GREEN, Ğ½Ğ¾ real test Ğ»Ğ¾Ğ¼Ğ°Ğ»ÑÑ
2. ĞŸĞ¾Ñ‡ĞµĞ¼Ñƒ Ğ½Ğµ Ğ¿Ğ¾Ğ¼Ğ¾Ğ³Ğ»Ğ¸? â†’ Ğ˜Ğ·Ğ¾Ğ»Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ»Ğ¸ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¸
3. ĞŸĞ¾Ñ‡ĞµĞ¼Ñƒ Ğ½Ğµ Ğ²Ğ¸Ğ´ĞµĞ»Ğ¸? â†’ ĞĞ• Ñ‚ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ»Ğ¸ Ğ²Ğ·Ğ°Ğ¸Ğ¼Ğ¾Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğµ
4. ĞŸĞ¾Ñ‡ĞµĞ¼Ñƒ Ğ½Ğµ Ğ·Ğ°Ğ¿ÑƒÑĞºĞ°Ğ»Ğ¸ real test? â†’ Ğ”Ğ¾Ğ²ĞµÑ€ÑĞ»Ğ¸ pytest
5. **ROOT CAUSE:** ĞĞµĞ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ğ°Ñ ÑÑ‚Ñ€Ğ°Ñ‚ĞµĞ³Ğ¸Ñ - Ñ„Ğ¾ĞºÑƒÑ Ğ½Ğ° unit tests!

### Ğ§Ñ‚Ğ¾ Ğ¸Ğ·Ğ¼ĞµĞ½Ğ¸Ğ»Ğ¸:

```
OLD: Ğ‘Ğ°Ğ³ â†’ Unit test â†’ pytest â†’ ĞšĞ¾Ğ¼Ğ¼Ğ¸Ñ‚ â†’ Real test â†’ âŒ Ğ‘ĞĞ“!
NEW: Ğ‘Ğ°Ğ³ â†’ DEBUG â†’ ROOT CAUSE â†’ FIX â†’ Real test â†’ âœ… ĞšĞ¾Ğ¼Ğ¼Ğ¸Ñ‚!
```

**ĞšĞ»ÑÑ‡ĞµĞ²Ğ¾Ğµ:** Real test ĞŸĞ•Ğ Ğ•Ğ” ĞºĞ¾Ğ¼Ğ¼Ğ¸Ñ‚Ğ¾Ğ¼ (Ğ½Ğµ Ğ¿Ğ¾ÑĞ»Ğµ!)

---

**ĞŸĞ¾ÑĞ»ĞµĞ´Ğ½ĞµĞµ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ:** 2026-02-13  
**Ğ’ĞµÑ€ÑĞ¸Ñ:** v16.27  
**Ğ¤Ğ¸Ğ»Ğ¾ÑĞ¾Ñ„Ğ¸Ñ:** Real tests > Unit tests
