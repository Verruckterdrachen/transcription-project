# Version: v16.43
# Last updated: 2026-02-17

## üî• v16.43: FIX 3 –ë–ê–ì–ê ‚Äî –¢–æ—á–∫–∏ –±–µ–∑ –ø—Ä–æ–±–µ–ª–æ–≤ + Timestamp –∏–Ω—Ç–µ—Ä–≤–∞–ª + False positive \"–≤–æ–ø—Ä–æ—Å\"

**–î–∞—Ç–∞:** 2026-02-17  
**ROOT CAUSES:**
1. **–ë–ê–ì #12:** `''.join(text_parts)` –±–µ–∑ –ø—Ä–æ–±–µ–ª–∞ –º–µ–∂–¥—É –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è–º–∏
2. **–ë–ê–ì #14:** `last_timestamp_time` —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–µ–≥–º–µ–Ω—Ç–∞
3. **–ë–ê–ì #13:** Pattern `r'\b–≤–æ–ø—Ä–æ—Å'` –±–µ–∑ context check

**–†–ï–®–ï–ù–ò–Ø:**
1. **–ë–ê–ì #12:** `text_parts.append(sent + ' ')` ‚Äî –ø—Ä–æ–±–µ–ª –ü–û–°–õ–ï –∫–∞–∂–¥–æ–≥–æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è
2. **–ë–ê–ì #14:** `global_last_timestamp_time` ‚Äî tracking –º–µ–∂–¥—É —Å–µ–≥–º–µ–Ω—Ç–∞–º–∏
3. **–ë–ê–ì #13:** Context check: `r'\b–≤–æ–ø—Ä–æ—Å[,\s]+(—á—Ç–æ|–∫–∞–∫)' ‚Üí –ù–ï –∂—É—Ä–Ω–∞–ª–∏—Å—Ç`

---

### –ë–ê–ì #12: –¢–æ—á–∫–∏ –±–µ–∑ –ø—Ä–æ–±–µ–ª–æ–≤

**–°–∏–º–ø—Ç–æ–º:**
```txt
–±–µ–∑—É–∫–æ—Ä–∏–∑–Ω–µ–Ω–Ω–æ.–ó–¥–µ—Å—å –º–æ–∂–Ω–æ –≥–æ–≤–æ—Ä–∏—Ç—å
—Ñ–ª–∞–Ω–≥—É.–°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ
–∑–∞—Ç—è–Ω—É–ª–∏—Å—å.–ò —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏
5 Whys ROOT CAUSE:

–ü–æ—á–µ–º—É —Ç–æ—á–∫–∏ –±–µ–∑ –ø—Ä–æ–±–µ–ª–æ–≤?
‚Üí ''.join(text_parts) —Å–∫–ª–µ–∏–≤–∞–µ—Ç –ë–ï–ó —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—è

–ü–æ—á–µ–º—É –Ω–µ—Ç —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—è?
‚Üí text_parts = ["–ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ1.", " 00:01:30 ", "–ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ2."]
‚Üí join('') ‚Üí "–ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ1. 00:01:30 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ2." ‚ùå

–ü–æ—á–µ–º—É –ù–ï–¢ –ø—Ä–æ–±–µ–ª–∞ –ø–æ—Å–ª–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è?
‚Üí text_parts.append(sent) –¥–æ–±–∞–≤–ª—è–µ—Ç –ë–ï–ó –ø—Ä–æ–±–µ–ª–∞

–ü–æ—á–µ–º—É –ù–ï –¥–æ–±–∞–≤–∏–ª–∏ –ø—Ä–æ–±–µ–ª?
‚Üí v16.40-v16.42: –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–ª–∏, —á—Ç–æ sent —É–∂–µ —Å –ø—Ä–æ–±–µ–ª–æ–º

ROOT CAUSE:
‚Üí re.split(r'([.!?]+)\s+', text) —É–¥–∞–ª—è–µ—Ç –ø—Ä–æ–±–µ–ª—ã!
‚Üí ''.join() –±–µ–∑ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—è ‚Üí —Å–∫–ª–µ–π–∫–∞!

–†–µ—à–µ–Ω–∏–µ v16.43:

python
# –ë–´–õ–û v16.42:
text_parts.append(sent)  # "–ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ."
text_parts.append(f" {timestamp} ")  # " 00:01:30 "
''.join(text_parts)  # "–ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ. 00:01:30 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ2."
#                                      ^^^ –ø—Ä–æ–±–µ–ª –¢–û–õ–¨–ö–û –æ—Ç timestamp!

# –°–¢–ê–õ–û v16.43:
text_parts.append(sent + ' ')  # "–ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ. " ‚Üê –ü–†–û–ë–ï–õ!
text_parts.append(f"{timestamp} ")  # "00:01:30 "
''.join(text_parts).strip()  # "–ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ. 00:01:30 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ2." ‚úÖ
–ë–ê–ì #14: Timestamp –∏–Ω—Ç–µ—Ä–≤–∞–ª > 30s
–°–∏–º–ø—Ç–æ–º:

text
00:07:07 –ò –Ω–µ –ø—Ä–µ–¥–ø—Ä–∏–Ω—è–ª–∏...
00:08:22 (75 —Å–µ–∫—É–Ω–¥ –±–µ–∑ timestamp!)

00:08:52 –ï—Å–ª–∏ —Å–º–æ—Ç—Ä–µ—Ç—å...
00:10:24 (92 —Å–µ–∫—É–Ω–¥—ã –±–µ–∑ timestamp!)
5 Whys ROOT CAUSE:

–ü–æ—á–µ–º—É –∏–Ω—Ç–µ—Ä–≤–∞–ª 75s –≤–º–µ—Å—Ç–æ ‚â§30s?
‚Üí Timestamp –Ω–µ –≤—Å—Ç–∞–≤–ª–µ–Ω –≤ —Å–µ–≥–º–µ–Ω—Ç—ã –º–µ–∂–¥—É 00:07:07 –∏ 00:08:22

–ü–æ—á–µ–º—É –Ω–µ –≤—Å—Ç–∞–≤–ª–µ–Ω?
‚Üí time_since_last_ts < interval –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–µ–≥–º–µ–Ω—Ç–∞

–ü–æ—á–µ–º—É time_since_last_ts –º–∞–ª–µ–Ω—å–∫–∏–π?
‚Üí last_timestamp_time —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –≤ –Ω–∞—á–∞–ª–µ –ö–ê–ñ–î–û–ì–û —Å–µ–≥–º–µ–Ω—Ç–∞!

–ü–æ—á–µ–º—É —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è?
‚Üí v16.42: last_timestamp_time = start –í–ù–£–¢–†–ò for seg in segments:

ROOT CAUSE:
‚Üí –ù–ï–¢ tracking –º–µ–∂–¥—É —Å–µ–≥–º–µ–Ω—Ç–∞–º–∏!
‚Üí –ù–µ—Å–∫–æ–ª—å–∫–æ –∫–æ—Ä–æ—Ç–∫–∏—Ö —Å–µ–≥–º–µ–Ω—Ç–æ–≤ (<30s) –ø–æ–¥—Ä—è–¥ ‚Üí –Ω–∞–∫–æ–ø–ª–µ–Ω–∏–µ >30s

–ü—Ä–∏–º–µ—Ä v16.42 (–ë–ê–ì):

python
for seg in segments:
    last_timestamp_time = start  # ‚Üê –°–ë–†–û–° –∫–∞–∂–¥—ã–π —Ä–∞–∑!
    
    # Seg1: start=400s, duration=20s ‚Üí 20s < 30s ‚Üí –ù–ï–¢ timestamp
    # Seg2: start=420s, duration=25s ‚Üí 25s < 30s ‚Üí –ù–ï–¢ timestamp
    # Seg3: start=445s, duration=30s ‚Üí 30s = 30s ‚Üí timestamp? –ù–ï–¢!
    
    # –ò–¢–û–ì–û: 75s –ë–ï–ó timestamp!
–†–µ—à–µ–Ω–∏–µ v16.43:

python
# üÜï –ì–õ–û–ë–ê–õ–¨–ù–´–ô tracking (–º–µ–∂–¥—É —Å–µ–≥–º–µ–Ω—Ç–∞–º–∏!)
global_last_timestamp_time = 0

for seg_idx, seg in enumerate(segments):
    if seg_idx == 0:
        global_last_timestamp_time = start
    
    # ...
    
    # Seg1: global_last=0s, cumulative=20s ‚Üí 20s < 30s ‚Üí –ù–ï–¢ timestamp
    #       global_last=20s
    # Seg2: global_last=20s, cumulative=45s ‚Üí 45-20=25s < 30s ‚Üí –ù–ï–¢ timestamp
    #       global_last=45s
    # Seg3: global_last=45s, cumulative=75s ‚Üí 75-45=30s ‚â• 30s ‚Üí TIMESTAMP! ‚úÖ
    #       global_last=75s
    
    time_since_last_ts = cumulative_time - global_last_timestamp_time
    
    if time_since_last_ts >= interval:
        # –í—Å—Ç–∞–≤–ª—è–µ–º timestamp
        global_last_timestamp_time = cumulative_time  # ‚Üê –û–ë–ù–û–í–õ–Ø–ï–ú!
–ë–ê–ì #13: "–î—Ä—É–≥–æ–π –≤–æ–ø—Ä–æ—Å" false positive
–°–∏–º–ø—Ç–æ–º (debug log):

text
 "–î—Ä—É–≥–æ–π –≤–æ–ø—Ä–æ—Å, —á—Ç–æ –ø—Ä–æ–≤–æ–¥–∏–≤—à–∏–µ—Å—è –Ω–∞—Å—Ç—É–ø–ª–µ–Ω–∏—è..."
    Journalist=True | Expert=False | Continuation=False
    ‚Üí SPEAKER: –ñ—É—Ä–Ω–∞–ª–∏—Å—Ç (is_journalist_phrase=True)
    ‚ö†Ô∏è –°–ú–ï–ù–ê –°–ü–ò–ö–ï–†–ê: –ò—Å–∞–µ–≤ ‚Üí –ñ—É—Ä–Ω–∞–ª–∏—Å—Ç
–û–∂–∏–¥–∞–ª–æ—Å—å: –û—Å—Ç–∞—ë—Ç—Å—è –ò—Å–∞–µ–≤ (—ç—Ç–æ –≤–≤–æ–¥–Ω–∞—è —Ñ—Ä–∞–∑–∞ —Å–ø–∏–∫–µ—Ä–∞, –Ω–µ –≤–æ–ø—Ä–æ—Å –∂—É—Ä–Ω–∞–ª–∏—Å—Ç–∞)

5 Whys ROOT CAUSE:

–ü–æ—á–µ–º—É "–î—Ä—É–≥–æ–π –≤–æ–ø—Ä–æ—Å" —Å—Ç–∞–ª –ñ—É—Ä–Ω–∞–ª–∏—Å—Ç–æ–º?
‚Üí is_journalist_phrase() –≤–µ—Ä–Ω—É–ª True

–ü–æ—á–µ–º—É –≤–µ—Ä–Ω—É–ª True?
‚Üí Pattern r'\b–≤–æ–ø—Ä–æ—Å' match!

–ü–æ—á–µ–º—É –Ω–µ –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–ª–∏?
‚Üí v16.42: –ù–ï–¢ context check

–ü–æ—á–µ–º—É –Ω—É–∂–µ–Ω context check?
‚Üí "–î—Ä—É–≥–æ–π –≤–æ–ø—Ä–æ—Å, —á—Ç–æ..." ‚Äî –≤–≤–æ–¥–Ω–∞—è —Ñ—Ä–∞–∑–∞ (—Å–æ—é–∑ "—á—Ç–æ")
‚Üí "–î–≤–∞ –≤–æ–ø—Ä–æ—Å–∞ –∫ –≤–∞–º" ‚Äî –Ω–∞—Å—Ç–æ—è—â–∏–π –≤–æ–ø—Ä–æ—Å –∂—É—Ä–Ω–∞–ª–∏—Å—Ç–∞

ROOT CAUSE:
‚Üí Pattern —Å–ª–∏—à–∫–æ–º —à–∏—Ä–æ–∫–∏–π –ë–ï–ó —É—á—ë—Ç–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞!

–†–µ—à–µ–Ω–∏–µ v16.43:

python
def is_journalist_phrase(text):
    text_lower = text.lower()
    
    if '–≤–æ–ø—Ä–æ—Å' in text_lower:
        # üÜï v16.43: Context check!
        
        # 1. –ï—Å–ª–∏ "–≤–æ–ø—Ä–æ—Å" + —Å–æ—é–∑ "—á—Ç–æ/–∫–∞–∫/–∫–æ–≥–¥–∞/–ø–æ—á–µ–º—É" ‚Üí –≤–≤–æ–¥–Ω–∞—è —Ñ—Ä–∞–∑–∞
        if re.search(r'\b–≤–æ–ø—Ä–æ—Å[–∞-—è]*[,\s]+(—á—Ç–æ|–∫–∞–∫|–∫–æ–≥–¥–∞|–ø–æ—á–µ–º—É)\b', text_lower):
            return False  # "–î—Ä—É–≥–æ–π –≤–æ–ø—Ä–æ—Å, —á—Ç–æ..." ‚Üí –ù–ï –∂—É—Ä–Ω–∞–ª–∏—Å—Ç
        
        # 2. –ï—Å–ª–∏ "–≤–æ–ø—Ä–æ—Å" –≤ –ø–µ—Ä–≤—ã—Ö 2 —Å–ª–æ–≤–∞—Ö ‚Üí –∂—É—Ä–Ω–∞–ª–∏—Å—Ç
        words = text_lower.split()
        for i, word in enumerate(words):
            if '–≤–æ–ø—Ä–æ—Å' in word:
                if i < 2:
                    return True  # "–í–æ–ø—Ä–æ—Å –∫ –≤–∞–º" ‚Üí –∂—É—Ä–Ω–∞–ª–∏—Å—Ç
                return True  # "–ê –≤–æ–ø—Ä–æ—Å —Ç–∞–∫–æ–π" ‚Üí –∂—É—Ä–Ω–∞–ª–∏—Å—Ç
    
    # ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ patterns
–ü—Ä–∏–º–µ—Ä—ã —Ä–∞–±–æ—Ç—ã v16.43:

python
is_journalist_phrase("–î—Ä—É–≥–æ–π –≤–æ–ø—Ä–æ—Å, —á—Ç–æ –ø—Ä–æ–≤–æ–¥–∏–≤—à–∏–µ—Å—è...")
# ‚Üí re.search(r'\b–≤–æ–ø—Ä–æ—Å[,\s]+(—á—Ç–æ|–∫–∞–∫)') ‚Üí match ‚Üí False ‚úÖ

is_journalist_phrase("–í–æ–ø—Ä–æ—Å –∫ –≤–∞–º")
# ‚Üí i=0 (–ø–µ—Ä–≤–æ–µ —Å–ª–æ–≤–æ) ‚Üí True ‚úÖ

is_journalist_phrase("–î–≤–∞ –≤–æ–ø—Ä–æ—Å–∞")
# ‚Üí i=1 (–≤—Ç–æ—Ä–æ–µ —Å–ª–æ–≤–æ) ‚Üí True ‚úÖ

is_journalist_phrase("–ê –≤–æ–ø—Ä–æ—Å —Ç–∞–∫–æ–π")
# ‚Üí i=1, –ù–ï–¢ —Å–æ—é–∑–∞ ‚Üí True ‚úÖ
–†–µ–∑—É–ª—å—Ç–∞—Ç v16.43
–ú–µ—Ç—Ä–∏–∫–∞	v16.42	v16.43	–£–ª—É—á—à–µ–Ω–∏–µ
–ë–ê–ì #12: –¢–æ—á–∫–∏ –±–µ–∑ –ø—Ä–æ–±–µ–ª–æ–≤	"—Ç–∏–≥—Ä–æ–≤.–¢–∞–∫–∂–µ" ‚ùå	"—Ç–∏–≥—Ä–æ–≤. –¢–∞–∫–∂–µ" ‚úÖ	+100%
–ë–ê–ì #14: Timestamp –∏–Ω—Ç–µ—Ä–≤–∞–ª	75s, 92s ‚ùå	‚â§30s ‚úÖ	+100%
–ë–ê–ì #13: "–î—Ä—É–≥–æ–π –≤–æ–ø—Ä–æ—Å"	–ñ—É—Ä–Ω–∞–ª–∏—Å—Ç ‚ùå	–ò—Å–∞–µ–≤ ‚úÖ	+100%
–£—Ä–æ–∫ v16.43
–ü—Ä–æ–±–ª–µ–º–∞ v16.40-v16.42:

v16.40: FIX –ë–ê–ì #11 (timestamp injection –ø–æ—Å–ª–µ split)

v16.42: FIX –ë–ê–ì #14 (last_timestamp_time tracking)

–ù–û: –°–æ–∑–¥–∞–ª–∏ –ù–û–í–´–ï –±–∞–≥–∏ #12 (#12, #14 —á–∞—Å—Ç–∏—á–Ω–æ, #13)!

–ü–æ—á–µ–º—É —Å–æ–∑–¥–∞–ª–∏ –Ω–æ–≤—ã–µ –±–∞–≥–∏:

''.join() –ë–ï–ó –ø—Ä–æ–±–µ–ª–æ–≤ ‚Üí –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–ª–∏, —á—Ç–æ sent —Å –ø—Ä–æ–±–µ–ª–æ–º

last_timestamp_time –ª–æ–∫–∞–ª—å–Ω—ã–π ‚Üí –ù–ï –¥—É–º–∞–ª–∏ –ø—Ä–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–æ—Ä–æ—Ç–∫–∏—Ö —Å–µ–≥–º–µ–Ω—Ç–æ–≤ –ø–æ–¥—Ä—è–¥

Pattern r'\b–≤–æ–ø—Ä–æ—Å' —à–∏—Ä–æ–∫–∏–π ‚Üí –ù–ï —É—á–ª–∏ –≤–≤–æ–¥–Ω—ã–µ —Ñ—Ä–∞–∑—ã ("–î—Ä—É–≥–æ–π –≤–æ–ø—Ä–æ—Å, —á—Ç–æ...")

–†–µ—à–µ–Ω–∏–µ v16.43:

5 Whys –¥–ª—è –ö–ê–ñ–î–û–ì–û –±–∞–≥–∞ ‚Üí ROOT CAUSE

DEBUG OUTPUT ‚Üí —Å–∏–º–ø—Ç–æ–º—ã –≤–∏–¥–Ω—ã —Å—Ä–∞–∑—É

REAL TEST ‚Üí –≤—Å–µ 3 –±–∞–≥–∞ –Ω–∞–π–¥–µ–Ω—ã –∑–∞ 1 –∑–∞–ø—É—Å–∫!

–§–∏–ª–æ—Å–æ—Ñ–∏—è:

text
OLD: –§–∏–∫—Å –±–∞–≥–∞ ‚Üí pytest GREEN ‚Üí –∫–æ–º–º–∏—Ç ‚Üí –ù–û–í–´–ô –ë–ê–ì
NEW: 5 Whys ‚Üí ROOT CAUSE ‚Üí FIX ‚Üí REAL TEST ‚Üí ‚úÖ –ö–æ–º–º–∏—Ç
üìö Changelog
v16.43 (2026-02-17)

‚úÖ FIX –ë–ê–ì #12: –¢–æ—á–∫–∏ –±–µ–∑ –ø—Ä–æ–±–µ–ª–æ–≤ (text_parts.append(sent + ' '))

‚úÖ FIX –ë–ê–ì #14: Timestamp –∏–Ω—Ç–µ—Ä–≤–∞–ª >30s (global_last_timestamp_time)

‚úÖ FIX –ë–ê–ì #13: "–î—Ä—É–≥–æ–π –≤–æ–ø—Ä–æ—Å" false positive (context check: r'\b–≤–æ–ø—Ä–æ—Å[,\s]+(—á—Ç–æ|–∫–∞–∫)')

‚úÖ –í—Å–µ 3 –±–∞–≥–∞ –Ω–∞–π–¥–µ–Ω—ã —á–µ—Ä–µ–∑ REAL TEST + DEBUG OUTPUT

‚úÖ ROOT CAUSE analysis –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –±–∞–≥–∞ (5 Whys)

v16.42 (2026-02-17)

‚úÖ FIX –ë–ê–ì #14 (partial): last_timestamp_time tracking –≤–Ω—É—Ç—Ä–∏ —Å–µ–≥–º–µ–Ω—Ç–∞

‚ö†Ô∏è –ë–ê–ì #14 (–æ—Å—Ç–∞–ª—Å—è): —Å–±—Ä–æ—Å –º–µ–∂–¥—É —Å–µ–≥–º–µ–Ω—Ç–∞–º–∏

‚ö†Ô∏è –ë–ê–ì #12 (—Å–æ–∑–¥–∞–Ω): —Ç–æ—á–∫–∏ –±–µ–∑ –ø—Ä–æ–±–µ–ª–æ–≤

‚ö†Ô∏è –ë–ê–ì #13 (–æ—Å—Ç–∞–ª—Å—è): "–î—Ä—É–≥–æ–π –≤–æ–ø—Ä–æ—Å" false positive

v16.40 (2026-02-17)

‚úÖ FIX –ë–ê–ì #11: –ò–∑–º–µ–Ω—ë–Ω –ø–æ—Ä—è–¥–æ–∫ —ç—Ç–∞–ø–æ–≤: SPLIT ‚Üí TIMESTAMP INJECTION

‚úÖ Timestamp –í–°–ï–ì–î–ê –Ω–∞ –≥—Ä–∞–Ω–∏—Ü–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π (100% —Å —Ç–æ—á–∫–æ–π)

---

```markdown
# Version: v16.40
# Last updated: 2026-02-17

## üî• v16.40: FIX –ë–ê–ì #11 ‚Äî –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø–æ—Ä—è–¥–∫–∞: SPLIT ‚Üí TIMESTAMP INJECTION

**–î–∞—Ç–∞:** 2026-02-17  
**ROOT CAUSE:** Timestamp injection –î–û split ‚Üí –≤—Å—Ç–∞–≤–∫–∞ –º–µ–∂–¥—É —Å–ª–æ–≤–∞–º–∏ (8/19 –±–µ–∑ —Ç–æ—á–∫–∏)  
**–†–ï–®–ï–ù–ò–ï:** Split –ü–ï–†–í–´–ú ‚Üí timestamp injection –í–¢–û–†–´–ú ‚Üí timestamp –í–°–ï–ì–î–ê –Ω–∞ –≥—Ä–∞–Ω–∏—Ü–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π

---

### –ü—Ä–æ–±–ª–µ–º–∞

**–°–∏–º–ø—Ç–æ–º (v16.39):**

```txt
00:16:06 –ù–µ—Å–º–æ—Ç—Ä—è –Ω–∞ –≤—Å–µ –ø–æ–ø—ã—Ç–∫–∏ –∞–≤–∏–∞—Ç–æ—Ä–æ–≤ –∑–∞–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å...
         ^^^^^^^^ Timestamp –≤ –ù–ê–ß–ê–õ–ï –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è!
–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è:

‚úÖ 8/19 timestamps –ë–ï–ó —Ç–æ—á–∫–∏ (–≤—Å—Ç–∞–≤–ª–µ–Ω—ã –º–µ–∂–¥—É —Å–ª–æ–≤–∞–º–∏, –Ω–µ –Ω–∞ –≥—Ä–∞–Ω–∏—Ü–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π)

‚úÖ Continuation pattern –ù–ï —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç: r'^–Ω–µ—Å–º–æ—Ç—Ä—è\b' —Ç—Ä–µ–±—É–µ—Ç –Ω–∞—á–∞–ª–∞ —Å—Ç—Ä–æ–∫–∏, –Ω–æ —Ç–∞–º timestamp!

‚úÖ Workaround –≤ is_continuation_phrase(): –ø—Ä–∏—Ö–æ–¥–∏—Ç—Å—è —É–¥–∞–ª—è—Ç—å timestamp –ø–µ—Ä–µ–¥ –ø—Ä–æ–≤–µ—Ä–∫–æ–π

DEBUG LOG (v16.39):

text
‚ö†Ô∏è –í—Å—Ç–∞–≤–ª–µ–Ω–æ –ë–ï–ó sentence boundary: 8 (–Ω–µ –Ω–∞—à–ª–∏ —Ç–æ—á–∫—É)
üìå 00:16:06 inject [before text] (–æ—Ç –Ω–∞—á–∞–ª–∞: 42.5s)
   "00:16:06 –ù–µ—Å–º–æ—Ç—Ä—è –Ω–∞ –≤—Å–µ –ø–æ–ø—ã—Ç–∫–∏..." ‚Üê Timestamp –ø–µ—Ä–µ–¥ —Ç–µ–∫—Å—Ç–æ–º!
5 Whys (ROOT CAUSE)
1. –ü–æ—á–µ–º—É "–ù–µ—Å–º–æ—Ç—Ä—è" —Å—Ç–∞–ª –ñ—É—Ä–Ω–∞–ª–∏—Å—Ç–æ–º?
‚Üí is_continuation_phrase() –≤–µ—Ä–Ω—É–ª False

2. –ü–æ—á–µ–º—É is_continuation_phrase() = False?
‚Üí –ü–∞—Ç—Ç–µ—Ä–Ω r'^–Ω–µ—Å–º–æ—Ç—Ä—è\b' –ù–ï —Å—Ä–∞–±–æ—Ç–∞–ª

3. –ü–æ—á–µ–º—É continuation –ø–∞—Ç—Ç–µ—Ä–Ω –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª?
‚Üí –¢–µ–∫—Å—Ç: "00:16:06 –ù–µ—Å–º–æ—Ç—Ä—è –Ω–∞ –≤—Å–µ –ø–æ–ø—ã—Ç–∫–∏..."
‚Üí Timestamp "00:16:06 " –ü–ï–†–ï–î "–ù–µ—Å–º–æ—Ç—Ä—è"!

4. –ü–æ—á–µ–º—É –≤ —Ç–µ–∫—Å—Ç–µ –µ—Å—Ç—å timestamp?
‚Üí insert_intermediate_timestamps() –≤—Å—Ç–∞–≤–ª—è–µ—Ç timestamp –í–ù–£–¢–†–¨ merged text
‚Üí –í—ã–∑—ã–≤–∞–µ—Ç—Å—è –ü–ï–†–ï–î split_mixed_speaker_segments()

5. ROOT CAUSE:
‚Üí –ü–û–†–Ø–î–û–ö –≠–¢–ê–ü–û–í –ù–ï–ü–†–ê–í–ò–õ–¨–ù–´–ô:

text
v16.39: MERGE ‚Üí TIMESTAMP INJECT ‚Üí SPLIT
                ^^^^^^^^^^^^^^^^   –í—Å—Ç–∞–≤–∫–∞ –î–û split!
                –†–µ–∑—É–ª—å—Ç–∞—Ç: timestamp –º–µ–∂–¥—É —Å–ª–æ–≤–∞–º–∏ (8/19 –±–µ–∑ —Ç–æ—á–∫–∏)
‚Üí –î–û–õ–ñ–ù–û –ë–´–¢–¨:

text
v16.40: MERGE ‚Üí SPLIT ‚Üí TIMESTAMP INJECT
                ^^^^^   ^^^^^^^^^^^^^^^^
                Split —Ä–∞–∑–±–∏–≤–∞–µ—Ç –Ω–∞ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è ‚Üí —Ç–æ—á–∫–∏ –∏–∑–≤–µ—Å—Ç–Ω—ã
                Timestamp inject –º–µ–∂–¥—É –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è–º–∏ ‚Üí –í–°–ï–ì–î–ê —Å —Ç–æ—á–∫–æ–π!
–†–µ—à–µ–Ω–∏–µ (–∫–æ–¥)
–§–∞–π–ª: scripts/transcribe.py

–ò–ó–ú–ï–ù–ï–ù–ò–Ø v16.40:
–ë–´–õ–û v16.39:

python
# –≠–¢–ê–ü 6: MERGE
segments_merged = merge_replicas(segments_raw, debug=True)

# –≠–¢–ê–ü 6.1: TIMESTAMP INJECTION (–î–û split!)
segments_merged = insert_intermediate_timestamps(
    segments_merged, segments_raw, interval=30.0, debug=True
)

# –≠–¢–ê–ü 7: CLASSIFICATION
segments_merged, stats = apply_speaker_classification_v15(...)

# –≠–¢–ê–ü 8: SPLIT
segments_merged = split_mixed_speaker_segments(...)
–°–¢–ê–õ–û v16.40:

python
# –≠–¢–ê–ü 6: MERGE
segments_merged = merge_replicas(segments_raw, debug=True)

# –≠–¢–ê–ü 7: CLASSIFICATION
segments_merged, stats = apply_speaker_classification_v15(...)

# üî• –≠–¢–ê–ü 8: SPLIT (–ü–ï–†–í–´–ô!)
segments_merged = split_mixed_speaker_segments(...)

# üî• –≠–¢–ê–ü 8.1: TIMESTAMP INJECTION (–ü–û–°–õ–ï split!)
segments_merged = insert_intermediate_timestamps(
    segments_merged, segments_raw, interval=30.0, debug=True
)
–§–∞–π–ª: scripts/corrections/timestamp_fixer.py

–£–ü–†–û–©–ï–ù–ò–ï v16.40:
–ë–´–õ–û v16.39:

python
# –ò—â–µ–º —Ç–æ—á–∫—É –≤ —Ä–∞–¥–∏—É—Å–µ 100 —Å–∏–º–≤–æ–ª–æ–≤
sentence_boundary = find_sentence_boundary_before(text, pos, max_distance=100)

if sentence_boundary != -1:
    inject_pos = sentence_boundary
    inject_type = "after ."
else:
    inject_pos = pos
    inject_type = "before text"  # ‚ùå 8/19 —Å–ª—É—á–∞–µ–≤!
    skipped_no_boundary += 1
–°–¢–ê–õ–û v16.40:

python
# üî• Split –£–ñ–ï —Ä–∞–∑–±–∏–ª –Ω–∞ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è ‚Üí –ø—Ä–æ—Å—Ç–æ –≤—Å—Ç–∞–≤–ª—è–µ–º –ú–ï–ñ–î–£ –Ω–∏–º–∏
sentences = re.split(r'([.!?]+)\s+', text)
sentences = [''.join(sentences[i:i+2]).strip() for i in range(0, len(sentences), 2)]

# –í—ã—á–∏—Å–ª—è–µ–º –ø—Ä–æ–ø–æ—Ä—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è
for sent in sentences[:-1]:
    # –í—Å—Ç–∞–≤–ª—è–µ–º timestamp –ü–û–°–õ–ï –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è
    text_parts.append(sent)
    text_parts.append(f" {timestamp} ")  # ‚úÖ –í–°–ï–ì–î–ê –ø–æ—Å–ª–µ —Ç–æ—á–∫–∏!
–§–∞–π–ª: scripts/corrections/boundary_fixer.py

–£–î–ê–õ–Å–ù WORKAROUND v16.40:
–ë–´–õ–û v16.39:

python
def is_continuation_phrase(text):
    text_lower = text.lower().strip()
    
    # üÜï v16.39: –£–¥–∞–ª—è–µ–º timestamp –ø–µ—Ä–µ–¥ –ø—Ä–æ–≤–µ—Ä–∫–æ–π
    text_cleaned = re.sub(r'^\s*\d{2}:\d{2}:\d{2}\s+', '', text_lower)
    
    for pattern in continuation_patterns:
        if re.search(pattern, text_cleaned):  # –ò—Å–ø–æ–ª—å–∑—É–µ–º cleaned text!
            return True
–°–¢–ê–õ–û v16.40:

python
def is_continuation_phrase(text):
    text_lower = text.lower().strip()
    
    # üî• v16.40: Workaround –£–î–ê–õ–Å–ù! Timestamp –±–æ–ª—å—à–µ –ù–ï –≤ –Ω–∞—á–∞–ª–µ —Ç–µ–∫—Å—Ç–∞
    # Split —Ç–µ–ø–µ—Ä—å –ü–ï–†–ï–î timestamp injection ‚Üí timestamp –ú–ï–ñ–î–£ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è–º–∏
    
    for pattern in continuation_patterns:
        if re.search(pattern, text_lower):  # üî• –ü—Ä–æ—Å—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ–º!
            return True
–ü–æ—á–µ–º—É —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç
BEFORE v16.40:
text
MERGE:
[
    {speaker: "–ò—Å–∞–µ–≤", start: 100, end: 200, 
     text: "–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ1. –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ2. –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ3."}
]
        ‚Üì
TIMESTAMP INJECT:
[
    {speaker: "–ò—Å–∞–µ–≤", start: 100, end: 200, 
     text: "–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ1. 00:01:30 –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ2. –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ3."}
]
        ‚Üì
SPLIT:
[
    {speaker: "–ò—Å–∞–µ–≤", text: "–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ1."},
    {speaker: "–ò—Å–∞–µ–≤", text: "00:01:30 –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ2."},  ‚Üê ‚ùå Timestamp –≤ –Ω–∞—á–∞–ª–µ!
    {speaker: "–ñ—É—Ä–Ω–∞–ª–∏—Å—Ç", text: "–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ3."}  ‚Üê ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å–ø–∏–∫–µ—Ä!
]
AFTER v16.40:
text
MERGE:
[
    {speaker: "–ò—Å–∞–µ–≤", start: 100, end: 200, 
     text: "–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ1. –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ2. –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ3."}
]
        ‚Üì
SPLIT:
[
    {speaker: "–ò—Å–∞–µ–≤", start: 100, end: 150, text: "–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ1."},
    {speaker: "–ò—Å–∞–µ–≤", start: 150, end: 180, text: "–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ2."},
    {speaker: "–ñ—É—Ä–Ω–∞–ª–∏—Å—Ç", start: 180, end: 200, text: "–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ3."}
]
        ‚Üì
TIMESTAMP INJECT:
[
    {speaker: "–ò—Å–∞–µ–≤", start: 100, end: 150, text: "–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ1."},
    {speaker: "–ò—Å–∞–µ–≤", start: 150, end: 180, text: "–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ2. 00:01:30"},  ‚Üê ‚úÖ Timestamp –ü–û–°–õ–ï —Ç–æ—á–∫–∏!
    {speaker: "–ñ—É—Ä–Ω–∞–ª–∏—Å—Ç", start: 180, end: 200, text: "–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ3."}
]
–†–µ–∑—É–ª—å—Ç–∞—Ç
v16.39 (–ë–´–õ–û):

text
00:16:04 –ò—Å–∞–µ–≤: ...–≤ –ª–∏—Ü–µ —Ç–∏–≥—Ä–æ–≤.
00:16:06 –ñ—É—Ä–Ω–∞–ª–∏—Å—Ç: –ù–µ—Å–º–æ—Ç—Ä—è –Ω–∞ –≤—Å–µ –ø–æ–ø—ã—Ç–∫–∏ –∞–≤–∏–∞—Ç–æ—Ä–æ–≤ –∑–∞–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å...
                    ^^^^^^^^ ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å–ø–∏–∫–µ—Ä! (continuation –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª)
v16.40 (–°–¢–ê–õ–û):

text
00:16:04 –ò—Å–∞–µ–≤: ...–≤ –ª–∏—Ü–µ —Ç–∏–≥—Ä–æ–≤. 00:16:06 –ù–µ—Å–º–æ—Ç—Ä—è –Ω–∞ –≤—Å–µ –ø–æ–ø—ã—Ç–∫–∏ –∞–≤–∏–∞—Ç–æ—Ä–æ–≤ –∑–∞–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å...
                                 ^^^^^^^^ ‚úÖ Timestamp –ü–û–°–õ–ï —Ç–æ—á–∫–∏, continuation —Ä–∞–±–æ—Ç–∞–µ—Ç!
DEBUG LOG v16.40:

text
‚úÖ –í—Å—Ç–∞–≤–ª–µ–Ω–æ inner timestamps: 19 (–í–°–ï–ì–î–ê —Å —Ç–æ—á–∫–æ–π!)
‚úÖ Continuation phrases –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ: 15
‚è≠Ô∏è –í—Å—Ç–∞–≤–ª–µ–Ω–æ –ë–ï–ó sentence boundary: 0  ‚Üê üî• –ù–û–õ–¨!
–£–ª—É—á—à–µ–Ω–∏—è
–ú–µ—Ç—Ä–∏–∫–∞	v16.39	v16.40	–£–ª—É—á—à–µ–Ω–∏–µ
Timestamps –ë–ï–ó —Ç–æ—á–∫–∏	8/19 (42%) ‚ùå	0/19 (0%) ‚úÖ	-100%
Continuation patterns —Ä–∞–±–æ—Ç–∞—é—Ç	–ù–µ—Ç ‚ùå	–î–∞ ‚úÖ	+100%
Workaround –≤ is_continuation_phrase()	–ù—É–∂–µ–Ω	–£–¥–∞–ª—ë–Ω	-15 —Å—Ç—Ä–æ–∫
–°–ª–æ–∂–Ω–æ—Å—Ç—å insert_intermediate_timestamps()	High (–ø–æ–∏—Å–∫ —Ç–æ—á–∫–∏ –≤ —Ä–∞–¥–∏—É—Å–µ)	Low (–ø—Ä–æ—Å—Ç–æ split)	-50 —Å—Ç—Ä–æ–∫
–£—Ä–æ–∫
–ü—Ä–æ–±–ª–µ–º–∞ v16.37-v16.39:

v16.37: –î–æ–±–∞–≤–∏–ª–∏ r'^–Ω–µ—Å–º–æ—Ç—Ä—è\b' –≤ continuation patterns

v16.38: –£–ª—É—á—à–∏–ª–∏ sentence boundary detection (—Ä–∞–¥–∏—É—Å 100 —Å–∏–º–≤–æ–ª–æ–≤)

v16.39: –î–æ–±–∞–≤–∏–ª–∏ workaround - —É–¥–∞–ª–µ–Ω–∏–µ timestamp –ø–µ—Ä–µ–¥ –ø—Ä–æ–≤–µ—Ä–∫–æ–π

–ù–û: –ù–µ –∏—Å–ø—Ä–∞–≤–∏–ª–∏ ROOT CAUSE - –ü–û–†–Ø–î–û–ö –≠–¢–ê–ü–û–í!

–†–µ—à–µ–Ω–∏–µ v16.40:

–ù–ï –¥–æ–±–∞–≤–ª—è—Ç—å workaround'—ã - –∏—Å–∫–∞—Ç—å ROOT CAUSE!

ROOT CAUSE: Timestamp injection –î–û split

–†–ï–®–ï–ù–ò–ï: –ü–æ–º–µ–Ω—è—Ç—å –ø–æ—Ä—è–¥–æ–∫ ‚Üí split –ü–ï–†–í–´–ú

–†–µ–∑—É–ª—å—Ç–∞—Ç: Workaround –ù–ï –ù–£–ñ–ï–ù, –∫–æ–¥ —É–ø—Ä–æ—Å—Ç–∏–ª—Å—è

–§–∏–ª–æ—Å–æ—Ñ–∏—è:

text
OLD: –ë–ê–ì ‚Üí Workaround ‚Üí –ù–æ–≤—ã–π workaround ‚Üí –ù–æ–≤—ã–π workaround...
NEW: –ë–ê–ì ‚Üí 5 Whys ‚Üí ROOT CAUSE ‚Üí –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
üìö Changelog
v16.40 (2026-02-17)
‚úÖ FIX –ë–ê–ì #11: –ò–∑–º–µ–Ω—ë–Ω –ø–æ—Ä—è–¥–æ–∫ —ç—Ç–∞–ø–æ–≤: SPLIT ‚Üí TIMESTAMP INJECTION
‚úÖ Timestamp –í–°–ï–ì–î–ê –Ω–∞ –≥—Ä–∞–Ω–∏—Ü–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π (100% —Å —Ç–æ—á–∫–æ–π)
‚úÖ –£–±—Ä–∞–Ω workaround –≤ is_continuation_phrase() (re.sub timestamp)
‚úÖ –£–ø—Ä–æ—â–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ insert_intermediate_timestamps() (-50 —Å—Ç—Ä–æ–∫)
‚úÖ –û–±–Ω–æ–≤–ª—ë–Ω ARCHITECTURE.md (—Ç–∞–±–ª–∏—Ü–∞ —ç—Ç–∞–ø–æ–≤)

v16.39 (2026-02-17)
‚úÖ FIX –ë–ê–ì #10: "–Ω–µ—Å–º–æ—Ç—Ä—è" continuation phrase —Å timestamps
‚úÖ –£–¥–∞–ª–µ–Ω–∏–µ timestamp –ø–µ—Ä–µ–¥ –ø—Ä–æ–≤–µ—Ä–∫–æ–π continuation patterns
‚úÖ re.sub(r'^\s*\d{2}:\d{2}:\d{2}\s+', '', text) –≤ is_continuation_phrase()
‚ö†Ô∏è KNOWN ISSUE: –ë–ê–ì #11 - Timestamp sentence boundary (8/19 –±–µ–∑ —Ç–æ—á–∫–∏)

‚îÅ‚îÅ‚îÅ docs/VERSION.md v16.39 ‚îÅ‚îÅ‚îÅ

# Version: v16.39
# Last updated: 2026-02-17

## üîß v16.39: FIX –ë–ê–ì #10 ‚Äî Continuation phrases —Å timestamps ("–Ω–µ—Å–º–æ—Ç—Ä—è" ‚Üí –ñ—É—Ä–Ω–∞–ª–∏—Å—Ç)

**–î–∞—Ç–∞:** 2026-02-17  
**ROOT CAUSE:** Timestamp –≤ –Ω–∞—á–∞–ª–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –ª–æ–º–∞–µ—Ç regex `r'^–Ω–µ—Å–º–æ—Ç—Ä—è\b'`  
**–†–ï–®–ï–ù–ò–ï:** –£–¥–∞–ª–µ–Ω–∏–µ timestamp –ø–µ—Ä–µ–¥ –ø—Ä–æ–≤–µ—Ä–∫–æ–π continuation patterns

---

### –ü—Ä–æ–±–ª–µ–º–∞

**–°–∏–º–ø—Ç–æ–º:**

–í –∏–Ω—Ç–µ—Ä–≤—å—é –ò—Å–∞–µ–≤–∞ —Ñ—Ä–∞–∑–∞ "–Ω–µ—Å–º–æ—Ç—Ä—è –Ω–∞ –≤—Å–µ –ø–æ–ø—ã—Ç–∫–∏..." —Å—Ç–∞–ª–∞ –ñ—É—Ä–Ω–∞–ª–∏—Å—Ç–æ–º:

```txt
 "00:16:06 –ù–µ—Å–º–æ—Ç—Ä—è –Ω–∞ –≤—Å–µ –ø–æ–ø—ã—Ç–∫–∏ –∞–≤–∏–∞—Ç–æ—Ä–æ–≤ –∑–∞–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å..."
    Journalist=True | Expert=False | Continuation=False
    ‚Üí SPEAKER: –ñ—É—Ä–Ω–∞–ª–∏—Å—Ç (is_journalist_phrase=True)
    ‚ö†Ô∏è –°–ú–ï–ù–ê –°–ü–ò–ö–ï–†–ê: –ò—Å–∞–µ–≤ ‚Üí –ñ—É—Ä–Ω–∞–ª–∏—Å—Ç
–û–∂–∏–¥–∞–Ω–∏–µ: "–ù–µ—Å–º–æ—Ç—Ä—è" = continuation phrase ‚Üí –æ—Å—Ç–∞—ë—Ç—Å—è –ò—Å–∞–µ–≤

5 Whys (ROOT CAUSE)
–ü–æ—á–µ–º—É "–ù–µ—Å–º–æ—Ç—Ä—è" —Å—Ç–∞–ª –ñ—É—Ä–Ω–∞–ª–∏—Å—Ç–æ–º?
‚Üí is_journalist_phrase() –≤–µ—Ä–Ω—É–ª True

–ü–æ—á–µ–º—É is_journalist_phrase() = True?
‚Üí is_continuation_phrase() –≤–µ—Ä–Ω—É–ª False!
‚Üí –ü–∞—Ç—Ç–µ—Ä–Ω r'^–Ω–µ—Å–º–æ—Ç—Ä—è\b' –ù–ï —Å—Ä–∞–±–æ—Ç–∞–ª

–ü–æ—á–µ–º—É continuation –ø–∞—Ç—Ç–µ—Ä–Ω –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª?
‚Üí –¢–µ–∫—Å—Ç: "00:16:06 –ù–µ—Å–º–æ—Ç—Ä—è –Ω–∞ –≤—Å–µ –ø–æ–ø—ã—Ç–∫–∏..."
‚Üí –ü–∞—Ç—Ç–µ—Ä–Ω –ø—Ä–æ–≤–µ—Ä—è–µ—Ç ^ (–Ω–∞—á–∞–ª–æ —Å—Ç—Ä–æ–∫–∏)
‚Üí Timestamp "00:16:06 " –ø–µ—Ä–µ–¥ "–ù–µ—Å–º–æ—Ç—Ä—è"!

–ü–æ—á–µ–º—É –≤ —Ç–µ–∫—Å—Ç–µ –µ—Å—Ç—å timestamp?
‚Üí insert_intermediate_timestamps() –≤—Å—Ç–∞–≤–ª—è–µ—Ç timestamp –í–ù–£–¢–†–¨ merged text
‚Üí –ü—Ä–∏ split –Ω–∞ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è, timestamp –ø–æ–ø–∞–¥–∞–µ—Ç –≤ —Ç–µ–∫—Å—Ç!

ROOT CAUSE:
‚Üí Timestamp injection –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ü–ï–†–ï–î split_mixed_speaker_segments()
‚Üí Continuation patterns (r'^–Ω–µ—Å–º–æ—Ç—Ä—è\b') –Ω–µ —É—á–∏—Ç—ã–≤–∞—é—Ç timestamp!

–†–µ—à–µ–Ω–∏–µ (–∫–æ–¥)
–§–∞–π–ª: scripts/corrections/boundary_fixer.py

–ò–∑–º–µ–Ω–µ–Ω–∏—è v16.39:

python
def is_continuation_phrase(text):
    """
    üÜï v16.39: FIX –ë–ê–ì #10 - –£—á–∏—Ç—ã–≤–∞–µ–º timestamps –≤ –Ω–∞—á–∞–ª–µ —Ç–µ–∫—Å—Ç–∞
    
    **–ü–†–û–ë–õ–ï–ú–ê v16.37:**
    –ü–∞—Ç—Ç–µ—Ä–Ω r'^–Ω–µ—Å–º–æ—Ç—Ä—è\b' –ù–ï —Å—Ä–∞–±–∞—Ç—ã–≤–∞–ª –¥–ª—è "00:16:06 –ù–µ—Å–º–æ—Ç—Ä—è..."
    Timestamp –≤ –Ω–∞—á–∞–ª–µ —Ç–µ–∫—Å—Ç–∞ –ª–æ–º–∞–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫—É ^
    
    **–†–ï–®–ï–ù–ò–ï v16.39:**
    –£–¥–∞–ª—è–µ–º timestamp –ü–ï–†–ï–î –ø—Ä–æ–≤–µ—Ä–∫–æ–π continuation patterns
    """
    text_lower = text.lower().strip()
    
    # üÜï v16.39: –£–¥–∞–ª—è–µ–º timestamp –∏–∑ –Ω–∞—á–∞–ª–∞ —Ç–µ–∫—Å—Ç–∞
    # –§–æ—Ä–º–∞—Ç: "00:12:34 –¢–µ–∫—Å—Ç..." –∏–ª–∏ " 00:12:34 –¢–µ–∫—Å—Ç..."
    text_cleaned = re.sub(r'^\s*\d{2}:\d{2}:\d{2}\s+', '', text_lower)
    
    continuation_patterns = [
        r'^—Ç–æ\s+–µ—Å—Ç—å\b',
        r'^–≤\s+—á–∞—Å—Ç–Ω–æ—Å—Ç–∏\b',
        r'^–∫—Ä–æ–º–µ\s+—Ç–æ–≥–æ\b',
        r'^—Ç–∞–∫–∂–µ\b',
        r'^–∏–Ω—ã–º–∏\s+—Å–ª–æ–≤–∞–º–∏\b',
        r'^–¥—Ä—É–≥–∏–º–∏\s+—Å–ª–æ–≤–∞–º–∏\b',
        r'^–±–æ–ª–µ–µ\s+—Ç–æ–≥–æ\b',
        r'^–ø–æ–º–∏–º–æ\s+—ç—Ç–æ–≥–æ\b',
        r'^–ø—Ä–∏\s+—ç—Ç–æ–º\b',
        r'^–æ–¥–Ω–∞–∫–æ\b',
        r'^—Ç–µ–º\s+–Ω–µ\s+–º–µ–Ω–µ–µ\b',
        r'^–≤–ø—Ä–æ—á–µ–º\b',
        r'^–Ω–µ—Å–º–æ—Ç—Ä—è\b',  # –ë–´–õ: –Ω–µ —Ä–∞–±–æ—Ç–∞–ª —Å timestamp
        r'^—Ö–æ—Ç—è\b',
    ]
    
    for pattern in continuation_patterns:
        if re.search(pattern, text_cleaned):  # üÜï –ò—Å–ø–æ–ª—å–∑—É–µ–º cleaned text!
            return True
    
    return False
–ü–æ—á–µ–º—É —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:

Before v16.39	After v16.39
text_lower = "00:16:06 –Ω–µ—Å–º–æ—Ç—Ä—è..."	text_lower = "00:16:06 –Ω–µ—Å–º–æ—Ç—Ä—è..."
r'^–Ω–µ—Å–º–æ—Ç—Ä—è\b' ‚Üí NOT MATCH ‚ùå	text_cleaned = "–Ω–µ—Å–º–æ—Ç—Ä—è..."
r'^–Ω–µ—Å–º–æ—Ç—Ä—è\b' ‚Üí MATCH ‚úÖ
–†–µ–∑—É–ª—å—Ç–∞—Ç
BEFORE v16.39:

text
 "00:16:06 –ù–µ—Å–º–æ—Ç—Ä—è –Ω–∞ –≤—Å–µ –ø–æ–ø—ã—Ç–∫–∏ –∞–≤–∏–∞—Ç–æ—Ä–æ–≤ –∑–∞–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å..."
    Continuation=False ‚ùå
    ‚Üí SPEAKER: –ñ—É—Ä–Ω–∞–ª–∏—Å—Ç
AFTER v16.39:

text
 "00:16:06 –ù–µ—Å–º–æ—Ç—Ä—è –Ω–∞ –≤—Å–µ –ø–æ–ø—ã—Ç–∫–∏ –∞–≤–∏–∞—Ç–æ—Ä–æ–≤ –∑–∞–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å..."
    Continuation=True ‚úÖ
    ‚Üí SPEAKER: –ò—Å–∞–µ–≤ (continuation + context)
‚ö†Ô∏è KNOWN ISSUES (v16.39)
–ë–ê–ì #11: Timestamp sentence boundary (8 –∏–∑ 19 –ë–ï–ó boundary)
–°–∏–º–ø—Ç–æ–º:

text
‚ö†Ô∏è –í—Å—Ç–∞–≤–ª–µ–Ω–æ –ë–ï–ó sentence boundary: 8 (–Ω–µ –Ω–∞—à–ª–∏ —Ç–æ—á–∫—É)
–ü—Ä–æ–±–ª–µ–º–∞:

insert_intermediate_timestamps() –∏—â–µ—Ç —Ç–æ—á–∫—É –≤ —Ä–∞–¥–∏—É—Å–µ 100 —Å–∏–º–≤–æ–ª–æ–≤

–î–ª—è 8 timestamps —Ç–æ—á–∫–∞ –ù–ï –Ω–∞–π–¥–µ–Ω–∞

Timestamp –≤—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –º–µ–∂–¥—É —Å–ª–æ–≤–∞–º–∏ (–ë–ï–ó —Ç–æ—á–∫–∏)

–ü—Ä–∏—á–∏–Ω–∞:

Raw segments –∫–æ—Ä–æ—Ç–∫–∏–µ

Whisper –Ω–µ –≤—Å–µ–≥–¥–∞ —Å—Ç–∞–≤–∏—Ç —Ç–æ—á–∫–∏

find_sentence_boundary_before() —Ç—Ä–µ–±—É–µ—Ç —Ç–æ—á–∫—É

–†–µ—à–µ–Ω–∏–µ (TODO v16.40+):
–ò–∑–º–µ–Ω–∏—Ç—å –ø–æ—Ä—è–¥–æ–∫ —ç—Ç–∞–ø–æ–≤:

–°–ï–ô–ß–ê–°: merge ‚Üí timestamp inject ‚Üí split

–ù–£–ñ–ù–û: merge ‚Üí split ‚Üí timestamp inject

Status: –û–¢–ö–†–´–¢ (–Ω–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç - 11/19 —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ)

–£—Ä–æ–∫
–ü—Ä–æ–±–ª–µ–º–∞ v16.37-v16.38:

v16.37: –î–æ–±–∞–≤–∏–ª–∏ r'^–Ω–µ—Å–º–æ—Ç—Ä—è\b' –≤ continuation patterns

v16.38: –£–ª—É—á—à–∏–ª–∏ sentence boundary detection

–ù–û: –ù–µ —É—á–ª–∏ timestamp –≤ –Ω–∞—á–∞–ª–µ —Ç–µ–∫—Å—Ç–∞!

–†–µ—à–µ–Ω–∏–µ v16.39:

Regex patterns –¥–æ–ª–∂–Ω—ã —Ä–∞–±–æ—Ç–∞—Ç—å —Å –û–ß–ò–©–ï–ù–ù–´–ú —Ç–µ–∫—Å—Ç–æ–º

Timestamp - —ç—Ç–æ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ, –Ω–µ —á–∞—Å—Ç—å —Ç–µ–∫—Å—Ç–∞ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞

–ü—Ä–æ—Å—Ç–æ–µ —Ä–µ—à–µ–Ω–∏–µ: re.sub(r'^\s*\d{2}:\d{2}:\d{2}\s+', '', text)

–§–∏–ª–æ—Å–æ—Ñ–∏—è:

text
OLD: –£—Å–ª–æ–∂–Ω—è–µ–º patterns ‚Üí —É—á–∏—Ç—ã–≤–∞–µ–º timestamp –≤ regex
NEW: –û—á–∏—â–∞–µ–º —Ç–µ–∫—Å—Ç ‚Üí –ø—Ä–æ—Å—Ç—ã–µ patterns
üìö Changelog
v16.39 (2026-02-17)
‚úÖ FIX –ë–ê–ì #10: "–Ω–µ—Å–º–æ—Ç—Ä—è" continuation phrase —Å timestamps
‚úÖ –£–¥–∞–ª–µ–Ω–∏–µ timestamp –ø–µ—Ä–µ–¥ –ø—Ä–æ–≤–µ—Ä–∫–æ–π continuation patterns
‚úÖ re.sub(r'^\s*\d{2}:\d{2}:\d{2}\s+', '', text) –≤ is_continuation_phrase()
‚ö†Ô∏è KNOWN ISSUE: –ë–ê–ì #11 - Timestamp sentence boundary (8/19 –±–µ–∑ —Ç–æ—á–∫–∏)

v16.38 (2026-02-17)
‚úÖ –£–õ–£–ß–®–ï–ù–ò–ï: Sentence boundary detection –¥–ª—è timestamp injection
‚úÖ find_sentence_boundary_before() —Å —Ä–∞–¥–∏—É—Å–æ–º 100 —Å–∏–º–≤–æ–ª–æ–≤
‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ: 11/19 timestamps —Å boundary, 8/19 –±–µ–∑

v16.37 (2026-02-17)
‚úÖ FIX –ë–ê–ì #8.1: –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç continuation –ü–ï–†–ï–î journalist markers
‚úÖ –ò–∑–º–µ–Ω—ë–Ω –ø–æ—Ä—è–¥–æ–∫ –ø—Ä–æ–≤–µ—Ä–æ–∫ –≤ split_mixed_speaker_segments()
‚úÖ Continuation checks –ü–ï–†–í–´–ú–ò (–¥–æ journalist/expert)

v16.30 (2026-02-16)
‚úÖ FIX –ë–ê–ì #4: Gap duplication filter (N-gram overlap + –ø—É–Ω–∫—Ç—É–∞—Ü–∏—è)
‚úÖ re.sub(r'[^\w\s]', '') –ø–µ—Ä–µ–¥ split()
‚úÖ –¢—Ä–∏–≥—Ä–∞–º–º—ã –¥–ª—è prev_segment, text_similarity –¥–ª—è next_segment

‚îÅ‚îÅ‚îÅ docs/VERSION.md v16.30 ‚îÅ‚îÅ‚îÅ

text
‚îÅ‚îÅ‚îÅ –§–ò–ù–ê–õ–¨–ù–´–ô –ö–û–ú–ú–ò–¢ v16.30 ‚Äî FIX –ë–ê–ì #4 (Gap duplication filter) ‚îÅ‚îÅ‚îÅ

# Version: v16.30
# Last updated: 2026-02-16

## üîß v16.30: FIX –ë–ê–ì #4 ‚Äî Gap duplication filter (N-gram overlap —Å —É–¥–∞–ª–µ–Ω–∏–µ–º –ø—É–Ω–∫—Ç—É–∞—Ü–∏–∏)

**–î–∞—Ç–∞:** 2026-02-16  
**ROOT CAUSE:** Gap filling –¥—É–±–ª–∏—Ä–æ–≤–∞–ª —Ç–µ–∫—Å—Ç —Å prev_segment –∏–∑-–∑–∞ –ø—É–Ω–∫—Ç—É–∞—Ü–∏–∏ –≤ —Ç—Ä–∏–≥—Ä–∞–º–º–∞—Ö

---

### –ü—Ä–æ–±–ª–µ–º–∞

**–°–∏–º–ø—Ç–æ–º:**

–í –∏–Ω—Ç–µ—Ä–≤—å—é –ò—Å–∞–µ–≤–∞ –ø–æ—è–≤–∏–ª—Å—è –¥—É–±–ª—å —Ñ—Ä–∞–∑—ã:

```txt
00:06:51 ... –¥–æ–≤–æ–ª—å–Ω–æ —Å—É–¥–æ—Ä–æ–∂–Ω–æ –º–µ—Ç–∞–ª–ª–∞—Å—å —Å–æ —Å–≤–æ–∏–º –≤–æ—Ç —ç—Ç–∏–º –∫–æ–∑—ã—Ä–µ–º –≤ –ª–∏—Ü–µ —Ç–∏–≥—Ä–æ–≤.
00:07:46 –≤ –ª–∏—Ü–µ —Ç–∏–≥—Ä–æ–≤, —Ç–∞–∫–∂–µ –±—ã–ª...  ‚ùå –î—É–±–ª—å —Ñ—Ä–∞–∑—ã!
00:07:50 –¢–∞–∫–∂–µ –±—ã–ª –¥–æ–≤–æ–ª—å–Ω–æ –ø–æ—Å–ø–µ—à–Ω–æ –æ—Ç–¥–∞–Ω –ø—Ä–∏–∫–∞–∑...
–û–∂–∏–¥–∞–ª–æ—Å—å:

text
00:06:51 ... –≤ –ª–∏—Ü–µ —Ç–∏–≥—Ä–æ–≤. –¢–∞–∫–∂–µ –±—ã–ª –¥–æ–≤–æ–ª—å–Ω–æ –ø–æ—Å–ø–µ—à–Ω–æ –æ—Ç–¥–∞–Ω –ø—Ä–∏–∫–∞–∑...
DEBUG LOG (v16.29):

text
üö® GAP 00:07:46‚Äì00:07:50 (3.6s)
   üîç –°—Ö–æ–¥—Å—Ç–≤–æ —Å prev: 31.0% (words=5‚Üí10)
   ‚úÖ [00:07:46] –≤ –ª–∏—Ü–µ —Ç–∏–≥—Ä–æ–≤, —Ç–∞–∫–∂–µ –±—ã–ª...
–ü—Ä–æ–±–ª–µ–º–∞: –°—Ö–æ–¥—Å—Ç–≤–æ 31% –≤–º–µ—Å—Ç–æ –æ–∂–∏–¥–∞–µ–º—ã—Ö 60%+!

5 Whys (ROOT CAUSE)
–ü–æ—á–µ–º—É gap "–≤ –ª–∏—Ü–µ —Ç–∏–≥—Ä–æ–≤" –¥–æ–±–∞–≤–ª–µ–Ω, —Ö–æ—Ç—è –µ—Å—Ç—å –≤ prev?
‚Üí –ü—Ä–æ–≤–µ—Ä–∫–∞ similarity —Å prev –ø–æ–∫–∞–∑–∞–ª–∞ —Ç–æ–ª—å–∫–æ 31% (–ø–æ—Ä–æ–≥ 55%)

–ü–æ—á–µ–º—É —Ç–∞–∫ –Ω–∏–∑–∫–æ–µ —Å—Ö–æ–¥—Å—Ç–≤–æ (31% –≤–º–µ—Å—Ç–æ 60%+)?
‚Üí v16.29 –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞ word-level overlap (set intersection)
‚Üí Gap: 5 —Å–ª–æ–≤ ‚Üí –±–µ—Ä—ë–º prev_end: 10 —Å–ª–æ–≤
‚Üí –°—Ö–æ–¥—Å—Ç–≤–æ: 3 —Å–æ–≤–ø–∞–¥–∞—é—â–∏—Ö / 10 –≤—Å–µ—Ö = 30%

–ü–æ—á–µ–º—É –Ω–µ 3/5 = 60%?
‚Üí –°—Ä–∞–≤–Ω–∏–≤–∞–ª–∏ gap_words_set (5 —Å–ª–æ–≤) —Å prev_words_end (10 —Å–ª–æ–≤)
‚Üí –ó–Ω–∞–º–µ–Ω–∞—Ç–µ–ª—å = 10, –∞ –Ω–µ 5!

–ü–æ—á–µ–º—É –ø–µ—Ä–µ—à–ª–∏ –Ω–∞ N-gram overlap?
‚Üí Word-level –Ω–µ —É—á–∏—Ç—ã–≤–∞–ª –ü–û–†–Ø–î–û–ö —Å–ª–æ–≤
‚Üí "–≤ –ª–∏—Ü–µ —Ç–∏–≥—Ä–æ–≤" - —ç—Ç–æ –§–†–ê–ó–ê, –Ω–µ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Å–ª–æ–≤–∞!

–ü–æ—á–µ–º—É N-gram –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª —Å—Ä–∞–∑—É?
‚Üí ROOT CAUSE: –ü—É–Ω–∫—Ç—É–∞—Ü–∏—è!
‚Üí Gap: "–≤ –ª–∏—Ü–µ —Ç–∏–≥—Ä–æ–≤**," ‚Üí —Ç—Ä–∏–≥—Ä–∞–º–º–∞: "–≤ –ª–∏—Ü–µ —Ç–∏–≥—Ä–æ–≤,"
‚Üí Prev: "–≤ –ª–∏—Ü–µ —Ç–∏–≥—Ä–æ–≤."
‚Üí "–≤ –ª–∏—Ü–µ —Ç–∏–≥—Ä–æ–≤," NOT IN "–≤ –ª–∏—Ü–µ —Ç–∏–≥—Ä–æ–≤.**" ‚Üí –Ω–µ –Ω–∞–π–¥–µ–Ω–∞!

–†–µ—à–µ–Ω–∏–µ (–∫–æ–¥)
–§–∞–π–ª: scripts/core/transcription.py:force_transcribe_diar_gaps()

–ò–∑–º–µ–Ω–µ–Ω–∏—è v16.30:

–£–¥–∞–ª–µ–Ω–∏–µ –ø—É–Ω–∫—Ç—É–∞—Ü–∏–∏ –ø–µ—Ä–µ–¥ split():

python
import re

# üÜï v16.30: –£–¥–∞–ª—è–µ–º –ø—É–Ω–∫—Ç—É–∞—Ü–∏—é –ø—Ä–∏ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏
gap_text_normalized = re.sub(r'[^\w\s]', '', text.lower().strip())
prev_text_normalized = re.sub(r'[^\w\s]', '', prev_text.lower().strip())
next_text_normalized = re.sub(r'[^\w\s]', '', next_text.lower().strip())
N-gram overlap –¥–ª—è prev_segment (—Ç—Ä–∏–≥—Ä–∞–º–º—ã):

python
# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç—Ä–∏–≥—Ä–∞–º–º—ã (3 —Å–ª–æ–≤–∞ –ø–æ–¥—Ä—è–¥)
for i in range(len(gap_words) - 2):
    trigram = ' '.join(gap_words[i:i+3])
    if trigram in prev_text_normalized:
        print(f"    ‚ö†Ô∏è GAP —Å–æ–¥–µ—Ä–∂–∏—Ç —Ñ—Ä–∞–∑—É –∏–∑ prev ('{trigram}') ‚Üí SKIP (duplicate)")
        skip_gap = True
        break
Text similarity –¥–ª—è next_segment (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π):

python
similarity_next = text_similarity(gap_text_normalized, next_text_compare)

if similarity_next > 0.55:
    print(f"    ‚ö†Ô∏è GAP —Å–ª–∏—à–∫–æ–º –ø–æ—Ö–æ–∂ –Ω–∞ next ({similarity_next:.0%}) ‚Üí SKIP (hallucination)")
    continue
–ü–æ—á–µ–º—É —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç
BEFORE v16.30:

text
Gap:  "–≤ –ª–∏—Ü–µ —Ç–∏–≥—Ä–æ–≤, —Ç–∞–∫–∂–µ –±—ã–ª"
After lowercase: "–≤ –ª–∏—Ü–µ —Ç–∏–≥—Ä–æ–≤, —Ç–∞–∫–∂–µ –±—ã–ª"
After split(): ["–≤", "–ª–∏—Ü–µ", "—Ç–∏–≥—Ä–æ–≤,", "—Ç–∞–∫–∂–µ", "–±—ã–ª"]
                                     ‚Üë –∑–∞–ø—è—Ç–∞—è!
Trigram: "–≤ –ª–∏—Ü–µ —Ç–∏–≥—Ä–æ–≤,"

Prev: "... –≤ –ª–∏—Ü–µ —Ç–∏–≥—Ä–æ–≤."
After lowercase: "... –≤ –ª–∏—Ü–µ —Ç–∏–≥—Ä–æ–≤."
After split(): ["–≤", "–ª–∏—Ü–µ", "—Ç–∏–≥—Ä–æ–≤."]
                                     ‚Üë —Ç–æ—á–∫–∞!

"–≤ –ª–∏—Ü–µ —Ç–∏–≥—Ä–æ–≤," NOT IN "–≤ –ª–∏—Ü–µ —Ç–∏–≥—Ä–æ–≤." ‚Üí –ù–ï –Ω–∞–π–¥–µ–Ω–∞! ‚ùå
AFTER v16.30:

text
Gap:  "–≤ –ª–∏—Ü–µ —Ç–∏–≥—Ä–æ–≤, —Ç–∞–∫–∂–µ –±—ã–ª"
After re.sub(r'[^\w\s]', ''): "–≤ –ª–∏—Ü–µ —Ç–∏–≥—Ä–æ–≤ —Ç–∞–∫–∂–µ –±—ã–ª"
After split(): ["–≤", "–ª–∏—Ü–µ", "—Ç–∏–≥—Ä–æ–≤", "—Ç–∞–∫–∂–µ", "–±—ã–ª"]
Trigram: "–≤ –ª–∏—Ü–µ —Ç–∏–≥—Ä–æ–≤"

Prev: "... –≤ –ª–∏—Ü–µ —Ç–∏–≥—Ä–æ–≤."
After re.sub(r'[^\w\s]', ''): "–≤ –ª–∏—Ü–µ —Ç–∏–≥—Ä–æ–≤"
After split(): ["–≤", "–ª–∏—Ü–µ", "—Ç–∏–≥—Ä–æ–≤"]

"–≤ –ª–∏—Ü–µ —Ç–∏–≥—Ä–æ–≤" IN "–≤ –ª–∏—Ü–µ —Ç–∏–≥—Ä–æ–≤" ‚Üí –ù–∞–π–¥–µ–Ω–∞! ‚úÖ
–†–µ–∑—É–ª—å—Ç–∞—Ç
BEFORE v16.30:

text
00:06:51 ... –≤ –ª–∏—Ü–µ —Ç–∏–≥—Ä–æ–≤. –ª–∏—Ü–µ —Ç–∏–≥—Ä–æ–≤, —Ç–∞–∫–∂–µ –±—ã–ª –¢–∞–∫–∂–µ –±—ã–ª –¥–æ–≤–æ–ª—å–Ω–æ...
                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
                            –î—É–±–ª—å + –ø–ª–æ—Ö–æ–π merge
AFTER v16.30:

text
00:06:51 ... –≤ –ª–∏—Ü–µ —Ç–∏–≥—Ä–æ–≤. –¢–∞–∫–∂–µ –±—ã–ª –¥–æ–≤–æ–ª—å–Ω–æ –ø–æ—Å–ø–µ—à–Ω–æ –æ—Ç–¥–∞–Ω –ø—Ä–∏–∫–∞–∑...
                            ‚úÖ –ß–∏—Å—Ç—ã–π —Ç–µ–∫—Å—Ç –±–µ–∑ –¥—É–±–ª–µ–π!
DEBUG LOG v16.30:

text
üö® GAP 00:07:46‚Äì00:07:50 (3.6s)
   ‚ö†Ô∏è GAP —Å–æ–¥–µ—Ä–∂–∏—Ç —Ñ—Ä–∞–∑—É –∏–∑ prev ('–≤ –ª–∏—Ü–µ —Ç–∏–≥—Ä–æ–≤') ‚Üí SKIP (duplicate)
‚ö†Ô∏è Gaps –Ω–µ –¥–∞–ª–∏ –Ω–æ–≤—ã—Ö —Å–µ–≥–º–µ–Ω—Ç–æ–≤
–î–≤–∞ —Ñ–∏–ª—å—Ç—Ä–∞ (prev + next)
v16.30 –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ä–∞–∑–Ω—ã–µ –∞–ª–≥–æ—Ä–∏—Ç–º—ã:

–°–µ–≥–º–µ–Ω—Ç	–ü—Ä–æ–±–ª–µ–º–∞	–ê–ª–≥–æ—Ä–∏—Ç–º	Threshold	–î–µ–π—Å—Ç–≤–∏–µ
PREV	–î—É–±–ª–∏ —Ç–µ–∫—Å—Ç–∞	N-gram overlap (—Ç—Ä–∏–≥—Ä–∞–º–º—ã)	–¢—Ä–∏–≥—Ä–∞–º–º–∞ –Ω–∞–π–¥–µ–Ω–∞	SKIP
NEXT	–ì–∞–ª–ª—é—Ü–∏–Ω–∞—Ü–∏–∏ Whisper	text_similarity (SequenceMatcher)	>55%	SKIP
–ü–æ—á–µ–º—É —Ä–∞–∑–Ω—ã–µ?

PREV (–¥—É–±–ª–∏): Gap –æ–±—ã—á–Ω–æ —Å–æ–¥–µ—Ä–∂–∏—Ç –¢–û–ß–ù–£–Æ —Ñ—Ä–∞–∑—É –∏–∑ –∫–æ–Ω—Ü–∞ prev ‚Üí —Ç—Ä–∏–≥—Ä–∞–º–º—ã —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–µ–µ

NEXT (–≥–∞–ª–ª—é—Ü–∏–Ω–∞—Ü–∏–∏): Gap –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –º–æ—Ä—Ñ–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ –≤–∞—Ä–∏–∞—Ü–∏–∏ ‚Üí similarity —É—á–∏—Ç—ã–≤–∞–µ—Ç —ç—Ç–æ

–£—Ä–æ–∫
–ü—Ä–æ–±–ª–µ–º–∞ v16.22-v16.29:

v16.22-v16.28: –†–µ—à–∞–ª–∏ –¥—Ä—É–≥–∏–µ –±–∞–≥–∏ (timestamp –¥—É–±–ª–∏, hallucination loops)

v16.29: –î–æ–±–∞–≤–∏–ª–∏ —Ñ–∏–ª—å—Ç—Ä hallucination –¥–ª—è next_segment

–ù–ï –¥–æ–±–∞–≤–∏–ª–∏ –ø—Ä–æ–≤–µ—Ä–∫—É —Å prev_segment!

–ë–ê–ì #4 (–¥—É–±–ª–∏): 8+ —á–∞—Å–æ–≤ –Ω–∞ 3 –∏—Ç–µ—Ä–∞—Ü–∏–∏ (word overlap ‚Üí N-gram ‚Üí –ø—É–Ω–∫—Ç—É–∞—Ü–∏—è)

–ò—Ç–µ—Ä–∞—Ü–∏–∏ v16.30:

v16.30.1: Word overlap (set intersection) ‚Üí 40% —Å—Ö–æ–¥—Å—Ç–≤–æ ‚Üí –ù–ï —Å—Ä–∞–±–æ—Ç–∞–ª–æ

v16.30.2: N-gram overlap (—Ç—Ä–∏–≥—Ä–∞–º–º—ã) ‚Üí "–≤ –ª–∏—Ü–µ —Ç–∏–≥—Ä–æ–≤," vs "–≤ –ª–∏—Ü–µ —Ç–∏–≥—Ä–æ–≤." ‚Üí –ù–ï –Ω–∞–π–¥–µ–Ω–∞

v16.30.3: N-gram + —É–¥–∞–ª–µ–Ω–∏–µ –ø—É–Ω–∫—Ç—É–∞—Ü–∏–∏ ‚Üí —Ç—Ä–∏–≥—Ä–∞–º–º–∞ –Ω–∞–π–¥–µ–Ω–∞ ‚Üí ‚úÖ –†–ê–ë–û–¢–ê–ï–¢!

ROOT CAUSE: –ü—É–Ω–∫—Ç—É–∞—Ü–∏—è –≤ —Ç–µ–∫—Å—Ç–∞—Ö –Ω–µ —É–¥–∞–ª—è–ª–∞—Å—å –ø—Ä–∏ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏!

–†–µ—à–µ–Ω–∏–µ: re.sub(r'[^\w\s]', '', text.lower()) –ø–µ—Ä–µ–¥ split()

VALIDATION.md –ø—É–Ω–∫—Ç 2: –î—É–±–ª–∏ ‚Üí GREEN ‚úÖ

üìö Changelog
v16.30 (2026-02-16)

‚úÖ FIX –ë–ê–ì #4: Gap duplication filter (N-gram overlap + —É–¥–∞–ª–µ–Ω–∏–µ –ø—É–Ω–∫—Ç—É–∞—Ü–∏–∏)

‚úÖ –î–ª—è PREV: —Ç—Ä–∏–≥—Ä–∞–º–º—ã (3+ —Å–ª–æ–≤ –ø–æ–¥—Ä—è–¥) –±–µ–∑ –ø—É–Ω–∫—Ç—É–∞—Ü–∏–∏

‚úÖ –î–ª—è NEXT: text_similarity (SequenceMatcher) ‚Üí threshold 55%

‚úÖ –£–¥–∞–ª–µ–Ω–∏–µ –ø—É–Ω–∫—Ç—É–∞—Ü–∏–∏: re.sub(r'[^\w\s]', '') –ø–µ—Ä–µ–¥ split()

v16.29 (2026-02-16)

‚úÖ FIX –ë–ê–ì #3: Gap hallucination filter (threshold 55%)

‚úÖ –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞ (lowercase) –ø–µ—Ä–µ–¥ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ–º

‚úÖ –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –ø–µ—Ä–≤—ã–º–∏ N —Å–ª–æ–≤–∞–º–∏ next_text

‚ö†Ô∏è KNOWN ISSUE: –ë–ê–ì #4 - –¥—É–±–ª–∏ —Å prev_segment (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω –≤ v16.30)

v16.28 (2026-02-16)

FIX –ë–ê–ì #2: –ü–æ—Ç–µ—Ä—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –ø—Ä–∏ timestamp injection

DEBUG CHECKPOINT: –ü–æ–∏—Å–∫ –º–µ—Å—Ç–∞ –ø–æ—Ç–µ—Ä–∏ —Ä–µ–ø–ª–∏–∫

–ò—Å–ø—Ä–∞–≤–ª–µ–Ω range(0, len(sentences)-1, 2) ‚Üí range(0, len(sentences), 2)

v16.27 (2026-02-15)

–ù–æ–≤–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è: Real tests > Unit tests

–£–¥–∞–ª–µ–Ω—ã unit tests –¥–ª—è –±–∞–≥–æ–≤ (7 —Ñ–∞–π–ª–æ–≤)

–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–´–ô Real test –ü–ï–†–ï–î –∫–æ–º–º–∏—Ç–æ–º


text
# Version: v16.29
# Last updated: 2026-02-16

## üîß v16.29: FIX –ë–ê–ì #3 ‚Äî Gap hallucination filter (threshold 55%)

**–î–∞—Ç–∞:** 2026-02-16  
**ROOT CAUSE:** Gap filling –¥–æ–±–∞–≤–ª—è–ª –≥–∞–ª–ª—é—Ü–∏–Ω–∞—Ü–∏–∏ Whisper (—à—É–º—ã —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–ª–∏—Å—å –∫–∞–∫ —Ç–µ–∫—Å—Ç, —Å—Ö–æ–∂–∏–π —Å —Å–æ—Å–µ–¥–Ω–∏–º —Å–µ–≥–º–µ–Ω—Ç–æ–º)

---

### –ü—Ä–æ–±–ª–µ–º–∞

**–°–∏–º–ø—Ç–æ–º:**

–í –∏–Ω—Ç–µ—Ä–≤—å—é –ò—Å–∞–µ–≤–∞ –ø–æ—è–≤–∏–ª–∞—Å—å —Ä–µ–ø–ª–∏–∫–∞, –∫–æ—Ç–æ—Ä–æ–π –ù–ï–¢ –≤ –∞—É–¥–∏–æ:

```txt
00:03:56 –ñ—É—Ä–Ω–∞–ª–∏—Å—Ç: —Å–æ–≤–µ—Ç—Å–∫–∞—è –∫–æ–º–∞–Ω–¥–∞
–ü–æ –∞—É–¥–∏–æ: –≠—Ç–æ–≥–æ —Ç–µ–∫—Å—Ç–∞ –ù–ï–¢! –ü–∞—É–∑–∞ 3.2 —Å–µ–∫—É–Ω–¥—ã.

DEBUG LOG:

text
üö® GAP 00:03:56‚Äì00:03:59 (3.2s)
   ‚úÖ GAP_FILLED ‚Üí –ñ—É—Ä–Ω–∞–ª–∏—Å—Ç (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
   ‚úÖ [00:03:56] —Å–æ–≤–µ—Ç—Å–∫–∞—è –∫–æ–º–∞–Ω–¥–∞...
5 Whys (ROOT CAUSE)
–ü–æ—á–µ–º—É –ø–æ—è–≤–∏–ª—Å—è —Ç–µ–∫—Å—Ç, –∫–æ—Ç–æ—Ä–æ–≥–æ –Ω–µ—Ç –≤ –∞—É–¥–∏–æ?
‚Üí Gap filling —Ç—Ä–∞–Ω—Å–∫—Ä–∏–±–∏—Ä–æ–≤–∞–ª –ø—Ä–æ–º–µ–∂—É—Ç–æ–∫ 00:03:56-00:03:59

–ü–æ—á–µ–º—É gap filling —Å–æ–∑–¥–∞–ª —Ç–µ–∫—Å—Ç?
‚Üí Whisper —Ä–∞—Å–ø–æ–∑–Ω–∞–ª –®–£–ú–´ –∏–ª–∏ –§–†–ê–ì–ú–ï–ù–¢–´ —Å–ª–æ–≤ –∫–∞–∫ "—Å–æ–≤–µ—Ç—Å–∫–∞—è –∫–æ–º–∞–Ω–¥–∞"

–ü–æ—á–µ–º—É –Ω–µ —É–¥–∞–ª–∏–ª–∞ clean_hallucinations()?
‚Üí –ü–∞—Ç—Ç–µ—Ä–Ω "—Å–æ–≤–µ—Ç—Å–∫–∞—è –∫–æ–º–∞–Ω–¥–∞" –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç known hallucinations (–ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ —Å–ª–µ–¥—É–µ—Ç, —Å–ø–∞—Å–∏–±–æ –∑–∞ –≤–Ω–∏–º–∞–Ω–∏–µ)

–ü–æ—á–µ–º—É –Ω–µ –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–ª–∏ –ø—Ä–∏ gap filling?
‚Üí v16.5 –¥–æ–±–∞–≤–∏–ª –ø—Ä–æ–≤–µ—Ä–∫—É similarity –¥–ª—è –∞—Ç—Ä–∏–±—É—Ü–∏–∏ —Å–ø–∏–∫–µ—Ä–∞, –Ω–æ –ù–ï –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –≥–∞–ª–ª—é—Ü–∏–Ω–∞—Ü–∏–π

ROOT CAUSE:
‚Üí Similarity –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –î–õ–Ø –∞—Ç—Ä–∏–±—É—Ü–∏–∏, –ù–û –î–û–õ–ñ–ï–ù –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –î–õ–Ø —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –≥–∞–ª–ª—é—Ü–∏–Ω–∞—Ü–∏–π!

–†–µ—à–µ–Ω–∏–µ (–∫–æ–¥)
–§–∞–π–ª: scripts/core/transcription.py:force_transcribe_diar_gaps()

–ò–∑–º–µ–Ω–µ–Ω–∏—è v16.29:

–ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞: lowercase –ø–µ—Ä–µ–¥ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ–º

–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –Ω–∞—á–∞–ª–æ–º next_text: –±–µ—Ä—ë–º –ø–µ—Ä–≤—ã–µ N —Å–ª–æ–≤ (N*2 = —Å–ª–æ–≤–∞ –≤ gap)

Threshold 55%: –ø–æ–Ω–∏–∂–µ–Ω —Å 70% –∏–∑-–∑–∞ –º–æ—Ä—Ñ–æ–ª–æ–≥–∏–∏ —Ä—É—Å—Å–∫–æ–≥–æ —è–∑—ã–∫–∞

–§–∏–ª—å—Ç—Ä hallucination: –µ—Å–ª–∏ similarity > 55% ‚Üí SKIP gap!

–ö–æ–¥:

python
# –ù–æ—Ä–º–∞–ª–∏–∑—É–µ–º —Ç–µ–∫—Å—Ç—ã
gap_text_normalized = text.lower().strip()
next_text_normalized = next_text.lower().strip()

# –ë–µ—Ä—ë–º –ø–µ—Ä–≤—ã–µ N*2 —Å–ª–æ–≤ next_text
gap_words = gap_text_normalized.split()
next_words = next_text_normalized.split()
compare_words_count = len(gap_words) * 2
next_text_compare = ' '.join(next_words[:compare_words_count])

similarity = text_similarity(gap_text_normalized, next_text_compare)

# üÜï v16.29: –ï—Å–ª–∏ —Å—Ö–æ–¥—Å—Ç–≤–æ >55% ‚Üí —ç—Ç–æ –≥–∞–ª–ª—é—Ü–∏–Ω–∞—Ü–∏—è!
if similarity > 0.55:
    print(f"    ‚ö†Ô∏è GAP —Å–ª–∏—à–∫–æ–º –ø–æ—Ö–æ–∂ –Ω–∞ next ({similarity:.0%}) ‚Üí SKIP (hallucination)")
    continue  # –ü—Ä–æ–ø—É—Å–∫–∞–µ–º —ç—Ç–æ—Ç gap —Å–µ–≥–º–µ–Ω—Ç!
–ü–æ—á–µ–º—É threshold 55%?
–ü—Ä–æ–±–ª–µ–º–∞ —Å –º–æ—Ä—Ñ–æ–ª–æ–≥–∏–µ–π:

text
Gap:  "—Å–æ–≤–µ—Ç—Å–∫–∞—è –∫–æ–º–∞–Ω–¥–∞"
Next: "—Å–æ–≤–µ—Ç—Å–∫–æ–µ –∫–æ–º–∞–Ω–¥–æ–≤–∞–Ω–∏–µ, –Ω–µ —Å–∫–∞–∑–∞—Ç—å"
SequenceMatcher –≤–∏–¥–∏—Ç:

—Å–æ–≤–µ—Ç—Å–∫–∞—è vs —Å–æ–≤–µ—Ç—Å–∫–æ–µ (—Ä–∞–∑–Ω—ã–µ –æ–∫–æ–Ω—á–∞–Ω–∏—è)

–∫–æ–º–∞–Ω–¥–∞ vs –∫–æ–º–∞–Ω–¥–æ–≤–∞–Ω–∏–µ (—Ä–∞–∑–Ω—ã–µ –æ–∫–æ–Ω—á–∞–Ω–∏—è)

–†–µ–∑—É–ª—å—Ç–∞—Ç: 57.7% —Å—Ö–æ–¥—Å—Ç–≤–æ (–Ω–µ 81%, –∫–∞–∫ –ø—Ä–∏ —Ç–æ—á–Ω–æ–º —Å–æ–≤–ø–∞–¥–µ–Ω–∏–∏)

Threshold logic:

–°—Ö–æ–¥—Å—Ç–≤–æ	–ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è	–î–µ–π—Å—Ç–≤–∏–µ
0-50%	Gap —Ç–µ–∫—Å—Ç —É–Ω–∏–∫–∞–ª–µ–Ω	–î–æ–±–∞–≤–ª—è–µ–º —Å detected_speaker
50-55%	Continuation/context	–ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ–º —Å–ø–∏–∫–µ—Ä–∞ –Ω–∞ next_speaker
>55%	–ì–∞–ª–ª—é—Ü–∏–Ω–∞—Ü–∏—è Whisper	SKIP gap!
–†–µ–∑—É–ª—å—Ç–∞—Ç
BEFORE v16.29:

text
00:03:40 –ñ—É—Ä–Ω–∞–ª–∏—Å—Ç: –ê –≤—ã –ø—Ä–æ –ø–∞—Ä–æ–ª—å-—Ç–æ —Å–∫–∞–∑–∞–ª–∏...
00:03:56 –ñ—É—Ä–Ω–∞–ª–∏—Å—Ç: —Å–æ–≤–µ—Ç—Å–∫–∞—è –∫–æ–º–∞–Ω–¥–∞  ‚ùå –ì–∞–ª–ª—é—Ü–∏–Ω–∞—Ü–∏—è!
00:03:59 –ò—Å–∞–µ–≤: –°–æ–≤–µ—Ç—Å–∫–æ–µ –∫–æ–º–∞–Ω–¥–æ–≤–∞–Ω–∏–µ
AFTER v16.29:

text
00:03:40 –ñ—É—Ä–Ω–∞–ª–∏—Å—Ç: –ê –≤—ã –ø—Ä–æ –ø–∞—Ä–æ–ª—å-—Ç–æ —Å–∫–∞–∑–∞–ª–∏...
00:03:59 –ò—Å–∞–µ–≤: –°–æ–≤–µ—Ç—Å–∫–æ–µ –∫–æ–º–∞–Ω–¥–æ–≤–∞–Ω–∏–µ  ‚úÖ –ì–∞–ª–ª—é—Ü–∏–Ω–∞—Ü–∏—è —É–¥–∞–ª–µ–Ω–∞!
DEBUG LOG v16.29:

text
üîç –°—Ö–æ–¥—Å—Ç–≤–æ —Å next [–ò—Å–∞–µ–≤]: 57.7% (words=2‚Üí4)
‚ö†Ô∏è GAP —Å–ª–∏—à–∫–æ–º –ø–æ—Ö–æ–∂ –Ω–∞ next (58%) ‚Üí SKIP (hallucination)
‚ö†Ô∏è Gaps –Ω–µ –¥–∞–ª–∏ –Ω–æ–≤—ã—Ö —Å–µ–≥–º–µ–Ω—Ç–æ–≤
–£—Ä–æ–∫
–ü—Ä–æ–±–ª–µ–º–∞ v16.5-v16.28:

Similarity –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è –¢–û–õ–¨–ö–û –¥–ª—è –∞—Ç—Ä–∏–±—É—Ü–∏–∏ —Å–ø–∏–∫–µ—Ä–∞

–ù–ï –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –≥–∞–ª–ª—é—Ü–∏–Ω–∞—Ü–∏–π

–í—ã—Å–æ–∫–æ–µ —Å—Ö–æ–¥—Å—Ç–≤–æ = –ø—Ä–∏–∑–Ω–∞–∫ –≥–∞–ª–ª—é—Ü–∏–Ω–∞—Ü–∏–∏ Whisper (—à—É–º—ã/—Ñ—Ä–∞–≥–º–µ–Ω—Ç—ã)

–†–µ—à–µ–Ω–∏–µ v16.29:

Similarity >55% ‚Üí –§–ò–õ–¨–¢–†–ê–¶–ò–Ø (–ø—Ä–æ–ø—É—Å–∫ gap)

Similarity 50-55% ‚Üí –ê–¢–†–ò–ë–£–¶–ò–Ø (–ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–ø–∏–∫–µ—Ä–∞)

Similarity <50% ‚Üí –î–û–ë–ê–í–õ–ï–ù–ò–ï (—É–Ω–∏–∫–∞–ª—å–Ω—ã–π —Ç–µ–∫—Å—Ç)

VALIDATION.md –ø—É–Ω–∫—Ç 4: Ending hallucinations ‚Üí GREEN ‚úÖ

‚ö†Ô∏è KNOWN ISSUES (v16.29)
–ë–ê–ì #4: Gap filling –¥—É–±–ª–∏—Ä—É–µ—Ç —Ç–µ–∫—Å—Ç —Å prev_segment
–°–∏–º–ø—Ç–æ–º:

text
... –≤ –ª–∏—Ü–µ —Ç–∏–≥—Ä–æ–≤. –ª–∏—Ü–µ —Ç–∏–≥—Ä–æ–≤, —Ç–∞–∫–∂–µ –±—ã–ª –¢–∞–∫–∂–µ –±—ã–ª –¥–æ–≤–æ–ª—å–Ω–æ –ø–æ—Å–ø–µ—à–Ω–æ...
                    ^^^^^^^^^^^^^^^^^^^^^^ ^^^^^^^^
                    –î—É–±–ª—å —Ñ—Ä–∞–∑—ã            –î—É–±–ª—å —Å–ª–æ–≤
ROOT CAUSE:

Gap filling –ø—Ä–æ–≤–µ—Ä—è–µ—Ç similarity –¢–û–õ–¨–ö–û —Å next_segment

–ù–ï –ø—Ä–æ–≤–µ—Ä—è–µ—Ç similarity —Å prev_segment!

–†–µ–∑—É–ª—å—Ç–∞—Ç: –µ—Å–ª–∏ gap —Ç–µ–∫—Å—Ç –ø–æ—Ö–æ–∂ –Ω–∞ –ü–†–ï–î–´–î–£–©–ò–ô —Å–µ–≥–º–µ–Ω—Ç ‚Üí –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –¥—É–±–ª—å

DEBUG LOG:

text
üö® GAP 00:07:46‚Äì00:07:50 (3.6s)
‚úÖ [00:07:46] –≤ –ª–∏—Ü–µ —Ç–∏–≥—Ä–æ–≤, —Ç–∞–∫–∂–µ –±—ã–ª...
–ì–¥–µ:

GAP: "–≤ –ª–∏—Ü–µ —Ç–∏–≥—Ä–æ–≤, —Ç–∞–∫–∂–µ –±—ã–ª"

Prev segment (00:06:51): "... –∫–æ–∑—ã—Ä–µ–º –≤ –ª–∏—Ü–µ —Ç–∏–≥—Ä–æ–≤."

–°—Ö–æ–¥—Å—Ç–≤–æ —Å prev: >70% ‚Üí –î–û–õ–ñ–ï–ù –±—ã–ª –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å!

TODO v16.30:
–î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É similarity —Å prev_segment (–Ω–µ —Ç–æ–ª—å–∫–æ next_segment):

python
# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ö–æ–¥—Å—Ç–≤–æ —Å prev_segment
if prev_segment:
    prev_text = prev_segment.get('text', '')
    prev_text_normalized = prev_text.lower().strip()
    prev_words = prev_text_normalized.split()
    prev_text_end = ' '.join(prev_words[-compare_words_count:])  # –ü–æ—Å–ª–µ–¥–Ω–∏–µ N —Å–ª–æ–≤
    
    similarity_prev = text_similarity(gap_text_normalized, prev_text_end)
    
    if similarity_prev > 0.55:
        print(f"    ‚ö†Ô∏è GAP —Å–ª–∏—à–∫–æ–º –ø–æ—Ö–æ–∂ –Ω–∞ prev ({similarity_prev:.0%}) ‚Üí SKIP")
        continue
Status: –û–¢–ö–†–´–¢ (–±—É–¥–µ—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω –≤ v16.30)

üìö Changelog
v16.29 (2026-02-16)
‚úÖ FIX –ë–ê–ì #3: Gap hallucination filter (threshold 55%)

‚úÖ –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞ (lowercase) –ø–µ—Ä–µ–¥ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ–º

‚úÖ –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –ø–µ—Ä–≤—ã–º–∏ N —Å–ª–æ–≤–∞–º–∏ next_text

‚ö†Ô∏è KNOWN ISSUE: –ë–ê–ì #4 - –¥—É–±–ª–∏ —Å prev_segment

v16.28 (2026-02-16)
FIX –ë–ê–ì #2: –ü–æ—Ç–µ—Ä—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –ø—Ä–∏ timestamp injection

DEBUG CHECKPOINT: –ü–æ–∏—Å–∫ –º–µ—Å—Ç–∞ –ø–æ—Ç–µ—Ä–∏ —Ä–µ–ø–ª–∏–∫

–ò—Å–ø—Ä–∞–≤–ª–µ–Ω range(0, len(sentences)-1, 2) ‚Üí range(0, len(sentences), 2)

v16.27 (2026-02-15)
–ù–æ–≤–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è: Real tests > Unit tests

–£–¥–∞–ª–µ–Ω—ã unit tests –¥–ª—è –±–∞–≥–æ–≤ (7 —Ñ–∞–π–ª–æ–≤)

–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–´–ô Real test –ü–ï–†–ï–î –∫–æ–º–º–∏—Ç–æ–º

---

# Version: v16.28
# Last updated: 2026-02-16

## üîß v16.28: FIX –ë–ê–ì #3 ‚Äî –ü–æ—Ç–µ—Ä—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –ø—Ä–∏ timestamp injection

**–î–∞—Ç–∞:** 2026-02-16  
**ROOT CAUSE:** –û—à–∏–±–∫–∞ –≤ —Ä–∞–∑–±–∏–µ–Ω–∏–∏ —Ç–µ–∫—Å—Ç–∞ –Ω–∞ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –≤ `insert_intermediate_timestamps()` –ø—Ä–∏–≤–æ–¥–∏–ª–∞ –∫ –ø–æ—Ç–µ—Ä–µ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –≤ –¥–ª–∏–Ω–Ω–æ–º —Å–µ–≥–º–µ–Ω—Ç–µ.[cite:27]

---

### –ü—Ä–æ–±–ª–µ–º–∞

**–°–∏–º–ø—Ç–æ–º:**

–í –∏–Ω—Ç–µ—Ä–≤—å—é –ò—Å–∞–µ–≤–∞ —Ñ—Ä–∞–∑–∞:

> ¬´–¢–æ –µ—Å—Ç—å —ç—Ç–æ –±—ã–ª —Ç–∞–∫–æ–π –ø—É–Ω–∫—Ç, –∫–æ—Ç–æ—Ä—ã–π –¥–µ–ª–∞–ª –¥–ª—è –Ω–µ–º—Ü–µ–≤ –æ–±–æ—Ä–æ–Ω—É —ç—Ç–æ–≥–æ —É—á–∞—Å—Ç–∫–∞ –ù–µ–≤—ã –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–æ—Å—Ç—ã–º —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è —Ç–µ—Ö–Ω–∏–∫–∏ –∏ —Ç–∞–∫—Ç–∏–∫–∏.¬ª

–ø—Ä–æ–ø–∞–¥–∞–ª–∞ –∏–∑ –∏—Ç–æ–≥–æ–≤–æ–≥–æ TXT, —Ö–æ—Ç—è –±—ã–ª–∞ –≤ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–æ–º —Å–µ–≥–º–µ–Ω—Ç–µ.

**–ù–∞–±–ª—é–¥–µ–Ω–∏–µ –ø–æ checkpoint‚Äô–∞–º:**

```text
AFTER MERGE:
   00:04:29: 1572 —Å–∏–º–≤–æ–ª–æ–≤, 227 —Å–ª–æ–≤
   –¢–µ–∫—Å—Ç –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è –Ω–∞ "—Ç–æ –µ—Å—Ç—å —ç—Ç–æ –±—ã–ª —Ç–∞–∫–æ–π –ø—É–Ω–∫—Ç, –∫–æ—Ç–æ—Ä—ã–π –¥–µ–ª–∞–ª –¥–ª—è –Ω–µ–º—Ü–µ–≤
   –æ–±–æ—Ä–æ–Ω—É —ç—Ç–æ–≥–æ —É—á–∞—Å—Ç–∫–∞ –ù–µ–≤—ã –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–æ—Å—Ç—ã–º —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è —Ç–µ—Ö–Ω–∏–∫–∏ –∏ —Ç–∞–∫—Ç–∏–∫–∏."

AFTER TIMESTAMP INJECTION:
   00:04:29: 1462 —Å–∏–º–≤–æ–ª–æ–≤, 208 —Å–ª–æ–≤
   –¢–µ–∫—Å—Ç –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è –Ω–∞ "–∏ –Ω–∏—á–µ–≥–æ —Å –Ω–µ–π —Å–¥–µ–ª–∞—Ç—å –Ω–µ –º–æ–≥–ª–∏ –æ—Å–µ–Ω—å—é –∏ –≤ –Ω–∞—á–∞–ª–µ –∑–∏–º—ã 1941 –≥–æ–¥–∞."
‚Üí –ü–æ—Ç–µ—Ä—è: ~110 —Å–∏–º–≤–æ–ª–æ–≤, ~19 —Å–ª–æ–≤, –≤–∫–ª—é—á–∞—è —Ü–µ–ª–µ–≤—É—é —Ñ—Ä–∞–∑—É.

5 Whys (ROOT CAUSE)
–ü–æ—á–µ–º—É –ø—Ä–æ–ø–∞–ª–∞ —Ñ—Ä–∞–∑–∞?
–ü–æ—Ç–æ–º—É —á—Ç–æ –ø–æ—Å–ª–µ —ç—Ç–∞–ø–∞ insert_intermediate_timestamps() —Ç–µ–∫—Å—Ç —Å–µ–≥–º–µ–Ω—Ç–∞ —Å—Ç–∞–ª –∫–æ—Ä–æ—á–µ ‚Äî —Ñ–∏–Ω–∞–ª—å–Ω–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –∏—Å—á–µ–∑–ª–æ.

–ü–æ—á–µ–º—É –∏–º–µ–Ω–Ω–æ —ç—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –æ–±—Ä–µ–∑–∞–ª–∞ —Ç–µ–∫—Å—Ç?
–í–Ω—É—Ç—Ä–∏ —Ñ—É–Ω–∫—Ü–∏–∏ —Ç–µ–∫—Å—Ç —Ä–∞–∑–±–∏–≤–∞–µ—Ç—Å—è –Ω–∞ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –∏ —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è –∑–∞–Ω–æ–≤–æ, –≤—Å—Ç–∞–≤–ª—è—è inner timestamps.

–ü–æ—á–µ–º—É –ø—Ä–∏ —Ä–∞–∑–±–∏–µ–Ω–∏–∏ —Ç–µ—Ä—è–ª–æ—Å—å –ø–æ—Å–ª–µ–¥–Ω–µ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ?
–í –∫–æ–¥–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è –¥–∏–∞–ø–∞–∑–æ–Ω range(0, len(sentences)-1, 2), –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–æ–ø—É—Å–∫–∞–ª –ø–æ—Å–ª–µ–¥–Ω–∏–π —ç–ª–µ–º–µ–Ω—Ç –º–∞—Å—Å–∏–≤–∞ sentences –ø—Ä–∏ –Ω–µ—á—ë—Ç–Ω–æ–π –¥–ª–∏–Ω–µ.

–ü–æ—á–µ–º—É —ç—Ç–æ –Ω–µ –ø–æ–π–º–∞–ª–∏ —Ç–µ—Å—Ç—ã?
–õ–æ–≥–∏–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ –Ω–∞—Ö–æ–¥–∏–ª–∞—Å—å –≤–Ω—É—Ç—Ä–∏ –±–æ–ª—å—à–æ–π —Ñ—É–Ω–∫—Ü–∏–∏, –Ω–µ –±—ã–ª–∞ –≤—ã–¥–µ–ª–µ–Ω–∞ –≤ –æ—Ç–¥–µ–ª—å–Ω—É—é —É—Ç–∏–ª–∏—Ç—É –∏ –Ω–µ –∏–º–µ–ª–∞ unit‚Äë—Ç–µ—Å—Ç–∞.

ROOT CAUSE:
–û—à–∏–±–∫–∞ –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ (len(sentences)-1 –≤–º–µ—Å—Ç–æ len(sentences)) –≤ —É—Ç–∏–ª–∏—Ç–∞—Ä–Ω–æ–π —á–∞—Å—Ç–∏ –∫–æ–¥–∞, –æ–±—ä–µ–¥–∏–Ω—ë–Ω–Ω–∞—è —Å –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ–º unit‚Äë—Ç–µ—Å—Ç–∞ –Ω–∞ –ø–∞—Ä—Å–∏–Ω–≥ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π.

–†–µ—à–µ–Ω–∏–µ (–∫–æ–¥)
–§–∞–π–ª: scripts/corrections/timestamp_fixer.py.[cite:27]

–ë–´–õ–û
python
# –†–∞–∑–±–∏–≤–∞–µ–º –Ω–∞ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è
sentences = re.split(r'([.!?]+)\s+', text)
# –û–±—ä–µ–¥–∏–Ω—è–µ–º –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è —Å –ø—É–Ω–∫—Ç—É–∞—Ü–∏–µ–π: ['–¢–µ–∫—Å—Ç', '.', ' '] ‚Üí ['–¢–µ–∫—Å—Ç.']
sentences = [''.join(sentences[i:i+2]).strip() for i in range(0, len(sentences)-1, 2)]
#                                                             ^^^^^^^^^^^^^^^^^
sentences = [s for s in sentences if s]
–°–¢–ê–õ–û
python
# –†–∞–∑–±–∏–≤–∞–µ–º –Ω–∞ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è
sentences = re.split(r'([.!?]+)\s+', text)
# –û–±—ä–µ–¥–∏–Ω—è–µ–º –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è —Å –ø—É–Ω–∫—Ç—É–∞—Ü–∏–µ–π –ë–ï–ó –ø–æ—Ç–µ—Ä–∏ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞
sentences = [''.join(sentences[i:i+2]).strip() for i in range(0, len(sentences), 2)]
#                                                             ^^^^^^^^^^^^^^^
sentences = [s for s in sentences if s]
–ü–æ—á–µ–º—É —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:

–ü—Ä–∏ len(parts) = 7 (3 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è + –ø—É–Ω–∫—Ç—É–∞—Ü–∏—è) –¥–∏–∞–ø–∞–∑–æ–Ω range(0, len(parts), 2) –¥–∞—ë—Ç –∏–Ω–¥–µ–∫—Å—ã [0, 2, 4, 6], –∏ –ø–æ—Å–ª–µ–¥–Ω–∏–π —ç–ª–µ–º–µ–Ω—Ç –Ω–µ —Ç–µ—Ä—è–µ—Ç—Å—è.

–í —Å—Ç–∞—Ä–æ–º –≤–∞—Ä–∏–∞–Ω—Ç–µ —Å len(parts)-1 –∏–Ω–¥–µ–∫—Å 6 –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–ª—Å—è.

–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è (–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è)
–í —Ä–∞–º–∫–∞—Ö v16.28 —Ç–∞–∫–∂–µ –æ–±–Ω–æ–≤–ª–µ–Ω—ã:

docs/DEBUGGING.md

–î–æ–±–∞–≤–ª–µ–Ω–∞ —Å–µ–∫—Ü–∏—è –ø—Ä–æ debug checkpoints.

–û–ø–∏—Å–∞–Ω —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π debug_checkpoint() –∏ –º–µ—Å—Ç–∞ –µ–≥–æ –≤—ã–∑–æ–≤–∞.

docs/ARCHITECTURE.md

–î–æ–±–∞–≤–ª–µ–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ ¬´–≠—Ç–∞–ø ‚Üí –§—É–Ω–∫—Ü–∏—è ‚Üí –§–∞–π–ª ‚Üí Checkpoint ‚Üí –ú–µ–Ω—è–µ—Ç text?¬ª.

–û—Ç–º–µ—á–µ–Ω—ã –∫—Ä–∏—Ç–∏—á–Ω—ã–µ —ç—Ç–∞–ø—ã (merge, timestamp injection –∏ —Ç.–ø.).

docs/TESTING-STRATEGY.md

–£—Ç–æ—á–Ω–µ–Ω–æ: unit‚Äëtests –Ω—É–∂–Ω—ã –¥–ª—è —É—Ç–∏–ª–∏—Ç (regex, –ø–∞—Ä—Å–∏–Ω–≥), –Ω–æ –Ω–µ –¥–ª—è –±–∞–≥–æ–≤ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –º–æ–¥—É–ª–µ–π.

–ü—Ä–∏–º–µ—Ä —Å –ø–∞—Ä—Å–µ—Ä–æ–º –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π –≤—ã–Ω–µ—Å–µ–Ω –∫–∞–∫ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –∫–∞–Ω–¥–∏–¥–∞—Ç –¥–ª—è unit‚Äë—Ç–µ—Å—Ç–æ–≤.

docs/BUG-REPORT-TEMPLATE.md (–Ω–æ–≤—ã–π)

–í–≤–µ–¥—ë–Ω —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —à–∞–±–ª–æ–Ω –¥–ª—è –±–∞–≥‚Äë—Ä–µ–ø–æ—Ä—Ç–æ–≤ (—Å–∏–º–ø—Ç–æ–º, checkpoint‚Äô—ã, —Ñ–∞–π–ª—ã, VALIDATION‚Äë—Å—Ç–∞—Ç—É—Å, test‚Äëresults).

docs/INTEGRATION-CHECKLIST.md

–î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–æ–≤–µ—Ä–∫–∏:

–Ω–∞–ª–∏—á–∏–µ debug checkpoints –Ω–∞ –≤—Å–µ—Ö text‚Äë–∫—Ä–∏—Ç–∏—á–Ω—ã—Ö —ç—Ç–∞–ø–∞—Ö;

—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è ARCHITECTURE.md –∏ TESTING-STRATEGY.md –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ø–∞–π–ø–ª–∞–π–Ω–∞.

–†–µ–∑—É–ª—å—Ç–∞—Ç
–§—Ä–∞–∑–∞ ¬´—Ç–æ –µ—Å—Ç—å —ç—Ç–æ –±—ã–ª —Ç–∞–∫–æ–π –ø—É–Ω–∫—Ç‚Ä¶¬ª —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –∏—Ç–æ–≥–æ–≤–æ–º TXT.

–î–ª–∏–Ω–∞ —Å–µ–≥–º–µ–Ω—Ç–∞ –≤ checkpoint‚Äô–∞—Ö AFTER MERGE –∏ AFTER TIMESTAMP INJECTION —Å–æ–≤–ø–∞–¥–∞–µ—Ç.

–í—Å–µ 7 –ø—É–Ω–∫—Ç–æ–≤ VALIDATION.md ‚Äî GREEN.

–í—Ä–µ–º—è –Ω–∞ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—é –ø–æ–¥–æ–±–Ω—ã—Ö –±–∞–≥–æ–≤ —Å–æ–∫—Ä–∞—â–µ–Ω–æ –∑–∞ —Å—á—ë—Ç:

—Å–∏—Å—Ç–µ–º–Ω—ã—Ö debug‚Äëcheckpoint‚Äô–æ–≤;

–∫–∞—Ä—Ç—ã –ø–∞–π–ø–ª–∞–π–Ω–∞ –≤ ARCHITECTURE.md;

—Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –±–∞–≥‚Äë—Ä–µ–ø–æ—Ä—Ç–∞.

Version: v16.27
Last updated: 2026-02-13
üéì v16.27: –ù–æ–≤–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è - Real tests > Unit tests
–î–∞—Ç–∞: 2026-02-13
ROOT CAUSE v16.22-v16.26: Unit tests –¥–∞–≤–∞–ª–∏ –ª–æ–∂–Ω–æ–µ —á—É–≤—Å—Ç–≤–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
–†–ï–®–ï–ù–ò–ï: –û—Ç–∫–∞–∑ –æ—Ç unit tests –¥–ª—è –±–∞–≥–æ–≤ + –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π Real test –ü–ï–†–ï–î –∫–æ–º–º–∏—Ç–æ–º

–ü—Ä–æ–±–ª–µ–º–∞ v16.22-v16.26:
8 –∏—Ç–µ—Ä–∞—Ü–∏–π –Ω–µ—É–¥–∞—á–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫:

v16.22: FIX timestamp –¥—É–±–ª–∏ ‚Üí unit tests GREEN ‚Üí real test ‚Üí ‚ùå –ù–û–í–´–ô –ë–ê–ì!

v16.23: FIX hallucination loops ‚Üí unit tests GREEN ‚Üí real test ‚Üí ‚ùå –ù–û–í–´–ô –ë–ê–ì!

v16.24: FIX timestamp is_too_close ‚Üí unit tests GREEN ‚Üí real test ‚Üí ‚ùå –ù–û–í–´–ô –ë–ê–ì!

v16.24.1: FIX adjacent same speaker ‚Üí unit tests GREEN ‚Üí real test ‚Üí ‚ùå –ù–û–í–´–ô –ë–ê–ì!

v16.25: –û–¢–ö–ê–¢ + –ø—Ä–æ—Å—Ç–æ–π FIX ‚Üí real test ‚Üí ‚ùå –î—É–±–ª–∏ –æ—Å—Ç–∞–ª–∏—Å—å!

v16.26: FIX —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è ‚Üí real test ‚Üí ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç!

–í—ã–≤–æ–¥: 8 –∏—Ç–µ—Ä–∞—Ü–∏–π –≤–º–µ—Å—Ç–æ 1-2, –ø–æ—Ç–æ–º—É —á—Ç–æ –¥–æ–≤–µ—Ä—è–ª–∏ pytest GREEN –±–µ–∑ real test!

–§–∞–π–ª—ã —Å "–∑–µ–ª—ë–Ω—ã–º–∏" unit tests, –∫–æ—Ç–æ—Ä—ã–µ –ù–ï –ø–æ–º–æ–≥–ª–∏:

tests/test_txt_export.py - 5/5 PASSED, –Ω–æ –¥—É–±–ª–∏ timestamp –æ—Å—Ç–∞–ª–∏—Å—å

tests/test_replica_merger.py - 3/3 PASSED, –Ω–æ inner timestamps –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤–∞–ª–∏

tests/test_hallucinations.py - 6/6 PASSED, –Ω–æ –Ω–µ –≤–∏–¥–µ–ª –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –º–æ–¥—É–ª–µ–π

5 Whys Root Cause Analysis:
–ü–æ—á–µ–º—É 8 –∏—Ç–µ—Ä–∞—Ü–∏–π? ‚Üí Unit tests GREEN, –Ω–æ real test –ª–æ–º–∞–ª—Å—è

–ü–æ—á–µ–º—É –Ω–µ –ø–æ–º–æ–≥–ª–∏ unit tests? ‚Üí –ò–∑–æ–ª–∏—Ä–æ–≤–∞–ª–∏ —Ñ—É–Ω–∫—Ü–∏–∏ –æ—Ç —Ä–µ–∞–ª—å–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞

–ü–æ—á–µ–º—É –Ω–µ –≤–∏–¥–µ–ª–∏ –ø—Ä–æ–±–ª–µ–º—É? ‚Üí –ù–ï —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–ª–∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ replica_merger + txt_export

–ü–æ—á–µ–º—É –Ω–µ –∑–∞–ø—É—Å–∫–∞–ª–∏ real test –ü–ï–†–ï–î –∫–æ–º–º–∏—Ç–æ–º? ‚Üí –î–æ–≤–µ—Ä—è–ª–∏ pytest GREEN

ROOT CAUSE: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è - —Ñ–æ–∫—É—Å –Ω–∞ unit tests –≤–º–µ—Å—Ç–æ real tests!

–†–ï–®–ï–ù–ò–ï v16.27:
–ù–æ–≤–∞—è —Ñ–∏–ª–æ—Å–æ—Ñ–∏—è:

text
OLD: –ë–∞–≥ ‚Üí Unit test ‚Üí pytest GREEN ‚Üí –ö–æ–º–º–∏—Ç ‚Üí Real test ‚Üí ‚ùå
NEW: –ë–∞–≥ ‚Üí DEBUG ‚Üí ROOT CAUSE ‚Üí FIX ‚Üí Real test ‚Üí ‚úÖ –ö–æ–º–º–∏—Ç
–ò–∑–º–µ–Ω–µ–Ω–∏—è v16.27:

‚úÖ –£–¥–∞–ª–µ–Ω—ã unit tests –¥–ª—è –±–∞–≥–æ–≤ (7 —Ñ–∞–π–ª–æ–≤ –∏–∑ tests/).

‚úÖ –û—Å—Ç–∞–≤–ª–µ–Ω—ã —Ç–æ–ª—å–∫–æ regex utils tests (test_regex_patterns.py).

‚úÖ –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–´–ô Real test –ü–ï–†–ï–î –∫–æ–º–º–∏—Ç–æ–º.

‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –¥–æ–∫—É–º–µ–Ω—Ç—ã:

docs/INTEGRATION-CHECKLIST.md

docs/GOLDEN-DATASET.md

docs/TESTING-STRATEGY.md

docs/DEBUGGING.md ‚Äî —Å–µ–∫—Ü–∏—è "–ö–æ–≥–¥–∞ –ù–ï —Å–æ–∑–¥–∞–≤–∞—Ç—å unit test".

---

# Version: v16.26
# Last updated: 2026-02-13

## üîß v16.26: FIX –¥—É–±–ª–µ–π timestamp - —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è replica_merger + txt_export
**–î–∞—Ç–∞:** 2026-02-13  
**ROOT CAUSE:** –î–≤–∞ –º–æ–¥—É–ª—è –¥–æ–±–∞–≤–ª—è—é—Ç inner timestamps –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ!  
**–†–ï–®–ï–ù–ò–ï:** txt_export –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ timestamp –ø–µ—Ä–µ–¥ –≤—Å—Ç–∞–≤–∫–æ–π

### –ü—Ä–æ–±–ª–µ–º–∞ v16.25:

**–°–∏–º–ø—Ç–æ–º:**
```
00:00:56 00:00:56 –¢–æ –µ—Å—Ç—å —ç—Ç–æ –±—ã–ª–æ...
00:01:22 –ù–µ–≤—Å–∫–∏–π –ø—è—Ç–∞—á–æ–∫... 00:01:29
00:03:05 –ò —Å —ç–ª–µ–∫—Ç—Ä–æ—Å—Ç–∞–Ω—Ü–∏–∏... 00:03:07
```

### 5 Whys Root Cause Analysis:

1. **–ü–æ—á–µ–º—É –¥—É–±–ª–∏ `00:00:56 00:00:56`?** ‚Üí Timestamp –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –î–í–ê–ñ–î–´
2. **–ü–æ—á–µ–º—É –¥–≤–∞–∂–¥—ã?** ‚Üí –ò `replica_merger` –ò `txt_export` –¥–æ–±–∞–≤–ª—è—é—Ç inner timestamps
3. **–ü–æ—á–µ–º—É –æ–±–∞ –¥–æ–±–∞–≤–ª—è—é—Ç?** ‚Üí `replica_merger` (v16.19 –≠–¢–ê–ü 6.1), `txt_export` (v16.3+)
4. **–ü–æ—á–µ–º—É —Ä–∞–Ω—å—à–µ –Ω–µ –±—ã–ª–æ –¥—É–±–ª—è?** ‚Üí –î–æ v16.19 —Ç–æ–ª—å–∫–æ `txt_export` –¥–æ–±–∞–≤–ª—è–ª timestamps
5. **ROOT CAUSE:** –î–≤–∞ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã—Ö –º–æ–¥—É–ª—è –¥–æ–±–∞–≤–ª—è—é—Ç timestamp ‚Üí –Ω—É–∂–Ω–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è!

### –†–ï–®–ï–ù–ò–ï v16.26:

**scripts/export/txt_export.py:**
```python
def insert_inner_timestamps(text, start_sec, end_sec, next_segment_exists):
    # ‚úÖ v16.26: –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ inner timestamps –æ—Ç replica_merger
    has_inner_timestamps = bool(re.search(r'\d{2}:\d{2}:\d{2}', text))

    if has_inner_timestamps:
        return text  # –£–ñ–ï –µ—Å—Ç—å timestamps –æ—Ç replica_merger (–≠–¢–ê–ü 6.1)!

    # ... –æ—Å—Ç–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ v16.25 (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π) ...
```

**–ü–æ—á–µ–º—É —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- `replica_merger` (–≠–¢–ê–ü 6.1) –¥–æ–±–∞–≤–ª—è–µ—Ç timestamps –≤ –¥–ª–∏–Ω–Ω—ã–µ merged segments (>30 —Å–µ–∫)
- `txt_export` —Ç–µ–ø–µ—Ä—å –ü–†–û–í–ï–†–Ø–ï–¢ –Ω–∞–ª–∏—á–∏–µ timestamp –ü–ï–†–ï–î –≤—Å—Ç–∞–≤–∫–æ–π
- –ï—Å–ª–∏ timestamp –£–ñ–ï –µ—Å—Ç—å ‚Üí –Ω–µ –¥–æ–±–∞–≤–ª—è–µ–º (–∑–∞—â–∏—Ç–∞ –æ—Ç –¥—É–±–ª–µ–π!)
- –ï—Å–ª–∏ timestamp –ù–ï–¢ ‚Üí –¥–æ–±–∞–≤–ª—è–µ–º (–∫–æ—Ä–æ—Ç–∫–∏–π merged segment)

**–†–ï–ó–£–õ–¨–¢–ê–¢:**
```
00:00:56 –¢–æ –µ—Å—Ç—å —ç—Ç–æ –±—ã–ª–æ... ‚úÖ –ù–µ—Ç –¥—É–±–ª—è!
00:01:22 –ù–µ–≤—Å–∫–∏–π –ø—è—Ç–∞—á–æ–∫... ‚úÖ Timestamps –æ—Ç replica_merger!
00:03:05 –ò —Å —ç–ª–µ–∫—Ç—Ä–æ—Å—Ç–∞–Ω—Ü–∏–∏... ‚úÖ –í—Å–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ!
```

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- ‚úÖ `insert_inner_timestamps()` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç `re.search(r'\d{2}:\d{2}:\d{2}', text)`
- ‚úÖ –ï—Å–ª–∏ –Ω–∞–π–¥–µ–Ω—ã timestamp ‚Üí –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç text –ë–ï–ó –∏–∑–º–µ–Ω–µ–Ω–∏–π
- ‚úÖ –ï—Å–ª–∏ –ù–ï –Ω–∞–π–¥–µ–Ω—ã ‚Üí –ø—Ä–∏–º–µ–Ω—è–µ—Ç –ª–æ–≥–∏–∫—É v16.25

**–£—Ä–æ–∫ (–ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ):**
- UNIT TESTS –ù–ï –ù–£–ñ–ù–´!
- Unit tests —Ç–µ—Å—Ç–∏—Ä—É—é—Ç –û–î–ù–£ —Ñ—É–Ω–∫—Ü–∏—é –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ
- –ù–ï –≤–∏–¥—è—Ç –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ replica_merger + txt_export
- –°–æ–∑–¥–∞—é—Ç –ª–æ–∂–Ω–æ–µ —á—É–≤—Å—Ç–≤–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

**–ü–†–ê–í–ò–õ–¨–ù–´–ô –ü–û–î–•–û–î:**
- –ó–∞–ø—É—Å–∫–∞—Ç—å –ü–û–õ–ù–´–ô pipeline –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –ü—Ä–æ–≤–µ—Ä—è—Ç—å JSON + TXT + LOG (Result Validation Checklist)
- –ï—Å–ª–∏ –Ω–∞–π–¥–µ–Ω –±–∞–≥ ‚Üí RCA (5 Whys) ‚Üí FIX ‚Üí –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–Ω–æ–≤–∞
- Golden dataset –¥–ª—è —Ä–µ–≥—Ä–µ—Å—Å-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

---

# Version: v16.25
# Last updated: 2026-02-13

## üîÑ v16.25: –û–¢–ö–ê–¢ txt_export.py + –ø—Ä–æ—Å—Ç–æ–π FIX –¥—É–±–ª–µ–π
**–î–∞—Ç–∞:** 2026-02-13  
**ROOT CAUSE:** –í—Å–µ "—Ñ–∏–∫—Å—ã" v16.22-v16.24 —Å–æ–∑–¥–∞–ª–∏ –ù–û–í–´–ï –±–∞–≥–∏ –≤–º–µ—Å—Ç–æ —Ä–µ—à–µ–Ω–∏—è!  
**–†–ï–®–ï–ù–ò–ï:** –û—Ç–∫–∞—Ç –∫ v16.3 + –ø—Ä–æ—Å—Ç–æ–µ —É—Å–ª–æ–≤–∏–µ `i > 0`

### –ü—Ä–æ–±–ª–µ–º—ã v16.22-v16.24 (–ù–ê–®–ò "—Ñ–∏–∫—Å—ã"):

**–ë–ê–ì #1: –î–≤–æ–π–Ω–æ–π timestamp `00:00:56 00:00:56`**
- v16.24: –î–æ–±–∞–≤–∏–ª–∏ `is_too_close_to_start < 2.0`
- –ù–ï –†–ê–ë–û–¢–ê–ï–¢: –ø–µ—Ä–≤–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –º–æ–∂–µ—Ç –±—ã—Ç—å >25 —Å–µ–∫!
- –î—É–±–ª—å –≤—Å—ë —Ä–∞–≤–Ω–æ –≤—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è

**–ë–ê–ì #2: –†–∞–∑–±–∏–µ–Ω–∏–µ –Ω–∞ –Ω–æ–≤—ã–µ —Å—Ç—Ä–æ–∫–∏**
```
¬´–¢–∞–π—Ñ—É–Ω¬ª, –Ω–∞—á–∞–ª–∏ –Ω–∞—Å—Ç—É–ø–ª–µ–Ω–∏–µ –Ω–∞ —Å—Ç–æ–ª–∏—Ü—É.
00:01:22 –ù–µ–≤—Å–∫–∏–π –ø—è—Ç–∞—á–æ–∫ –ø—Ä–∏–æ–±—Ä–µ–ª...
```
- v16.23: –î–æ–±–∞–≤–∏–ª–∏ `\n` –ø–µ—Ä–µ–¥ inner timestamp
- –ü–†–û–ë–õ–ï–ú–ê: –û–¥–Ω–∞ —Ä–µ–ø–ª–∏–∫–∞ —Ä–∞–∑–±–∏–≤–∞–µ—Ç—Å—è –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å—Ç—Ä–æ–∫!

**–ë–ê–ì #3: –î–≤–∞ timestamp –ø–æ–¥—Ä—è–¥ `00:01:22 ... 00:01:29`**
- –ü—Ä–∏—á–∏–Ω–∞: –ø—Ä–æ–ø–æ—Ä—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –ø–æ —Å–∏–º–≤–æ–ª–∞–º
- –ö–æ—Ä–æ—Ç–∫–∏–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –ø–æ–ª—É—á–∞—é—Ç –º–∞–ª–æ –≤—Ä–µ–º–µ–Ω–∏
- –£—Å–ª–æ–≤–∏–µ `time_since_last >= 25` —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –¥–≤–∞–∂–¥—ã

### –†–ï–®–ï–ù–ò–ï v16.25 (–ü–†–û–°–¢–û–ï!):

**scripts/export/txt_export.py:**
- –û—Ç–∫–∞—Ç–∏–ª–∏—Å—å –∫ v16.3 (–ë–ï–ó `\n`, –ë–ï–ó `is_too_close_to_start`)
- –î–æ–±–∞–≤–∏–ª–∏ –û–î–ù–û —É—Å–ª–æ–≤–∏–µ –≤ `should_insert`:
  ```python
  should_insert = (
      i > 0 and  # üÜï –ù–ï –≤—Å—Ç–∞–≤–ª—è—Ç—å timestamp –¥–ª—è –ø–µ—Ä–≤–æ–≥–æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è!
      time_since_last >= 25 and
      (time_to_end >= 30 or not next_segment_exists)
  )
  ```

**–ü–æ—á–µ–º—É —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- **–ë–ê–ì #1 (–¥—É–±–ª–∏):** `i > 0` –∑–∞–ø—Ä–µ—â–∞–µ—Ç inner timestamp –¥–ª—è –ø–µ—Ä–≤–æ–≥–æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è ‚Üí –¥—É–±–ª—è –ù–ï–¢!
- **–ë–ê–ì #2 (–Ω–æ–≤—ã–µ —Å—Ç—Ä–æ–∫–∏):** –£–±—Ä–∞–ª–∏ `\n` ‚Üí –≤—Å—ë –≤ –æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–µ!
- **–ë–ê–ì #3 (–¥–≤–∞ –ø–æ–¥—Ä—è–¥):** –£—Å–ª–æ–≤–∏–µ `time_since_last >= 25` —Ä–∞–±–æ—Ç–∞–µ—Ç –æ—Ç `last_timestamp_at`, –∫–æ—Ç–æ—Ä—ã–π –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è ‚Üí –≤—Ç–æ—Ä–æ–π timestamp –ù–ï –≤—Å—Ç–∞–≤–∏—Ç—Å—è —Å—Ä–∞–∑—É

### 5 Whys Root Cause Analysis:

1. **–ü–æ—á–µ–º—É –Ω–∞—à–∏ "—Ñ–∏–∫—Å—ã" –Ω–µ —Ä–∞–±–æ—Ç–∞–ª–∏?**
   ‚Üí Unit tests –ø—Ä–æ—à–ª–∏, –Ω–æ real test –ª–æ–º–∞–ª—Å—è

2. **–ü–æ—á–µ–º—É unit tests –ø—Ä–æ—à–ª–∏?**
   ‚Üí –ò—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ, –Ω–µ —Ä–µ–∞–ª—å–Ω—ã–π —Ç–µ–∫—Å—Ç

3. **–ü–æ—á–µ–º—É –Ω–µ –ø–æ–π–º–∞–ª–∏ –±–∞–≥–∏?**
   ‚Üí –¢–µ—Å—Ç—ã –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–ª–∏ —Ä–µ–∞–ª—å–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

4. **–ü–æ—á–µ–º—É –¥–æ–±–∞–≤–∏–ª–∏ —Å–ª–æ–∂–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏?**
   ‚Üí –ù–µ –ø–æ–Ω—è–ª–∏ –Ω–∞—Å—Ç–æ—è—â–∏–π ROOT CAUSE

5. **–ü–æ—á–µ–º—É –Ω–µ –æ—Ç–∫–∞—Ç–∏–ª–∏—Å—å —Å—Ä–∞–∑—É?**
   ‚Üí –î–æ–≤–µ—Ä–∏–ª–∏—Å—å GREEN tests

**ROOT CAUSE:** Unit tests –¥–∞—é—Ç –ª–æ–∂–Ω–æ–µ —á—É–≤—Å—Ç–≤–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –ë–ï–ó —Ä–µ–∞–ª—å–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤!

**–£—Ä–æ–∫:**
–í–°–ï–ì–î–ê –∑–∞–ø—É—Å–∫–∞—Ç—å –†–ï–ê–õ–¨–ù–´–ô —Ç–µ—Å—Ç –ø–æ—Å–ª–µ unit tests!

---

[... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ v16.24, v16.23, v16.22, v16.21 –∏ —Ç.–¥. –æ—Å—Ç–∞—é—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π ...]
