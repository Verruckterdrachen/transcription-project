# Version: v16.22
# Last updated: 2026-02-13

## üîß v16.22: FIX –ë–ê–ì #1, #2 - Timestamp –¥—É–±–ª–∏ + –Ω–∞–∑–∞–¥
**–î–∞—Ç–∞:** 2026-02-13  
**ROOT CAUSE #1:** `insert_intermediate_timestamps()` –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–ª –¥—É–±–ª–∏  
**ROOT CAUSE #2:** `correct_timestamp_drift()` –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–ª –º–æ–Ω–æ—Ç–æ–Ω–Ω–æ—Å—Ç—å  
**FIX:** –û–±–Ω–æ–≤–ª–µ–Ω—ã —Ñ—É–Ω–∫—Ü–∏–∏ + unit tests

### –ò–∑–º–µ–Ω–µ–Ω–∏—è:
- ‚úÖ **scripts/corrections/timestamp_fixer.py:**
  - `insert_intermediate_timestamps()` —Ç–µ–ø–µ—Ä—å –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –¥—É–±–ª–∏ –ø–µ—Ä–µ–¥ –≤—Å—Ç–∞–≤–∫–æ–π
  - `correct_timestamp_drift()` –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –º–æ–Ω–æ—Ç–æ–Ω–Ω–æ—Å—Ç—å (—Ç–æ–ª—å–∫–æ –≤–ø–µ—Ä—ë–¥)

- ‚úÖ **scripts/corrections/boundary_fixer.py:**
  - `split_segment_for_journalist()` —Ç–µ–ø–µ—Ä—å –æ–±–Ω–æ–≤–ª—è–µ—Ç speaker —Å–º–µ–∂–Ω—ã—Ö —Å–µ–≥–º–µ–Ω—Ç–æ–≤
  - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞ —Å–º–µ–∂–Ω—ã—Ö —Ä–µ–ø–ª–∏–∫ –æ–¥–Ω–æ–≥–æ —Å–ø–∏–∫–µ—Ä–∞

- ‚úÖ **tests/test_timestamp_fixer.py:** (–æ–±–Ω–æ–≤–ª—ë–Ω)
  - –î–æ–±–∞–≤–ª–µ–Ω `test_insert_intermediate_no_duplicates()` ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –¥—É–±–ª–∏
  - –î–æ–±–∞–≤–ª–µ–Ω `test_drift_correction_monotonic()` ‚Äî –º–æ–Ω–æ—Ç–æ–Ω–Ω–æ—Å—Ç—å timestamp

- ‚úÖ **tests/test_boundary_fixer.py:** (–æ–±–Ω–æ–≤–ª—ë–Ω)
  - –î–æ–±–∞–≤–ª–µ–Ω `test_split_updates_adjacent_speakers()` ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–º–µ–∂–Ω—ã—Ö
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ speaker –ø–æ—Å–ª–µ split

### 5 Whys Root Cause Analysis:
**–ë–ê–ì #1:**
1. –ü–æ—á–µ–º—É –¥—É–±–ª—å timestamp? ‚Üí –í—Å—Ç–∞–≤–∫–∞ inner timestamp —Å–ª–∏—à–∫–æ–º –±–ª–∏–∑–∫–æ –∫ start_sec
2. –ü–æ—á–µ–º—É —Å–ª–∏—à–∫–æ–º –±–ª–∏–∑–∫–æ? ‚Üí –ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è
3. –ü–æ—á–µ–º—É –Ω–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏? ‚Üí insert_intermediate_timestamps() –Ω–µ —É—á–∏—Ç—ã–≤–∞–ª–∞ start_sec
4. –ü–æ—á–µ–º—É –Ω–µ —É—á–∏—Ç—ã–≤–∞–ª–∞? ‚Üí –ö–æ–¥ –ø—Ä–æ–≤–µ—Ä—è–ª —Ç–æ–ª—å–∫–æ prev_timestamp
5. **ROOT CAUSE:** –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ `is_too_close_to_start`

**–ë–ê–ì #2:**
1. –ü–æ—á–µ–º—É timestamp –Ω–∞–∑–∞–¥? ‚Üí correct_timestamp_drift() —Å–¥–≤–∏–≥–∞–ª timestamp –≤–ª–µ–≤–æ
2. –ü–æ—á–µ–º—É –≤–ª–µ–≤–æ? ‚Üí –ê–ª–≥–æ—Ä–∏—Ç–º –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞–ª "–Ω–∞ –±–ª–∏–∂–∞–π—à–∏–π –≤–∞–ª–∏–¥–Ω—ã–π"
3. –ü–æ—á–µ–º—É –±–ª–∏–∂–∞–π—à–∏–π –º–æ–≥ –±—ã—Ç—å –Ω–∞–∑–∞–¥? ‚Üí –ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –º–æ–Ω–æ—Ç–æ–Ω–Ω–æ—Å—Ç–∏
4. –ü–æ—á–µ–º—É –Ω–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏? ‚Üí –ö–æ–¥ –Ω–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–ª forward-only –¥–≤–∏–∂–µ–Ω–∏–µ
5. **ROOT CAUSE:** –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ `corrected >= prev_timestamp` –ø—Ä–æ–≤–µ—Ä–∫–∏

---

## v16.21: FIX ending hallucination position check
**–î–∞—Ç–∞:** 2026-02-12  
**ROOT CAUSE:** –ü—Ä–æ–≤–µ—Ä–∫–∞ continuation phrase –ù–ï —É—á–∏—Ç—ã–≤–∞–ª–∞ –ø–æ–∑–∏—Ü–∏—é —Ñ—Ä–∞–∑—ã  
**FIX:** –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞: –µ—Å–ª–∏ —Ñ—Ä–∞–∑–∞ –±–ª–∏–∂–µ –∫ –Ω–∞—á–∞–ª—É (‚â§30%) ‚Üí –Ω–µ —Å—á–∏—Ç–∞–µ–º "–∫–æ–Ω—Ü–æ–º"

### –ò–∑–º–µ–Ω–µ–Ω–∏—è:
- ‚úÖ `remove_ending_hallucinations()` —Ç–µ–ø–µ—Ä—å –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–æ–∑–∏—Ü–∏—é —Ñ—Ä–∞–∑—ã
- ‚úÖ Threshold: –µ—Å–ª–∏ continuation phrase –≤ –ø–µ—Ä–≤—ã—Ö 30% —Ç–µ–∫—Å—Ç–∞ ‚Üí —ç—Ç–æ –ù–ê–ß–ê–õ–û, –Ω–µ –∫–æ–Ω–µ—Ü!
- ‚úÖ Debug output –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–æ–∑–∏—Ü–∏—é –∏ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –¥–æ –∫–æ–Ω—Ü–∞

### –ü—Ä–∏–º–µ—Ä:
**–ë–´–õ–û:** "–ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ —Å–ª–µ–¥—É–µ—Ç –æ–ø–µ—Ä–∞—Ü–∏—è –ò—Å–∫—Ä–∞..." ‚Üí —É–¥–∞–ª—è–ª–æ—Å—å "–ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ —Å–ª–µ–¥—É–µ—Ç"  
**–°–¢–ê–õ–û:** "–ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ —Å–ª–µ–¥—É–µ—Ç –æ–ø–µ—Ä–∞—Ü–∏—è –ò—Å–∫—Ä–∞..." ‚Üí –ù–ï —É–¥–∞–ª—è–µ—Ç—Å—è (—ç—Ç–æ –Ω–∞—á–∞–ª–æ!)

---

# Version: v16.23
# Last updated: 2026-02-13

## üÜï v16.23: FIX –ë–ê–ì #3 - Hallucination loops –≤ gap-filled —Å–µ–≥–º–µ–Ω—Ç–∞—Ö
**–î–∞—Ç–∞:** 2026-02-13  
**ROOT CAUSE:** Whisper —Å–æ–∑–¥–∞–≤–∞–ª repeating loops –ø—Ä–∏ force-transcribe gaps  
**FIX:** –ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è `clean_loops()` —Å adaptive threshold + 6 unit tests

### –ò–∑–º–µ–Ω–µ–Ω–∏—è:
- ‚úÖ **scripts/corrections/hallucinations.py:**
  - –ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è `clean_loops()` –¥–ª—è –¥–µ—Ç–µ–∫—Ü–∏–∏ repeating patterns
  - N-gram –∞–Ω–∞–ª–∏–∑ —Å —Ä–∞–∑–º–µ—Ä–æ–º –æ–∫–Ω–∞ –æ—Ç 2 –¥–æ 8 —Å–ª–æ–≤
  - Adaptive threshold: –∫–æ—Ä–æ—Ç–∫–∏–µ —Ñ—Ä–∞–∑—ã (<5 —Å–ª–æ–≤) ‚Üí 85%, –¥–ª–∏–Ω–Ω—ã–µ ‚Üí 75%
  - –û—Å–æ–±–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ gap-filled —Å–µ–≥–º–µ–Ω—Ç–æ–≤ (threshold +10%)
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è –º–µ–∂–¥—É n-–≥—Ä–∞–º–º–∞–º–∏ (–∏–∑–±–µ–≥–∞–µ—Ç false positives)
  - –û–±–Ω–æ–≤–ª—ë–Ω `clean_hallucinations_from_text()` ‚Äî –≤—ã–∑—ã–≤–∞–µ—Ç `clean_loops()` –ø–µ—Ä–≤—ã–º
  - –û–±–Ω–æ–≤–ª—ë–Ω `filter_hallucination_segments()` ‚Äî –ø–µ—Ä–µ–¥–∞—ë—Ç `is_gap_filled` —Ñ–ª–∞–≥

- ‚úÖ **tests/test_hallucinations.py:** (–ù–û–í–´–ô –§–ê–ô–õ!)
  - `test_clean_loops_exact_repeat()` ‚Äî —Ç–æ—á–Ω—ã–µ –ø–æ–≤—Ç–æ—Ä—ã
  - `test_clean_loops_with_variations()` ‚Äî –ë–ê–ì #3 (—Ä–µ–∞–ª—å–Ω—ã–π –∫–µ–π—Å!)
  - `test_clean_loops_short_phrases()` ‚Äî —Å—Ç—Ä–æ–≥–∏–π threshold –¥–ª—è –∫–æ—Ä–æ—Ç–∫–∏—Ö —Ñ—Ä–∞–∑
  - `test_clean_loops_no_false_positives()` ‚Äî –Ω–µ —É–¥–∞–ª—è—Ç—å –Ω–æ—Ä–º–∞–ª—å–Ω—ã–π —Ç–µ–∫—Å—Ç
  - `test_clean_loops_gap_filled_stricter()` ‚Äî gap-filled –±–æ–ª–µ–µ —Å—Ç—Ä–æ–≥–∏–π
  - `test_integration_full_pipeline()` ‚Äî –ø–æ–ª–Ω—ã–π pipeline –æ—á–∏—Å—Ç–∫–∏
  - **6/6 —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ–π–¥–µ–Ω–æ ‚úÖ**

### 5 Whys Root Cause Analysis:
1. –ü–æ—á–µ–º—É –¥—É–±–ª—å —Ç–µ–∫—Å—Ç–∞? ‚Üí Repeating patterns —Å –≤–∞—Ä–∏–∞—Ü–∏—è–º–∏
2. –ü–æ—á–µ–º—É repeating? ‚Üí Gap-filled —Å–µ–≥–º–µ–Ω—Ç —Å Whisper hallucination loop
3. –ü–æ—á–µ–º—É Whisper —Å–æ–∑–¥–∞–ª loop? ‚Üí Force-transcribe –∏–Ω–æ–≥–¥–∞ —Å–æ–∑–¥–∞—ë—Ç –ø–µ—Ç–ª–∏
4. –ü–æ—á–µ–º—É –Ω–µ –ø–æ–π–º–∞–ª–∏? ‚Üí –í–∞—Ä–∏–∞—Ü–∏–∏ –∏–º–µ—é—Ç similarity < 75%
5. **ROOT CAUSE:** –û–¥–∏–Ω–∞–∫–æ–≤—ã–π threshold (75%) –¥–ª—è –≤—Å–µ—Ö —Ñ—Ä–∞–∑, –∫–æ—Ä–æ—Ç–∫–∏–µ –Ω—É–∂–Ω–æ —Å—Ç—Ä–æ–∂–µ!

### –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:
**–ë–´–õ–û:**
—É—á–∏—Ç—ã–≤–∞—Ç—å –±—ã–ª–∞ –Ω–µ–º–µ—Ü–∫–∞—è –∞—Ä—Ç–∏–ª–ª–µ—Ä–∏—è –≤–ø—Ä–∞–≤—å –¥–æ –µ—â–µ —Ñ–∞–∫—Ç–æ—Ä–æ–º
–∫–æ—Ç–æ—Ä—ã–µ –Ω–∞–¥–æ —É—á–∏—Ç—ã–≤–∞—Ç—å —ç—Ç–æ –±—ã–ª–æ –Ω–µ–º–µ—Ü–∫–∞—è –≤–ø–ª–æ—Ç—å –¥–æ. –∫–æ—Ç–æ—Ä—ã–π
–Ω–∞–¥–æ —É—á–∏—Ç—ã–≤–∞—Ç—å, —ç—Ç–æ –±—ã–ª–∞ –Ω–µ–º–µ—Ü–∫–∞—è –∞—Ä—Ç–∏–ª–ª–µ—Ä–∏—è, –≤–ø–ª–æ—Ç—å –¥–æ

text

**–°–¢–ê–õ–û:**
—É—á–∏—Ç—ã–≤–∞—Ç—å –±—ã–ª–∞ –Ω–µ–º–µ—Ü–∫–∞—è –∞—Ä—Ç–∏–ª–ª–µ—Ä–∏—è –≤–ø–ª–æ—Ç—å –¥–æ

text

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏:
- Min n-gram size: 2 —Å–ª–æ–≤–∞
- Max n-gram size: 8 —Å–ª–æ–≤
- Min distance –º–µ–∂–¥—É n-–≥—Ä–∞–º–º–∞–º–∏: `max(ngram_size // 2, 2)`
- Base threshold: 75% (–¥–ª–∏–Ω–Ω—ã–µ), 85% (–∫–æ—Ä–æ—Ç–∫–∏–µ)
- Gap-filled bonus: +10% –∫ threshold

---

## üîß v16.22: FIX –ë–ê–ì #1, #2 - Timestamp –¥—É–±–ª–∏ + —Å–º–µ–∂–Ω—ã–µ —Ä–µ–ø–ª–∏–∫–∏
**–î–∞—Ç–∞:** 2026-02-13  
**ROOT CAUSE #1:** `insert_intermediate_timestamps()` –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–ª –¥—É–±–ª–∏  
**ROOT CAUSE #2:** `split_segment_for_journalist()` –Ω–µ –æ–±–Ω–æ–≤–ª—è–ª speaker —Å–æ—Å–µ–¥–Ω–∏—Ö —Å–µ–≥–º–µ–Ω—Ç–æ–≤  
**FIX:** –û–±–Ω–æ–≤–ª–µ–Ω—ã —Ñ—É–Ω–∫—Ü–∏–∏ + unit tests

### –ò–∑–º–µ–Ω–µ–Ω–∏—è:
- ‚úÖ **scripts/corrections/timestamp_fixer.py:**
  - `insert_intermediate_timestamps()` —Ç–µ–ø–µ—Ä—å –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –¥—É–±–ª–∏ –ø–µ—Ä–µ–¥ –≤—Å—Ç–∞–≤–∫–æ–π
  - `correct_timestamp_drift()` –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –º–æ–Ω–æ—Ç–æ–Ω–Ω–æ—Å—Ç—å (—Ç–æ–ª—å–∫–æ –≤–ø–µ—Ä—ë–¥)

- ‚úÖ **scripts/corrections/boundary_fixer.py:**
  - `split_segment_for_journalist()` —Ç–µ–ø–µ—Ä—å –æ–±–Ω–æ–≤–ª—è–µ—Ç speaker —Å–º–µ–∂–Ω—ã—Ö —Å–µ–≥–º–µ–Ω—Ç–æ–≤
  - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞ —Å–º–µ–∂–Ω—ã—Ö —Ä–µ–ø–ª–∏–∫ –æ–¥–Ω–æ–≥–æ —Å–ø–∏–∫–µ—Ä–∞

- ‚úÖ **tests/test_timestamp_fixer.py:** (–æ–±–Ω–æ–≤–ª—ë–Ω)
  - –î–æ–±–∞–≤–ª–µ–Ω `test_insert_intermediate_no_duplicates()` ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –¥—É–±–ª–∏
  - –î–æ–±–∞–≤–ª–µ–Ω `test_drift_correction_monotonic()` ‚Äî –º–æ–Ω–æ—Ç–æ–Ω–Ω–æ—Å—Ç—å timestamp

- ‚úÖ **tests/test_boundary_fixer.py:** (–æ–±–Ω–æ–≤–ª—ë–Ω)
  - –î–æ–±–∞–≤–ª–µ–Ω `test_split_updates_adjacent_speakers()` ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–º–µ–∂–Ω—ã—Ö
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ speaker –ø–æ—Å–ª–µ split

---

## v16.21: FIX ending hallucination position check
**–î–∞—Ç–∞:** 2026-02-12  
**ROOT CAUSE:** –ü—Ä–æ–≤–µ—Ä–∫–∞ continuation phrase –ù–ï —É—á–∏—Ç—ã–≤–∞–ª–∞ –ø–æ–∑–∏—Ü–∏—é —Ñ—Ä–∞–∑—ã  
**FIX:** –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞: –µ—Å–ª–∏ —Ñ—Ä–∞–∑–∞ –±–ª–∏–∂–µ –∫ –Ω–∞—á–∞–ª—É (‚â§30%) ‚Üí –Ω–µ —Å—á–∏—Ç–∞–µ–º "–∫–æ–Ω—Ü–æ–º"

### –ò–∑–º–µ–Ω–µ–Ω–∏—è:
- ‚úÖ `remove_ending_hallucinations()` —Ç–µ–ø–µ—Ä—å –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–æ–∑–∏—Ü–∏—é —Ñ—Ä–∞–∑—ã
- ‚úÖ Threshold: –µ—Å–ª–∏ continuation phrase –≤ –ø–µ—Ä–≤—ã—Ö 30% —Ç–µ–∫—Å—Ç–∞ ‚Üí —ç—Ç–æ –ù–ê–ß–ê–õ–û, –Ω–µ –∫–æ–Ω–µ—Ü!
- ‚úÖ Debug output –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–æ–∑–∏—Ü–∏—é –∏ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –¥–æ –∫–æ–Ω—Ü–∞

### –ü—Ä–∏–º–µ—Ä:
**–ë–´–õ–û:** "–ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ —Å–ª–µ–¥—É–µ—Ç –æ–ø–µ—Ä–∞—Ü–∏—è –ò—Å–∫—Ä–∞..." ‚Üí —É–¥–∞–ª—è–ª–æ—Å—å "–ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ —Å–ª–µ–¥—É–µ—Ç"  
**–°–¢–ê–õ–û:** "–ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ —Å–ª–µ–¥—É–µ—Ç –æ–ø–µ—Ä–∞—Ü–∏—è –ò—Å–∫—Ä–∞..." ‚Üí –ù–ï —É–¥–∞–ª—è–µ—Ç—Å—è (—ç—Ç–æ –Ω–∞—á–∞–ª–æ!)

---

# Version: v16.23
# Last updated: 2026-02-13

## üÜï v16.23: FIX –ë–ê–ì #3 - Hallucination loops –≤ gap-filled —Å–µ–≥–º–µ–Ω—Ç–∞—Ö
**–î–∞—Ç–∞:** 2026-02-13  
**ROOT CAUSE:** Whisper —Å–æ–∑–¥–∞–≤–∞–ª repeating loops –ø—Ä–∏ force-transcribe gaps  
**FIX:** –ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è `clean_loops()` —Å adaptive threshold + unit tests

### –ò–∑–º–µ–Ω–µ–Ω–∏—è:
- ‚úÖ **scripts/corrections/hallucinations.py:**
  - –ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è `clean_loops()` –¥–ª—è –¥–µ—Ç–µ–∫—Ü–∏–∏ repeating patterns
  - Adaptive threshold: –∫–æ—Ä–æ—Ç–∫–∏–µ —Ñ—Ä–∞–∑—ã (<5 —Å–ª–æ–≤) ‚Üí 85%, –¥–ª–∏–Ω–Ω—ã–µ ‚Üí 75%
  - –û—Å–æ–±–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ gap-filled —Å–µ–≥–º–µ–Ω—Ç–æ–≤ (threshold +10%)
  - –û–±–Ω–æ–≤–ª—ë–Ω `clean_hallucinations_from_text()` ‚Äî –≤—ã–∑—ã–≤–∞–µ—Ç `clean_loops()` –ø–µ—Ä–≤—ã–º
  - –û–±–Ω–æ–≤–ª—ë–Ω `filter_hallucination_segments()` ‚Äî –ø–µ—Ä–µ–¥–∞—ë—Ç `is_gap_filled` —Ñ–ª–∞–≥

- ‚úÖ **tests/test_hallucinations.py:** (–ù–û–í–´–ô –§–ê–ô–õ!)
  - `test_clean_loops_exact_repeat()` ‚Äî —Ç–æ—á–Ω—ã–µ –ø–æ–≤—Ç–æ—Ä—ã
  - `test_clean_loops_with_variations()` ‚Äî –ë–ê–ì #3 (—Ä–µ–∞–ª—å–Ω—ã–π –∫–µ–π—Å!)
  - `test_clean_loops_short_phrases()` ‚Äî —Å—Ç—Ä–æ–≥–∏–π threshold –¥–ª—è –∫–æ—Ä–æ—Ç–∫–∏—Ö —Ñ—Ä–∞–∑
  - `test_clean_loops_no_false_positives()` ‚Äî –Ω–µ —É–¥–∞–ª—è—Ç—å –Ω–æ—Ä–º–∞–ª—å–Ω—ã–π —Ç–µ–∫—Å—Ç
  - `test_clean_loops_gap_filled_stricter()` ‚Äî gap-filled –±–æ–ª–µ–µ —Å—Ç—Ä–æ–≥–∏–π
  - `test_integration_full_pipeline()` ‚Äî –ø–æ–ª–Ω—ã–π pipeline –æ—á–∏—Å—Ç–∫–∏

### 5 Whys Root Cause Analysis:
1. –ü–æ—á–µ–º—É –¥—É–±–ª—å —Ç–µ–∫—Å—Ç–∞? ‚Üí Repeating patterns —Å –≤–∞—Ä–∏–∞—Ü–∏—è–º–∏
2. –ü–æ—á–µ–º—É repeating? ‚Üí Gap-filled —Å–µ–≥–º–µ–Ω—Ç —Å Whisper hallucination loop
3. –ü–æ—á–µ–º—É Whisper —Å–æ–∑–¥–∞–ª loop? ‚Üí Force-transcribe –∏–Ω–æ–≥–¥–∞ —Å–æ–∑–¥–∞—ë—Ç –ø–µ—Ç–ª–∏
4. –ü–æ—á–µ–º—É –Ω–µ –ø–æ–π–º–∞–ª–∏? ‚Üí –í–∞—Ä–∏–∞—Ü–∏–∏ –∏–º–µ—é—Ç similarity < 75%
5. **ROOT CAUSE:** –û–¥–∏–Ω–∞–∫–æ–≤—ã–π threshold (75%) –¥–ª—è –≤—Å–µ—Ö —Ñ—Ä–∞–∑, –∫–æ—Ä–æ—Ç–∫–∏–µ –Ω—É–∂–Ω–æ —Å—Ç—Ä–æ–∂–µ!

### –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:
**–ë–´–õ–û:**
—É—á–∏—Ç—ã–≤–∞—Ç—å –±—ã–ª–∞ –Ω–µ–º–µ—Ü–∫–∞—è –∞—Ä—Ç–∏–ª–ª–µ—Ä–∏—è –≤–ø—Ä–∞–≤—å –¥–æ –µ—â–µ —Ñ–∞–∫—Ç–æ—Ä–æ–º
–∫–æ—Ç–æ—Ä—ã–µ –Ω–∞–¥–æ —É—á–∏—Ç—ã–≤–∞—Ç—å —ç—Ç–æ –±—ã–ª–æ –Ω–µ–º–µ—Ü–∫–∞—è –≤–ø–ª–æ—Ç—å –¥–æ. –∫–æ—Ç–æ—Ä—ã–π
–Ω–∞–¥–æ —É—á–∏—Ç—ã–≤–∞—Ç—å, —ç—Ç–æ –±—ã–ª–∞ –Ω–µ–º–µ—Ü–∫–∞—è –∞—Ä—Ç–∏–ª–ª–µ—Ä–∏—è, –≤–ø–ª–æ—Ç—å –¥–æ

text

**–°–¢–ê–õ–û:**
—É—á–∏—Ç—ã–≤–∞—Ç—å –±—ã–ª–∞ –Ω–µ–º–µ—Ü–∫–∞—è –∞—Ä—Ç–∏–ª–ª–µ—Ä–∏—è –≤–ø–ª–æ—Ç—å –¥–æ

text

---

## üîß v16.22: FIX –ë–ê–ì #1, #2 - Timestamp –¥—É–±–ª–∏ + —Å–º–µ–∂–Ω—ã–µ —Ä–µ–ø–ª–∏–∫–∏
**–î–∞—Ç–∞:** 2026-02-13  
**ROOT CAUSE #1:** `insert_intermediate_timestamps()` –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–ª –¥—É–±–ª–∏  
**ROOT CAUSE #2:** `split_segment_for_journalist()` –Ω–µ –æ–±–Ω–æ–≤–ª—è–ª speaker —Å–æ—Å–µ–¥–Ω–∏—Ö —Å–µ–≥–º–µ–Ω—Ç–æ–≤  
**FIX:** –û–±–Ω–æ–≤–ª–µ–Ω—ã —Ñ—É–Ω–∫—Ü–∏–∏ + unit tests

### –ò–∑–º–µ–Ω–µ–Ω–∏—è:
- ‚úÖ **scripts/corrections/timestamp_fixer.py:**
  - `insert_intermediate_timestamps()` —Ç–µ–ø–µ—Ä—å –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –¥—É–±–ª–∏ –ø–µ—Ä–µ–¥ –≤—Å—Ç–∞–≤–∫–æ–π
  - `correct_timestamp_drift()` –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –º–æ–Ω–æ—Ç–æ–Ω–Ω–æ—Å—Ç—å (—Ç–æ–ª—å–∫–æ –≤–ø–µ—Ä—ë–¥)

- ‚úÖ **scripts/corrections/boundary_fixer.py:**
  - `split_segment_for_journalist()` —Ç–µ–ø–µ—Ä—å –æ–±–Ω–æ–≤–ª—è–µ—Ç speaker —Å–º–µ–∂–Ω—ã—Ö —Å–µ–≥–º–µ–Ω—Ç–æ–≤
  - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞ —Å–º–µ–∂–Ω—ã—Ö —Ä–µ–ø–ª–∏–∫ –æ–¥–Ω–æ–≥–æ —Å–ø–∏–∫–µ—Ä–∞

- ‚úÖ **tests/test_timestamp_fixer.py:** (–æ–±–Ω–æ–≤–ª—ë–Ω)
  - –î–æ–±–∞–≤–ª–µ–Ω `test_insert_intermediate_no_duplicates()` ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –¥—É–±–ª–∏
  - –î–æ–±–∞–≤–ª–µ–Ω `test_drift_correction_monotonic()` ‚Äî –º–æ–Ω–æ—Ç–æ–Ω–Ω–æ—Å—Ç—å timestamp

- ‚úÖ **tests/test_boundary_fixer.py:** (–æ–±–Ω–æ–≤–ª—ë–Ω)
  - –î–æ–±–∞–≤–ª–µ–Ω `test_split_updates_adjacent_speakers()` ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–º–µ–∂–Ω—ã—Ö
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ speaker –ø–æ—Å–ª–µ split

---

## v16.21: FIX ending hallucination position check
**–î–∞—Ç–∞:** 2026-02-12  
**ROOT CAUSE:** –ü—Ä–æ–≤–µ—Ä–∫–∞ continuation phrase –ù–ï —É—á–∏—Ç—ã–≤–∞–ª–∞ –ø–æ–∑–∏—Ü–∏—é —Ñ—Ä–∞–∑—ã  
**FIX:** –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞: –µ—Å–ª–∏ —Ñ—Ä–∞–∑–∞ –±–ª–∏–∂–µ –∫ –Ω–∞—á–∞–ª—É (‚â§30%) ‚Üí –Ω–µ —Å—á–∏—Ç–∞–µ–º "–∫–æ–Ω—Ü–æ–º"

### –ò–∑–º–µ–Ω–µ–Ω–∏—è:
- ‚úÖ `remove_ending_hallucinations()` —Ç–µ–ø–µ—Ä—å –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–æ–∑–∏—Ü–∏—é —Ñ—Ä–∞–∑—ã
- ‚úÖ Threshold: –µ—Å–ª–∏ continuation phrase –≤ –ø–µ—Ä–≤—ã—Ö 30% —Ç–µ–∫—Å—Ç–∞ ‚Üí —ç—Ç–æ –ù–ê–ß–ê–õ–û, –Ω–µ –∫–æ–Ω–µ—Ü!
- ‚úÖ Debug output –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–æ–∑–∏—Ü–∏—é –∏ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –¥–æ –∫–æ–Ω—Ü–∞

### –ü—Ä–∏–º–µ—Ä:
**–ë–´–õ–û:** "–ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ —Å–ª–µ–¥—É–µ—Ç –æ–ø–µ—Ä–∞—Ü–∏—è –ò—Å–∫—Ä–∞..." ‚Üí —É–¥–∞–ª—è–ª–æ—Å—å "–ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ —Å–ª–µ–¥—É–µ—Ç"  
**–°–¢–ê–õ–û:** "–ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ —Å–ª–µ–¥—É–µ—Ç –æ–ø–µ—Ä–∞—Ü–∏—è –ò—Å–∫—Ä–∞..." ‚Üí –ù–ï —É–¥–∞–ª—è–µ—Ç—Å—è (—ç—Ç–æ –Ω–∞—á–∞–ª–æ!)

---

[... previous versions ...]

## v16.24.1 (2026-02-13)
**üîß FIX #2: Adjacent same speaker - neutral —Ñ—Ä–∞–∑—ã –ø–æ—Å–ª–µ split**

### ROOT CAUSE (5 Whys):

**–°–∏–º–ø—Ç–æ–º:**
–û–∂–∏–¥–∞–ª–æ—Å—å: –ò—Å–∞–µ–≤ ‚Üí –ñ—É—Ä–Ω–∞–ª–∏—Å—Ç ‚Üí –ò—Å–∞–µ–≤ (3 —Å–µ–≥–º–µ–Ω—Ç–∞)
–ü–æ–ª—É—á–µ–Ω–æ: –ò—Å–∞–µ–≤ ‚Üí –ñ—É—Ä–Ω–∞–ª–∏—Å—Ç (2 —Å–µ–≥–º–µ–Ω—Ç–∞)

text

**5 Whys:**
1. –ü–æ—á–µ–º—É —Ç—Ä–µ—Ç—å–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –Ω–µ —Å–æ–∑–¥–∞—ë—Ç —Å–µ–≥–º–µ–Ω—Ç –ò—Å–∞–µ–≤?  
   ‚Üí –ü–æ–ø–∞–¥–∞–µ—Ç –≤ –≥—Ä—É–ø–ø—É –ñ—É—Ä–Ω–∞–ª–∏—Å—Ç–∞

2. –ü–æ—á–µ–º—É –ø–æ–ø–∞–¥–∞–µ—Ç –≤ –≥—Ä—É–ø–ø—É –ñ—É—Ä–Ω–∞–ª–∏—Å—Ç–∞?  
   ‚Üí –ù–∞—Å–ª–µ–¥—É–µ—Ç `current_speaker="–ñ—É—Ä–Ω–∞–ª–∏—Å—Ç"`

3. –ü–æ—á–µ–º—É –Ω–∞—Å–ª–µ–¥—É–µ—Ç –ñ—É—Ä–Ω–∞–ª–∏—Å—Ç–∞?  
   ‚Üí –¢–µ–∫—Å—Ç neutral, –ª–æ–≥–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `current_speaker`

4. –ü–æ—á–µ–º—É –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `current_speaker` –∞ –Ω–µ original?  
   ‚Üí –ù–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π `original_speaker`

5. **ROOT CAUSE:** –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∑–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –∏—Å—Ö–æ–¥–Ω–æ–≥–æ —Å–ø–∏–∫–µ—Ä–∞ —Å–µ–≥–º–µ–Ω—Ç–∞

### –†–ï–®–ï–ù–ò–ï:

**scripts/corrections/boundary_fixer.py:**
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `original_speaker = speaker` (—Å—Ç—Ä–æ–∫–∞ 248)
- Neutral —Ñ—Ä–∞–∑—ã —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É—é—Ç `original_speaker` –≤–º–µ—Å—Ç–æ `current_speaker`
- Reason: `"neutral (return to original)"`

**–õ–æ–≥–∏–∫–∞:**
–°–µ–≥–º–µ–Ω—Ç: speaker="–ò—Å–∞–µ–≤"

"–ü–µ—Ä–≤–æ–µ" ‚Üí neutral ‚Üí original_speaker="–ò—Å–∞–µ–≤" ‚úÖ

"–†–∞—Å—Å–∫–∞–∂–∏—Ç–µ" ‚Üí journalist ‚Üí split to "–ñ—É—Ä–Ω–∞–ª–∏—Å—Ç" ‚úÖ

"–¢—Ä–µ—Ç—å–µ" ‚Üí neutral ‚Üí original_speaker="–ò—Å–∞–µ–≤" ‚úÖ (FIX!)

text

### Testing:
```bash
python -m pytest tests/test_boundary_fixer.py::test_raw_speaker_id_mapping -v
‚úÖ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: PASSED (3 —Å–µ–≥–º–µ–Ω—Ç–∞)
v16.24 (2026-02-13)
üîß FIX #1: –î—É–±–ª—å timestamp –≤ –Ω–∞—á–∞–ª–µ —Å–µ–≥–º–µ–Ω—Ç–∞

## v16.24 (2026-02-13)
**üîß FIX #1: –î—É–±–ª—å timestamp –≤ –Ω–∞—á–∞–ª–µ —Å–µ–≥–º–µ–Ω—Ç–∞**

### ROOT CAUSE (5 Whys):

**–°–∏–º–ø—Ç–æ–º:** 
00:00:56 00:00:56 –¢–æ –µ—Å—Ç—å —ç—Ç–æ –±—ã–ª–æ...

text

**5 Whys:**
1. –ü–æ—á–µ–º—É –¥–≤–∞ –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö timestamp?  
   ‚Üí Inner timestamp –≤—Å—Ç–∞–≤–ª–µ–Ω –≤ –Ω–∞—á–∞–ª–æ —Ç–µ–∫—Å—Ç–∞ —Å–µ–≥–º–µ–Ω—Ç–∞

2. –ü–æ—á–µ–º—É –≤—Å—Ç–∞–≤–ª–µ–Ω –≤ –Ω–∞—á–∞–ª–æ?  
   ‚Üí –£—Å–ª–æ–≤–∏–µ `time_since_last >= 25` –≤—ã–ø–æ–ª–Ω–∏–ª–æ—Å—å –¥–ª—è –ø–µ—Ä–≤–æ–≥–æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è

3. –ü–æ—á–µ–º—É –≤—ã–ø–æ–ª–Ω–∏–ª–æ—Å—å –¥–ª—è –ø–µ—Ä–≤–æ–≥–æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è?  
   ‚Üí –ü–µ—Ä–≤–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –¥–ª–∏–Ω–Ω–æ–µ (~30 —Å–µ–∫)

4. –ü–æ—á–µ–º—É —Ç–∞–∫ –±–ª–∏–∑–∫–æ –∫ –Ω–∞—á–∞–ª—É?  
   ‚Üí –ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è –æ—Ç `start_sec`

5. **ROOT CAUSE:** –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ `sent_start - start_sec >= 2.0`

### –†–ï–®–ï–ù–ò–ï:

**scripts/export/txt_export.py:**
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ `is_too_close_to_start = (sent_start - start_sec) < 2.0`
- Inner timestamp –ù–ï –≤—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –µ—Å–ª–∏ < 2 —Å–µ–∫—É–Ω–¥ –æ—Ç –Ω–∞—á–∞–ª–∞ —Å–µ–≥–º–µ–Ω—Ç–∞
- –£—Å–ª–æ–≤–∏–µ `should_insert` —Ç–µ–ø–µ—Ä—å –≤–∫–ª—é—á–∞–µ—Ç `not is_too_close_to_start`

**tests/test_txt_export.py:**
- –ù–æ–≤—ã–π —Ç–µ—Å—Ç: `test_no_duplicate_timestamp_at_segment_start()`
- –°–æ–∑–¥–∞—ë—Ç –æ—á–µ–Ω—å –¥–ª–∏–Ω–Ω–æ–µ –ø–µ—Ä–≤–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ (~35 —Å–µ–∫)
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç: inner timestamp >= 2 —Å–µ–∫ –æ—Ç –Ω–∞—á–∞–ª–∞

### Testing:
```bash
python -m pytest tests/test_txt_export.py::test_no_duplicate_timestamp_at_segment_start -v
‚úÖ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: PASSED
v16.23.2 (2026-02-13)
üß™ FIX: Unit tests –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã - GREEN