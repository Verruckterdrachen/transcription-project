# Version: v16.28
# Last updated: 2026-02-13

## üîß v16.28: FIX clean_loops() - –∑–∞–º–µ–Ω–∞ –Ω–∞ "..." –≤–º–µ—Å—Ç–æ —É–¥–∞–ª–µ–Ω–∏—è
**–î–∞—Ç–∞:** 2026-02-13  
**ROOT CAUSE:** v16.27 clean_loops() —É–¥–∞–ª—è–ª–∞ —Ç–µ–∫—Å—Ç ‚Üí –ø–æ—Ç–µ—Ä—è —Å–º—ã—Å–ª–∞!  
**–†–ï–®–ï–ù–ò–ï:** –ó–∞–º–µ–Ω—è–µ–º loops –Ω–∞ "..." ‚Üí –∫–æ–Ω—Ç–µ–∫—Å—Ç —Å–æ—Ö—Ä–∞–Ω—ë–Ω

### –ü—Ä–æ–±–ª–µ–º–∞ v16.27:

**–°–∏–º–ø—Ç–æ–º:**
–ë–´–õ–û (–æ—Ä–∏–≥–∏–Ω–∞–ª): "–ú—ã —Å–µ–π—á–∞—Å –æ—Ç–≤–µ—á–∞–µ–º –Ω–∞ –≤–æ–ø—Ä–æ—Å. –£ –Ω–∞—Å —Å–µ—Ä–∏–∞–ª ¬´–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–µ —Å—Ä–∞–∂–µ–Ω–∏—è –í–µ–ª–∏–∫–æ–π –û—Ç–µ—á–µ—Å—Ç–≤–µ–Ω–Ω–æ–π –≤–æ–π–Ω—ã¬ª..."
–°–¢–ê–õ–û (v16.27): "–ú—ã —Å–µ–π—á–∞—Å –æ—Ç–≤–µ—á–∞–µ–º –Ω–∞ –≤–æ–ø—Ä–æ—Å. –£ –Ω–∞—Å –û—Ç–µ—á–µ—Å—Ç–≤–µ–Ω–Ω–æ–π –≤–æ–π–Ω—ã¬ª..."

text

‚ùå –í—ã—Ä–µ–∑–∞–Ω–æ: "—Å–µ—Ä–∏–∞–ª ¬´–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–µ —Å—Ä–∞–∂–µ–Ω–∏—è –í–µ–ª–∏–∫–æ–π"

**–ü—Ä–∏—á–∏–Ω–∞:** Threshold 75-85% —Å–ª–∏—à–∫–æ–º –Ω–∏–∑–∫–∏–π ‚Üí —É–¥–∞–ª—è–µ—Ç—Å—è –Ω–æ—Ä–º–∞–ª—å–Ω—ã–π —Ç–µ–∫—Å—Ç!

### 5 Whys Root Cause Analysis:

1. **–ü–æ—á–µ–º—É –≤—ã—Ä–µ–∑–∞–Ω —Ç–µ–∫—Å—Ç?** ‚Üí clean_loops() —É–¥–∞–ª–∏–ª–∞ —Å–ª–æ–≤–∞
2. **–ü–æ—á–µ–º—É —É–¥–∞–ª–∏–ª–∞ –Ω–æ—Ä–º–∞–ª—å–Ω—ã–π —Ç–µ–∫—Å—Ç?** ‚Üí Threshold 75-85% –Ω–∞—à—ë–ª "–ª–æ–∂–Ω—ã–µ" loops
3. **–ü–æ—á–µ–º—É threshold —Å–ª–∏—à–∫–æ–º –Ω–∏–∑–∫–∏–π?** ‚Üí N-gram 2 —Å–ª–æ–≤–∞ ‚Üí –º–Ω–æ–≥–æ false positives
4. **–ü–æ—á–µ–º—É n-gram=2?** ‚Üí –•–æ—Ç–µ–ª–∏ –ø–æ–π–º–∞—Ç—å –≤—Å–µ loops
5. **ROOT CAUSE:** –ê–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º ‚Üí –ø–æ—Ç–µ—Ä—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞!

### –†–ï–®–ï–ù–ò–ï v16.28:

**scripts/corrections/hallucinations.py:**

```python
def clean_loops(text, is_gap_filled=False, debug=False):
    """
    üîß v16.28: –ó–ê–ú–ï–ù–Ø–ï–¢ hallucination loops –Ω–∞ "..." (–ù–ï —É–¥–∞–ª—è–µ—Ç!)
    
    –ë–´–õ–û (v16.27): —É–¥–∞–ª–µ–Ω–∏–µ —Å–ª–æ–≤ ‚Üí –ø–æ—Ç–µ—Ä—è —Å–º—ã—Å–ª–∞
    –°–¢–ê–õ–û (v16.28): –∑–∞–º–µ–Ω–∞ –Ω–∞ "..." ‚Üí –∫–æ–Ω—Ç–µ–∫—Å—Ç —Å–æ—Ö—Ä–∞–Ω—ë–Ω
    """
    # 1. Threshold: 95% (–Ω–µ 75-85%!) - –û–ß–ï–ù–¨ —Å—Ç—Ä–æ–≥–æ
    threshold = 0.95
    if is_gap_filled:
        threshold = 0.97  # Gap-filled –µ—â—ë —Å—Ç—Ä–æ–∂–µ
    
    # 2. Min n-gram: 4 —Å–ª–æ–≤–∞ (–Ω–µ 2!) - —Ç–æ–ª—å–∫–æ –¥–ª–∏–Ω–Ω—ã–µ loops
    for ngram_size in range(8, 3, -1):  # 8‚Üí4 (–Ω–µ 8‚Üí2!)
    
    # 3. –ó–∞–º–µ–Ω–∞ –Ω–∞ "..." –≤–º–µ—Å—Ç–æ —É–¥–∞–ª–µ–Ω–∏—è
    if is_in_loop:
        if not last_was_ellipsis:
            result_words.append("...")  # ‚úÖ –í—Å—Ç–∞–≤–ª—è–µ–º "..."
            last_was_ellipsis = True
    else:
        result_words.append(orig_word)
–ü–æ—á–µ–º—É —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:

Threshold 95%: —Ç–æ–ª—å–∫–æ –û–ß–ï–ù–¨ –ø–æ—Ö–æ–∂–∏–µ n-–≥—Ä–∞–º–º—ã (–Ω–µ 75%!)

Min n-gram 4 —Å–ª–æ–≤–∞: —Ç–æ–ª—å–∫–æ –¥–ª–∏–Ω–Ω—ã–µ loops (–Ω–µ –∫–æ—Ä–æ—Ç–∫–∏–µ —Ñ—Ä–∞–∑—ã!)

–ó–∞–º–µ–Ω–∞ –Ω–∞ "...": —Å–æ—Ö—Ä–∞–Ω—è–µ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç, –≤–∏–¥–Ω–æ —á—Ç–æ –±—ã–ª loop

Gap-filled 97%: –µ—â—ë —Å—Ç—Ä–æ–∂–µ –¥–ª—è gap-filled —Å–µ–≥–º–µ–Ω—Ç–æ–≤

–†–ï–ó–£–õ–¨–¢–ê–¢:

Hallucination loop (00:21:24):

text
–ë–´–õ–û (v16.26): "—É—á–∏—Ç—ã–≤–∞—Ç—å, —É—á–∏—Ç—ã–≤–∞—Ç—å –±—ã–ª–∞ –Ω–µ–º–µ—Ü–∫–∞—è –∞—Ä—Ç–∏–ª–ª–µ—Ä–∏—è –≤–ø—Ä–∞–≤—å –¥–æ –µ—â–µ —Ñ–∞–∫—Ç–æ—Ä–æ–º..."
–°–¢–ê–õ–û (v16.28): "—É—á–∏—Ç—ã–≤–∞—Ç—å ... –Ω–µ–º–µ—Ü–∫–∞—è –∞—Ä—Ç–∏–ª–ª–µ—Ä–∏—è –≤–ø–ª–æ—Ç—å –¥–æ"
‚úÖ Loop –∑–∞–º–µ–Ω—ë–Ω –Ω–∞ "..." ‚Üí —Å–º—ã—Å–ª —Å–æ—Ö—Ä–∞–Ω—ë–Ω!

–ù–æ—Ä–º–∞–ª—å–Ω—ã–π —Ç–µ–∫—Å—Ç (00:00:00):

text
–ë–´–õ–û (v16.27): "–£ –Ω–∞—Å –û—Ç–µ—á–µ—Å—Ç–≤–µ–Ω–Ω–æ–π –≤–æ–π–Ω—ã¬ª..."  ‚ùå –≤—ã—Ä–µ–∑–∞–Ω–æ!
–°–¢–ê–õ–û (v16.28): "–£ –Ω–∞—Å —Å–µ—Ä–∏–∞–ª ¬´–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–µ —Å—Ä–∞–∂–µ–Ω–∏—è –í–µ–ª–∏–∫–æ–π –û—Ç–µ—á–µ—Å—Ç–≤–µ–Ω–Ω–æ–π –≤–æ–π–Ω—ã¬ª..." ‚úÖ –ø–æ–ª–Ω—ã–π —Ç–µ–∫—Å—Ç!
‚úÖ –ù–æ—Ä–º–∞–ª—å–Ω—ã–π —Ç–µ–∫—Å—Ç –ù–ï —Ç—Ä–æ–Ω—É—Ç!

–ò–∑–º–µ–Ω–µ–Ω–∏—è:
‚úÖ Threshold: 95% (gap-filled: 97%)

‚úÖ Min n-gram: 4 —Å–ª–æ–≤–∞ (–Ω–µ 2!)

‚úÖ –ó–∞–º–µ–Ω–∞ –Ω–∞ "..." –≤–º–µ—Å—Ç–æ —É–¥–∞–ª–µ–Ω–∏—è

‚úÖ –û–¥–∏–Ω "..." –Ω–∞ loop (–Ω–µ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ)

–£—Ä–æ–∫:
–ê–≥—Ä–µ—Å—Å–∏–≤–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ —Ö—É–∂–µ –ø–æ–≤—Ç–æ—Ä–æ–≤!

1 –±–∞–≥ (loop) < 50 –±–∞–≥–æ–≤ (–ø–æ—Ç–µ—Ä—è —Ç–µ–∫—Å—Ç–∞)

–õ—É—á—à–µ –ø–æ–≤—Ç–æ—Ä —Å "..." —á–µ–º –ø–æ—Ç–µ—Ä—è —Å–º—ã—Å–ª–∞

–°—Ç—Ä–æ–≥–∏–µ threshold (95%+) –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç false positives

v16.27: FIX hallucination loops - clean_loops() —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è (–û–¢–ö–ê–ß–ï–ù–û!)
[... –æ–ø–∏—Å–∞–Ω–∏–µ v16.27 - –ù–ï —Ä–∞–±–æ—Ç–∞–µ—Ç! ...]

# Version: v16.27
# Last updated: 2026-02-13

## üîß v16.27: FIX hallucination loops - clean_loops() —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
**–î–∞—Ç–∞:** 2026-02-13  
**ROOT CAUSE:** –§—É–Ω–∫—Ü–∏—è clean_loops() –æ–ø–∏—Å–∞–Ω–∞ –≤ v16.23 –Ω–æ –ù–ï —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞!  
**–†–ï–®–ï–ù–ò–ï:** –°–æ–∑–¥–∞–Ω–∞ clean_loops() + –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ –≤ pipeline

### –ü—Ä–æ–±–ª–µ–º–∞ v16.26:

**–°–∏–º–ø—Ç–æ–º (00:21:24):**
–ò –µ—â–µ –æ–¥–Ω–∏–º —Ñ–∞–∫—Ç–æ—Ä–æ–º, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É—á–∏—Ç—ã–≤–∞—Ç—å,
—É—á–∏—Ç—ã–≤–∞—Ç—å –±—ã–ª–∞ –Ω–µ–º–µ—Ü–∫–∞—è –∞—Ä—Ç–∏–ª–ª–µ—Ä–∏—è –≤–ø—Ä–∞–≤—å –¥–æ –µ—â–µ —Ñ–∞–∫—Ç–æ—Ä–æ–º
–∫–æ—Ç–æ—Ä—ã–µ –Ω–∞–¥–æ —É—á–∏—Ç—ã–≤–∞—Ç—å —ç—Ç–æ –±—ã–ª–æ –Ω–µ–º–µ—Ü–∫–∞—è –≤–ø–ª–æ—Ç—å –¥–æ. –∫–æ—Ç–æ—Ä—ã–π
–Ω–∞–¥–æ —É—á–∏—Ç—ã–≤–∞—Ç—å, —ç—Ç–æ –±—ã–ª–∞ –Ω–µ–º–µ—Ü–∫–∞—è –∞—Ä—Ç–∏–ª–ª–µ—Ä–∏—è, –≤–ø–ª–æ—Ç—å –¥–æ
—Å–∞–º—ã—Ö –∫—Ä—É–ø–Ω—ã—Ö –∫–∞–ª–∏–±—Ä–æ–≤.

text

**Repeating patterns:**
- "—É—á–∏—Ç—ã–≤–∞—Ç—å" √ó 4 —Ä–∞–∑–∞
- "–Ω–µ–º–µ—Ü–∫–∞—è –∞—Ä—Ç–∏–ª–ª–µ—Ä–∏—è" √ó 3 —Ä–∞–∑–∞
- "–Ω–∞–¥–æ —É—á–∏—Ç—ã–≤–∞—Ç—å" √ó 3 —Ä–∞–∑–∞

### 5 Whys Root Cause Analysis:

1. **–ü–æ—á–µ–º—É hallucination loops –ù–ï —É–¥–∞–ª–∏–ª–∏—Å—å?** ‚Üí `clean_loops()` –ù–ï –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è
2. **–ü–æ—á–µ–º—É –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è?** ‚Üí –§—É–Ω–∫—Ü–∏–∏ `clean_loops()` –ù–ï–¢ –≤ –∫–æ–¥–µ!
3. **–ü–æ—á–µ–º—É –µ—ë –Ω–µ—Ç?** ‚Üí VERSION.md —É–ø–æ–º–∏–Ω–∞–µ—Ç v16.23, –Ω–æ –≤ main –µ—ë –ù–ï–¢!
4. **–ü–æ—á–µ–º—É –≤ main –Ω–µ—Ç?** ‚Üí v16.23 –ù–ï –∑–∞–∫–æ–º–º–∏—á–µ–Ω –∏–ª–∏ –æ—Ç–∫–∞—á–µ–Ω
5. **ROOT CAUSE:** –§—É–Ω–∫—Ü–∏—è –∏–∑ VERSION.md —Å—É—â–µ—Å—Ç–≤—É–µ—Ç —Ç–æ–ª—å–∫–æ –Ω–∞ –±—É–º–∞–≥–µ!

### –†–ï–®–ï–ù–ò–ï v16.27:

**scripts/corrections/hallucinations.py:**

```python
def clean_loops(text, is_gap_filled=False, debug=False):
    """
    –£–¥–∞–ª–µ–Ω–∏–µ hallucination loops - repeating n-grams
    
    –ê–ª–≥–æ—Ä–∏—Ç–º:
    1. –†–∞–∑–±–∏–≤–∞–µ—Ç —Ç–µ–∫—Å—Ç –Ω–∞ —Å–ª–æ–≤–∞
    2. –°–æ–∑–¥–∞—ë—Ç n-–≥—Ä–∞–º–º—ã (2-8 —Å–ª–æ–≤)
    3. –ò—â–µ—Ç –ø–æ—Ö–æ–∂–∏–µ n-–≥—Ä–∞–º–º—ã (similarity > threshold)
    4. –£–¥–∞–ª—è–µ—Ç –¥—É–±–ª–∏, –æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–µ—Ä–≤–æ–µ –≤—Ö–æ–∂–¥–µ–Ω–∏–µ
    """
    # N-gram –∞–Ω–∞–ª–∏–∑ –æ—Ç 8 ‚Üí 2 —Å–ª–æ–≤
    # Adaptive threshold: <5 —Å–ª–æ–≤ ‚Üí 85%, >=5 ‚Üí 75%
    # Gap-filled bonus: +10%
    # Min distance: max(ngram_size // 2, 2)
    ...

def clean_hallucinations_from_text(text, speaker, is_gap_filled, debug):
    # 1. üÜï –£–¥–∞–ª–µ–Ω–∏–µ hallucination loops (–ü–ï–†–í–´–ú!)
    text = clean_loops(text, is_gap_filled, debug)
    
    # 2. –£–¥–∞–ª–µ–Ω–∏–µ –¥—É–±–ª–µ–π
    has_dupl, text = is_duplicate_phrase(text, debug)
    
    # 3. –£–¥–∞–ª–µ–Ω–∏–µ ending hallucinations
    text = remove_ending_hallucinations(text, debug)
    ...
–ü–æ—á–µ–º—É —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:

N-gram –∞–Ω–∞–ª–∏–∑ –Ω–∞—Ö–æ–¥–∏—Ç repeating patterns —Å –≤–∞—Ä–∏–∞—Ü–∏—è–º–∏

Adaptive threshold: –∫–æ—Ä–æ—Ç–∫–∏–µ —Ñ—Ä–∞–∑—ã (<5 —Å–ª–æ–≤) –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è —Å—Ç—Ä–æ–∂–µ (85%)

Min distance –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç false positives

Gap-filled —Å–µ–≥–º–µ–Ω—Ç—ã –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è +10% —Å—Ç—Ä–æ–∂–µ (Whisper —á–∞—â–µ hallucinate)

–†–ï–ó–£–õ–¨–¢–ê–¢:

text
–ò –µ—â–µ –æ–¥–Ω–∏–º —Ñ–∞–∫—Ç–æ—Ä–æ–º, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É—á–∏—Ç—ã–≤–∞—Ç—å, 
—ç—Ç–æ –±—ã–ª–∞ –Ω–µ–º–µ—Ü–∫–∞—è –∞—Ä—Ç–∏–ª–ª–µ—Ä–∏—è, –≤–ø–ª–æ—Ç—å –¥–æ —Å–∞–º—ã—Ö –∫—Ä—É–ø–Ω—ã—Ö –∫–∞–ª–∏–±—Ä–æ–≤.
‚úÖ Loops —É–¥–∞–ª–µ–Ω—ã! –¢–µ–∫—Å—Ç –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω!

–ò–∑–º–µ–Ω–µ–Ω–∏—è:
‚úÖ clean_loops() —Å–æ–∑–¥–∞–Ω–∞ (n-gram –∞–Ω–∞–ª–∏–∑ 2-8 —Å–ª–æ–≤)

‚úÖ clean_hallucinations_from_text() –≤—ã–∑—ã–≤–∞–µ—Ç clean_loops() –ø–µ—Ä–≤—ã–º

‚úÖ filter_hallucination_segments() –ø–µ—Ä–µ–¥–∞—ë—Ç is_gap_filled —Ñ–ª–∞–≥

‚úÖ Adaptive threshold: –∫–æ—Ä–æ—Ç–∫–∏–µ ‚Üí 85%, –¥–ª–∏–Ω–Ω—ã–µ ‚Üí 75%

‚úÖ Gap-filled bonus: +10% –∫ threshold

–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏:
Min n-gram size: 2 —Å–ª–æ–≤–∞

Max n-gram size: 8 —Å–ª–æ–≤

Min distance: max(ngram_size // 2, 2)

Base threshold: 75% (>=5 —Å–ª–æ–≤), 85% (<5 —Å–ª–æ–≤)

Gap-filled bonus: +10%

–£—Ä–æ–∫:
VERSION.md ‚â† –∫–æ–¥!

–û–ø–∏—Å–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –≤ VERSION.md –ù–ï –æ–∑–Ω–∞—á–∞–µ—Ç —á—Ç–æ –æ–Ω–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞

–í–°–ï–ì–î–ê –ø—Ä–æ–≤–µ—Ä—è–π –∫–æ–¥ –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º

Golden dataset –¢–û–õ–¨–ö–û –ø–æ—Å–ª–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞ –ë–ï–ó –±–∞–≥–æ–≤!

v16.26: FIX –¥—É–±–ª–µ–π timestamp

# Version: v16.26
# Last updated: 2026-02-13

## üîß v16.26: FIX –¥—É–±–ª–µ–π timestamp - —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è replica_merger + txt_export
**–î–∞—Ç–∞:** 2026-02-13  
**ROOT CAUSE:** –î–≤–∞ –º–æ–¥—É–ª—è –¥–æ–±–∞–≤–ª—è—é—Ç inner timestamps –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ!  
**–†–ï–®–ï–ù–ò–ï:** txt_export –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ timestamp –ø–µ—Ä–µ–¥ –≤—Å—Ç–∞–≤–∫–æ–π

### –ü—Ä–æ–±–ª–µ–º–∞ v16.25:

**–°–∏–º–ø—Ç–æ–º:**
00:00:56 00:00:56 –¢–æ –µ—Å—Ç—å —ç—Ç–æ –±—ã–ª–æ...
00:01:22 –ù–µ–≤—Å–∫–∏–π –ø—è—Ç–∞—á–æ–∫... 00:01:29
00:03:05 –ò —Å —ç–ª–µ–∫—Ç—Ä–æ—Å—Ç–∞–Ω—Ü–∏–∏... 00:03:07

text

### 5 Whys Root Cause Analysis:

1. **–ü–æ—á–µ–º—É –¥—É–±–ª–∏ `00:00:56 00:00:56`?** ‚Üí Timestamp –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –î–í–ê–ñ–î–´
2. **–ü–æ—á–µ–º—É –¥–≤–∞–∂–¥—ã?** ‚Üí –ò `replica_merger` –ò `txt_export` –¥–æ–±–∞–≤–ª—è—é—Ç inner timestamps
3. **–ü–æ—á–µ–º—É –æ–±–∞ –¥–æ–±–∞–≤–ª—è—é—Ç?** ‚Üí `replica_merger` (v16.19 –≠–¢–ê–ü 6.1), `txt_export` (v16.3+)
4. **–ü–æ—á–µ–º—É —Ä–∞–Ω—å—à–µ –Ω–µ –±—ã–ª–æ –¥—É–±–ª—è?** ‚Üí –î–æ v16.19 —Ç–æ–ª—å–∫–æ `txt_export` –¥–æ–±–∞–≤–ª—è–ª timestamps
5. **ROOT CAUSE:** –î–≤–∞ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã—Ö –º–æ–¥—É–ª—è –¥–æ–±–∞–≤–ª—è—é—Ç timestamp ‚Üí –Ω—É–∂–Ω–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è!

### –†–ï–®–ï–ù–ò–ï v16.26:

**scripts/export/txt_export.py:**
```python
def insert_inner_timestamps(text, start_sec, end_sec, next_segment_exists):
    # ‚úÖ v16.26: –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ inner timestamps –æ—Ç replica_merger
    has_inner_timestamps = bool(re.search(r'\d{2}:\d{2}:\d{2}', text))
    
    if has_inner_timestamps:
        return text  # –£–ñ–ï –µ—Å—Ç—å timestamps –æ—Ç replica_merger (–≠–¢–ê–ü 6.1)!
    
    # ... –æ—Å—Ç–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ v16.25 (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π) ...
–ü–æ—á–µ–º—É —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:

replica_merger (–≠–¢–ê–ü 6.1) –¥–æ–±–∞–≤–ª—è–µ—Ç timestamps –≤ –¥–ª–∏–Ω–Ω—ã–µ merged segments (>30 —Å–µ–∫)

txt_export —Ç–µ–ø–µ—Ä—å –ü–†–û–í–ï–†–Ø–ï–¢ –Ω–∞–ª–∏—á–∏–µ timestamp –ü–ï–†–ï–î –≤—Å—Ç–∞–≤–∫–æ–π

–ï—Å–ª–∏ timestamp –£–ñ–ï –µ—Å—Ç—å ‚Üí –Ω–µ –¥–æ–±–∞–≤–ª—è–µ–º (–∑–∞—â–∏—Ç–∞ –æ—Ç –¥—É–±–ª–µ–π!)

–ï—Å–ª–∏ timestamp –ù–ï–¢ ‚Üí –¥–æ–±–∞–≤–ª—è–µ–º (–∫–æ—Ä–æ—Ç–∫–∏–π merged segment)

–†–ï–ó–£–õ–¨–¢–ê–¢:

text
00:00:56 –¢–æ –µ—Å—Ç—å —ç—Ç–æ –±—ã–ª–æ... ‚úÖ –ù–µ—Ç –¥—É–±–ª—è!
00:01:22 –ù–µ–≤—Å–∫–∏–π –ø—è—Ç–∞—á–æ–∫... ‚úÖ Timestamps –æ—Ç replica_merger!
00:03:05 –ò —Å —ç–ª–µ–∫—Ç—Ä–æ—Å—Ç–∞–Ω—Ü–∏–∏... ‚úÖ –í—Å–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ!
–ò–∑–º–µ–Ω–µ–Ω–∏—è:
‚úÖ insert_inner_timestamps() –ø—Ä–æ–≤–µ—Ä—è–µ—Ç re.search(r'\d{2}:\d{2}:\d{2}', text)

‚úÖ –ï—Å–ª–∏ –Ω–∞–π–¥–µ–Ω—ã timestamp ‚Üí –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç text –ë–ï–ó –∏–∑–º–µ–Ω–µ–Ω–∏–π

‚úÖ –ï—Å–ª–∏ –ù–ï –Ω–∞–π–¥–µ–Ω—ã ‚Üí –ø—Ä–∏–º–µ–Ω—è–µ—Ç –ª–æ–≥–∏–∫—É v16.25

–£—Ä–æ–∫ (–ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ):
UNIT TESTS –ù–ï –ù–£–ñ–ù–´!

Unit tests —Ç–µ—Å—Ç–∏—Ä—É—é—Ç –û–î–ù–£ —Ñ—É–Ω–∫—Ü–∏—é –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ

–ù–ï –≤–∏–¥—è—Ç –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ replica_merger + txt_export

–°–æ–∑–¥–∞—é—Ç –ª–æ–∂–Ω–æ–µ —á—É–≤—Å—Ç–≤–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

–ü–†–ê–í–ò–õ–¨–ù–´–ô –ü–û–î–•–û–î:

–ó–∞–ø—É—Å–∫–∞—Ç—å –ü–û–õ–ù–´–ô pipeline –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

–ü—Ä–æ–≤–µ—Ä—è—Ç—å JSON + TXT + LOG (Result Validation Checklist)

–ï—Å–ª–∏ –Ω–∞–π–¥–µ–Ω –±–∞–≥ ‚Üí RCA (5 Whys) ‚Üí FIX ‚Üí –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–Ω–æ–≤–∞

Golden dataset –¥–ª—è —Ä–µ–≥—Ä–µ—Å—Å-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

v16.25: –û–¢–ö–ê–¢ txt_export.py + –ø—Ä–æ—Å—Ç–æ–π FIX –¥—É–±–ª–µ–π
–î–∞—Ç–∞: 2026-02-13
ROOT CAUSE: –í—Å–µ "—Ñ–∏–∫—Å—ã" v16.22-v16.24 —Å–æ–∑–¥–∞–ª–∏ –ù–û–í–´–ï –±–∞–≥–∏ –≤–º–µ—Å—Ç–æ —Ä–µ—à–µ–Ω–∏—è!
–†–ï–®–ï–ù–ò–ï: –û—Ç–∫–∞—Ç –∫ v16.3 + –ø—Ä–æ—Å—Ç–æ–µ —É—Å–ª–æ–≤–∏–µ i > 0

[... previous versions ...]

text

‚îÅ‚îÅ‚îÅ 3. docs/WORKFLOW.md (–æ–±–Ω–æ–≤–∏—Ç—å —Å–µ–∫—Ü–∏—é –ø—Ä–æ unit tests) ‚îÅ‚îÅ‚îÅ

–î–æ–±–∞–≤—å –≤ –∫–æ–Ω–µ—Ü —Å–µ–∫—Ü–∏–∏ "üêõ –ü–†–ò –û–ë–ù–ê–†–£–ñ–ï–ù–ò–ò –ë–ê–ì–ê":

```markdown
### üÜï v16.26: –ü—Ä–æ unit tests

**–í–´–í–û–î–´ –ø–æ—Å–ª–µ v16.22-v16.26:**

‚ùå **–ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ–º unit tests –¥–ª—è:**
- –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –º–µ–∂–¥—É –º–æ–¥—É–ª—è–º–∏ (replica_merger + txt_export)
- –†–µ–∞–ª—å–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ (–¥–ª–∏–Ω–Ω—ã–µ merged segments —Å inner timestamps)
- Integration –ø—Ä–æ–≤–µ—Ä–æ–∫ (–≤–µ—Å—å pipeline –æ—Ç –∞—É–¥–∏–æ –¥–æ TXT)

‚úÖ **–ü–†–ê–í–ò–õ–¨–ù–´–ô –ü–û–î–•–û–î:**
1. **RCA (5 Whys)** ‚Üí –ø–æ–Ω—è—Ç—å ROOT CAUSE
2. **FIX** ‚Üí –∏—Å–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–∏—á–∏–Ω—É
3. **Real test** ‚Üí –∑–∞–ø—É—Å—Ç–∏—Ç—å –ü–û–õ–ù–´–ô pipeline –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–º –∞—É–¥–∏–æ
4. **Validation** ‚Üí –ø—Ä–æ–≤–µ—Ä–∏—Ç—å JSON + TXT + LOG (—á–µ–∫–ª–∏—Å—Ç)
5. **Golden dataset** ‚Üí —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —É—Å–ø–µ—à–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –¥–ª—è regression

**–ò–¢–û–ì:** Unit tests ‚Üí –ª–æ–∂–Ω–æ–µ —á—É–≤—Å—Ç–≤–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏!
–†–µ–∞–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã ‚Üí –Ω–∞—Å—Ç–æ—è—â–∞—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å –≤ —Ä–∞–±–æ—Ç–µ!

# Version: v16.25
# Last updated: 2026-02-13

## üîÑ v16.25: –û–¢–ö–ê–¢ txt_export.py + –ø—Ä–æ—Å—Ç–æ–π FIX –¥—É–±–ª–µ–π
**–î–∞—Ç–∞:** 2026-02-13  
**ROOT CAUSE:** –í—Å–µ "—Ñ–∏–∫—Å—ã" v16.22-v16.24 —Å–æ–∑–¥–∞–ª–∏ –ù–û–í–´–ï –±–∞–≥–∏ –≤–º–µ—Å—Ç–æ —Ä–µ—à–µ–Ω–∏—è!  
**–†–ï–®–ï–ù–ò–ï:** –û—Ç–∫–∞—Ç –∫ v16.3 + –ø—Ä–æ—Å—Ç–æ–µ —É—Å–ª–æ–≤–∏–µ `i > 0`

### –ü—Ä–æ–±–ª–µ–º—ã v16.22-v16.24 (–ù–ê–®–ò "—Ñ–∏–∫—Å—ã"):

**–ë–ê–ì #1: –î–≤–æ–π–Ω–æ–π timestamp `00:00:56 00:00:56`**
- v16.24: –î–æ–±–∞–≤–∏–ª–∏ `is_too_close_to_start < 2.0`
- –ù–ï –†–ê–ë–û–¢–ê–ï–¢: –ø–µ—Ä–≤–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –º–æ–∂–µ—Ç –±—ã—Ç—å >25 —Å–µ–∫!
- –î—É–±–ª—å –≤—Å—ë —Ä–∞–≤–Ω–æ –≤—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è

**–ë–ê–ì #2: –†–∞–∑–±–∏–µ–Ω–∏–µ –Ω–∞ –Ω–æ–≤—ã–µ —Å—Ç—Ä–æ–∫–∏**
¬´–¢–∞–π—Ñ—É–Ω¬ª, –Ω–∞—á–∞–ª–∏ –Ω–∞—Å—Ç—É–ø–ª–µ–Ω–∏–µ –Ω–∞ —Å—Ç–æ–ª–∏—Ü—É.
00:01:22 –ù–µ–≤—Å–∫–∏–π –ø—è—Ç–∞—á–æ–∫ –ø—Ä–∏–æ–±—Ä–µ–ª...

text
- v16.23: –î–æ–±–∞–≤–∏–ª–∏ `\n` –ø–µ—Ä–µ–¥ inner timestamp
- –ü–†–û–ë–õ–ï–ú–ê: –û–¥–Ω–∞ —Ä–µ–ø–ª–∏–∫–∞ —Ä–∞–∑–±–∏–≤–∞–µ—Ç—Å—è –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å—Ç—Ä–æ–∫!

**–ë–ê–ì #3: –î–≤–∞ timestamp –ø–æ–¥—Ä—è–¥ `00:01:22 ... 00:01:29`**
- –ü—Ä–∏—á–∏–Ω–∞: –ø—Ä–æ–ø–æ—Ä—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –ø–æ —Å–∏–º–≤–æ–ª–∞–º
- –ö–æ—Ä–æ—Ç–∫–∏–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –ø–æ–ª—É—á–∞—é—Ç –º–∞–ª–æ –≤—Ä–µ–º–µ–Ω–∏
- –£—Å–ª–æ–≤–∏–µ `time_since_last >= 25` —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –¥–≤–∞–∂–¥—ã

### –†–ï–®–ï–ù–ò–ï v16.25 (–ü–†–û–°–¢–û–ï!):

**scripts/export/txt_export.py:**
- –û—Ç–∫–∞—Ç–∏–ª–∏—Å—å –∫ v16.3 (–ë–ï–ó `\n`, –ë–ï–ó `is_too_close_to_start`)
- –î–æ–±–∞–≤–∏–ª–∏ –û–î–ù–û —É—Å–ª–æ–≤–∏–µ –≤ `should_insert`:
  ```python
  should_insert = (
      i > 0 and  # üÜï –ù–ï –≤—Å—Ç–∞–≤–ª—è—Ç—å timestamp –¥–ª—è –ø–µ—Ä–≤–æ–≥–æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è!
      time_since_last >= 25 and
      (time_to_end >= 30 or not next_segment_exists)
  )
–ü–æ—á–µ–º—É —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:
–ë–ê–ì #1 (–¥—É–±–ª–∏): i > 0 –∑–∞–ø—Ä–µ—â–∞–µ—Ç inner timestamp –¥–ª—è –ø–µ—Ä–≤–æ–≥–æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è ‚Üí –¥—É–±–ª—è –ù–ï–¢!

–ë–ê–ì #2 (–Ω–æ–≤—ã–µ —Å—Ç—Ä–æ–∫–∏): –£–±—Ä–∞–ª–∏ \n ‚Üí –≤—Å—ë –≤ –æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–µ!

–ë–ê–ì #3 (–¥–≤–∞ –ø–æ–¥—Ä—è–¥): –£—Å–ª–æ–≤–∏–µ time_since_last >= 25 —Ä–∞–±–æ—Ç–∞–µ—Ç –æ—Ç last_timestamp_at, –∫–æ—Ç–æ—Ä—ã–π –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è ‚Üí –≤—Ç–æ—Ä–æ–π timestamp –ù–ï –≤—Å—Ç–∞–≤–∏—Ç—Å—è —Å—Ä–∞–∑—É

5 Whys Root Cause Analysis:
–ü–æ—á–µ–º—É –Ω–∞—à–∏ "—Ñ–∏–∫—Å—ã" –Ω–µ —Ä–∞–±–æ—Ç–∞–ª–∏?

–ü–æ—á–µ–º—É unit tests –ø—Ä–æ—à–ª–∏? ‚Üí –ò—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ, –Ω–µ —Ä–µ–∞–ª—å–Ω—ã–π —Ç–µ–∫—Å—Ç

–ü–æ—á–µ–º—É –Ω–µ –ø–æ–π–º–∞–ª–∏ –±–∞–≥–∏? ‚Üí –¢–µ—Å—Ç—ã –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–ª–∏ —Ä–µ–∞–ª—å–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

–ü–æ—á–µ–º—É –¥–æ–±–∞–≤–∏–ª–∏ —Å–ª–æ–∂–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏? ‚Üí –ù–µ –ø–æ–Ω—è–ª–∏ –Ω–∞—Å—Ç–æ—è—â–∏–π ROOT CAUSE

–ü–æ—á–µ–º—É –Ω–µ –æ—Ç–∫–∞—Ç–∏–ª–∏—Å—å —Å—Ä–∞–∑—É? ‚Üí –î–æ–≤–µ—Ä–∏–ª–∏—Å—å GREEN tests

ROOT CAUSE: Unit tests –¥–∞—é—Ç –ª–æ–∂–Ω–æ–µ —á—É–≤—Å—Ç–≤–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –ë–ï–ó —Ä–µ–∞–ª—å–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤!

–£—Ä–æ–∫:
–í–°–ï–ì–î–ê –∑–∞–ø—É—Å–∫–∞—Ç—å –†–ï–ê–õ–¨–ù–´–ô —Ç–µ—Å—Ç –ø–æ—Å–ª–µ unit tests!

v16.22-v16.24: –û–®–ò–ë–û–ß–ù–´–ï "—Ñ–∏–∫—Å—ã" (–û–¢–ö–ê–ß–ï–ù–´!)
[–°–µ–∫—Ü–∏–∏ v16.22-v16.24 —É–¥–∞–ª–µ–Ω—ã ‚Äî –≤—Å–µ —ç—Ç–∏ "—Ñ–∏–∫—Å—ã" —Å–æ–∑–¥–∞–ª–∏ –±–æ–ª—å—à–µ –±–∞–≥–æ–≤!]

v16.21: FIX ending hallucination position check
–î–∞—Ç–∞: 2026-02-12
ROOT CAUSE: –ü—Ä–æ–≤–µ—Ä–∫–∞ continuation phrase –ù–ï —É—á–∏—Ç—ã–≤–∞–ª–∞ –ø–æ–∑–∏—Ü–∏—é —Ñ—Ä–∞–∑—ã
FIX: –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞: –µ—Å–ª–∏ —Ñ—Ä–∞–∑–∞ –±–ª–∏–∂–µ –∫ –Ω–∞—á–∞–ª—É (‚â§30%) ‚Üí –Ω–µ —Å—á–∏—Ç–∞–µ–º "–∫–æ–Ω—Ü–æ–º"

[... previous versions ...]

# Version: v16.22
# Last updated: 2026-02-13

## üîß v16.22: FIX –ë–ê–ì #1, #2 - Timestamp –¥—É–±–ª–∏ + –Ω–∞–∑–∞–¥
**–î–∞—Ç–∞:** 2026-02-13  
**ROOT CAUSE #1:** `insert_intermediate_timestamps()` –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–ª –¥—É–±–ª–∏  
**ROOT CAUSE #2:** `correct_timestamp_drift()` –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–ª –º–æ–Ω–æ—Ç–æ–Ω–Ω–æ—Å—Ç—å  
**FIX:** –û–±–Ω–æ–≤–ª–µ–Ω—ã —Ñ—É–Ω–∫—Ü–∏–∏ + unit tests

### –ò–∑–º–µ–Ω–µ–Ω–∏—è:
- ‚úÖ **scripts/corrections/timestamp_fixer.py:**
  - `insert_intermediate_timestamps()` —Ç–µ–ø–µ—Ä—å –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –¥—É–±–ª–∏ –ø–µ—Ä–µ–¥ –≤—Å—Ç–∞–≤–∫–æ–π
  - `correct_timestamp_drift()` –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –º–æ–Ω–æ—Ç–æ–Ω–Ω–æ—Å—Ç—å (—Ç–æ–ª—å–∫–æ –≤–ø–µ—Ä—ë–¥)

- ‚úÖ **scripts/corrections/boundary_fixer.py:**
  - `split_segment_for_journalist()` —Ç–µ–ø–µ—Ä—å –æ–±–Ω–æ–≤–ª—è–µ—Ç speaker —Å–º–µ–∂–Ω—ã—Ö —Å–µ–≥–º–µ–Ω—Ç–æ–≤
  - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞ —Å–º–µ–∂–Ω—ã—Ö —Ä–µ–ø–ª–∏–∫ –æ–¥–Ω–æ–≥–æ —Å–ø–∏–∫–µ—Ä–∞

- ‚úÖ **tests/test_timestamp_fixer.py:** (–æ–±–Ω–æ–≤–ª—ë–Ω)
  - –î–æ–±–∞–≤–ª–µ–Ω `test_insert_intermediate_no_duplicates()` ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –¥—É–±–ª–∏
  - –î–æ–±–∞–≤–ª–µ–Ω `test_drift_correction_monotonic()` ‚Äî –º–æ–Ω–æ—Ç–æ–Ω–Ω–æ—Å—Ç—å timestamp

- ‚úÖ **tests/test_boundary_fixer.py:** (–æ–±–Ω–æ–≤–ª—ë–Ω)
  - –î–æ–±–∞–≤–ª–µ–Ω `test_split_updates_adjacent_speakers()` ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–º–µ–∂–Ω—ã—Ö
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ speaker –ø–æ—Å–ª–µ split

### 5 Whys Root Cause Analysis:
**–ë–ê–ì #1:**
1. –ü–æ—á–µ–º—É –¥—É–±–ª—å timestamp? ‚Üí –í—Å—Ç–∞–≤–∫–∞ inner timestamp —Å–ª–∏—à–∫–æ–º –±–ª–∏–∑–∫–æ –∫ start_sec
2. –ü–æ—á–µ–º—É —Å–ª–∏—à–∫–æ–º –±–ª–∏–∑–∫–æ? ‚Üí –ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è
3. –ü–æ—á–µ–º—É –Ω–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏? ‚Üí insert_intermediate_timestamps() –Ω–µ —É—á–∏—Ç—ã–≤–∞–ª–∞ start_sec
4. –ü–æ—á–µ–º—É –Ω–µ —É—á–∏—Ç—ã–≤–∞–ª–∞? ‚Üí –ö–æ–¥ –ø—Ä–æ–≤–µ—Ä—è–ª —Ç–æ–ª—å–∫–æ prev_timestamp
5. **ROOT CAUSE:** –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ `is_too_close_to_start`

**–ë–ê–ì #2:**
1. –ü–æ—á–µ–º—É timestamp –Ω–∞–∑–∞–¥? ‚Üí correct_timestamp_drift() —Å–¥–≤–∏–≥–∞–ª timestamp –≤–ª–µ–≤–æ
2. –ü–æ—á–µ–º—É –≤–ª–µ–≤–æ? ‚Üí –ê–ª–≥–æ—Ä–∏—Ç–º –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞–ª "–Ω–∞ –±–ª–∏–∂–∞–π—à–∏–π –≤–∞–ª–∏–¥–Ω—ã–π"
3. –ü–æ—á–µ–º—É –±–ª–∏–∂–∞–π—à–∏–π –º–æ–≥ –±—ã—Ç—å –Ω–∞–∑–∞–¥? ‚Üí –ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –º–æ–Ω–æ—Ç–æ–Ω–Ω–æ—Å—Ç–∏
4. –ü–æ—á–µ–º—É –Ω–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏? ‚Üí –ö–æ–¥ –Ω–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–ª forward-only –¥–≤–∏–∂–µ–Ω–∏–µ
5. **ROOT CAUSE:** –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ `corrected >= prev_timestamp` –ø—Ä–æ–≤–µ—Ä–∫–∏

---

## v16.21: FIX ending hallucination position check
**–î–∞—Ç–∞:** 2026-02-12  
**ROOT CAUSE:** –ü—Ä–æ–≤–µ—Ä–∫–∞ continuation phrase –ù–ï —É—á–∏—Ç—ã–≤–∞–ª–∞ –ø–æ–∑–∏—Ü–∏—é —Ñ—Ä–∞–∑—ã  
**FIX:** –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞: –µ—Å–ª–∏ —Ñ—Ä–∞–∑–∞ –±–ª–∏–∂–µ –∫ –Ω–∞—á–∞–ª—É (‚â§30%) ‚Üí –Ω–µ —Å—á–∏—Ç–∞–µ–º "–∫–æ–Ω—Ü–æ–º"

### –ò–∑–º–µ–Ω–µ–Ω–∏—è:
- ‚úÖ `remove_ending_hallucinations()` —Ç–µ–ø–µ—Ä—å –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–æ–∑–∏—Ü–∏—é —Ñ—Ä–∞–∑—ã
- ‚úÖ Threshold: –µ—Å–ª–∏ continuation phrase –≤ –ø–µ—Ä–≤—ã—Ö 30% —Ç–µ–∫—Å—Ç–∞ ‚Üí —ç—Ç–æ –ù–ê–ß–ê–õ–û, –Ω–µ –∫–æ–Ω–µ—Ü!
- ‚úÖ Debug output –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–æ–∑–∏—Ü–∏—é –∏ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –¥–æ –∫–æ–Ω—Ü–∞

### –ü—Ä–∏–º–µ—Ä:
**–ë–´–õ–û:** "–ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ —Å–ª–µ–¥—É–µ—Ç –æ–ø–µ—Ä–∞—Ü–∏—è –ò—Å–∫—Ä–∞..." ‚Üí —É–¥–∞–ª—è–ª–æ—Å—å "–ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ —Å–ª–µ–¥—É–µ—Ç"  
**–°–¢–ê–õ–û:** "–ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ —Å–ª–µ–¥—É–µ—Ç –æ–ø–µ—Ä–∞—Ü–∏—è –ò—Å–∫—Ä–∞..." ‚Üí –ù–ï —É–¥–∞–ª—è–µ—Ç—Å—è (—ç—Ç–æ –Ω–∞—á–∞–ª–æ!)

---

# Version: v16.23
# Last updated: 2026-02-13

## üÜï v16.23: FIX –ë–ê–ì #3 - Hallucination loops –≤ gap-filled —Å–µ–≥–º–µ–Ω—Ç–∞—Ö
**–î–∞—Ç–∞:** 2026-02-13  
**ROOT CAUSE:** Whisper —Å–æ–∑–¥–∞–≤–∞–ª repeating loops –ø—Ä–∏ force-transcribe gaps  
**FIX:** –ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è `clean_loops()` —Å adaptive threshold + 6 unit tests

### –ò–∑–º–µ–Ω–µ–Ω–∏—è:
- ‚úÖ **scripts/corrections/hallucinations.py:**
  - –ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è `clean_loops()` –¥–ª—è –¥–µ—Ç–µ–∫—Ü–∏–∏ repeating patterns
  - N-gram –∞–Ω–∞–ª–∏–∑ —Å —Ä–∞–∑–º–µ—Ä–æ–º –æ–∫–Ω–∞ –æ—Ç 2 –¥–æ 8 —Å–ª–æ–≤
  - Adaptive threshold: –∫–æ—Ä–æ—Ç–∫–∏–µ —Ñ—Ä–∞–∑—ã (<5 —Å–ª–æ–≤) ‚Üí 85%, –¥–ª–∏–Ω–Ω—ã–µ ‚Üí 75%
  - –û—Å–æ–±–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ gap-filled —Å–µ–≥–º–µ–Ω—Ç–æ–≤ (threshold +10%)
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è –º–µ–∂–¥—É n-–≥—Ä–∞–º–º–∞–º–∏ (–∏–∑–±–µ–≥–∞–µ—Ç false positives)
  - –û–±–Ω–æ–≤–ª—ë–Ω `clean_hallucinations_from_text()` ‚Äî –≤—ã–∑—ã–≤–∞–µ—Ç `clean_loops()` –ø–µ—Ä–≤—ã–º
  - –û–±–Ω–æ–≤–ª—ë–Ω `filter_hallucination_segments()` ‚Äî –ø–µ—Ä–µ–¥–∞—ë—Ç `is_gap_filled` —Ñ–ª–∞–≥

- ‚úÖ **tests/test_hallucinations.py:** (–ù–û–í–´–ô –§–ê–ô–õ!)
  - `test_clean_loops_exact_repeat()` ‚Äî —Ç–æ—á–Ω—ã–µ –ø–æ–≤—Ç–æ—Ä—ã
  - `test_clean_loops_with_variations()` ‚Äî –ë–ê–ì #3 (—Ä–µ–∞–ª—å–Ω—ã–π –∫–µ–π—Å!)
  - `test_clean_loops_short_phrases()` ‚Äî —Å—Ç—Ä–æ–≥–∏–π threshold –¥–ª—è –∫–æ—Ä–æ—Ç–∫–∏—Ö —Ñ—Ä–∞–∑
  - `test_clean_loops_no_false_positives()` ‚Äî –Ω–µ —É–¥–∞–ª—è—Ç—å –Ω–æ—Ä–º–∞–ª—å–Ω—ã–π —Ç–µ–∫—Å—Ç
  - `test_clean_loops_gap_filled_stricter()` ‚Äî gap-filled –±–æ–ª–µ–µ —Å—Ç—Ä–æ–≥–∏–π
  - `test_integration_full_pipeline()` ‚Äî –ø–æ–ª–Ω—ã–π pipeline –æ—á–∏—Å—Ç–∫–∏
  - **6/6 —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ–π–¥–µ–Ω–æ ‚úÖ**

### 5 Whys Root Cause Analysis:
1. –ü–æ—á–µ–º—É –¥—É–±–ª—å —Ç–µ–∫—Å—Ç–∞? ‚Üí Repeating patterns —Å –≤–∞—Ä–∏–∞—Ü–∏—è–º–∏
2. –ü–æ—á–µ–º—É repeating? ‚Üí Gap-filled —Å–µ–≥–º–µ–Ω—Ç —Å Whisper hallucination loop
3. –ü–æ—á–µ–º—É Whisper —Å–æ–∑–¥–∞–ª loop? ‚Üí Force-transcribe –∏–Ω–æ–≥–¥–∞ —Å–æ–∑–¥–∞—ë—Ç –ø–µ—Ç–ª–∏
4. –ü–æ—á–µ–º—É –Ω–µ –ø–æ–π–º–∞–ª–∏? ‚Üí –í–∞—Ä–∏–∞—Ü–∏–∏ –∏–º–µ—é—Ç similarity < 75%
5. **ROOT CAUSE:** –û–¥–∏–Ω–∞–∫–æ–≤—ã–π threshold (75%) –¥–ª—è –≤—Å–µ—Ö —Ñ—Ä–∞–∑, –∫–æ—Ä–æ—Ç–∫–∏–µ –Ω—É–∂–Ω–æ —Å—Ç—Ä–æ–∂–µ!

### –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:
**–ë–´–õ–û:**
—É—á–∏—Ç—ã–≤–∞—Ç—å –±—ã–ª–∞ –Ω–µ–º–µ—Ü–∫–∞—è –∞—Ä—Ç–∏–ª–ª–µ—Ä–∏—è –≤–ø—Ä–∞–≤—å –¥–æ –µ—â–µ —Ñ–∞–∫—Ç–æ—Ä–æ–º
–∫–æ—Ç–æ—Ä—ã–µ –Ω–∞–¥–æ —É—á–∏—Ç—ã–≤–∞—Ç—å —ç—Ç–æ –±—ã–ª–æ –Ω–µ–º–µ—Ü–∫–∞—è –≤–ø–ª–æ—Ç—å –¥–æ. –∫–æ—Ç–æ—Ä—ã–π
–Ω–∞–¥–æ —É—á–∏—Ç—ã–≤–∞—Ç—å, —ç—Ç–æ –±—ã–ª–∞ –Ω–µ–º–µ—Ü–∫–∞—è –∞—Ä—Ç–∏–ª–ª–µ—Ä–∏—è, –≤–ø–ª–æ—Ç—å –¥–æ

text

**–°–¢–ê–õ–û:**
—É—á–∏—Ç—ã–≤–∞—Ç—å –±—ã–ª–∞ –Ω–µ–º–µ—Ü–∫–∞—è –∞—Ä—Ç–∏–ª–ª–µ—Ä–∏—è –≤–ø–ª–æ—Ç—å –¥–æ

text

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏:
- Min n-gram size: 2 —Å–ª–æ–≤–∞
- Max n-gram size: 8 —Å–ª–æ–≤
- Min distance –º–µ–∂–¥—É n-–≥—Ä–∞–º–º–∞–º–∏: `max(ngram_size // 2, 2)`
- Base threshold: 75% (–¥–ª–∏–Ω–Ω—ã–µ), 85% (–∫–æ—Ä–æ—Ç–∫–∏–µ)
- Gap-filled bonus: +10% –∫ threshold

---

## üîß v16.22: FIX –ë–ê–ì #1, #2 - Timestamp –¥—É–±–ª–∏ + —Å–º–µ–∂–Ω—ã–µ —Ä–µ–ø–ª–∏–∫–∏
**–î–∞—Ç–∞:** 2026-02-13  
**ROOT CAUSE #1:** `insert_intermediate_timestamps()` –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–ª –¥—É–±–ª–∏  
**ROOT CAUSE #2:** `split_segment_for_journalist()` –Ω–µ –æ–±–Ω–æ–≤–ª—è–ª speaker —Å–æ—Å–µ–¥–Ω–∏—Ö —Å–µ–≥–º–µ–Ω—Ç–æ–≤  
**FIX:** –û–±–Ω–æ–≤–ª–µ–Ω—ã —Ñ—É–Ω–∫—Ü–∏–∏ + unit tests

### –ò–∑–º–µ–Ω–µ–Ω–∏—è:
- ‚úÖ **scripts/corrections/timestamp_fixer.py:**
  - `insert_intermediate_timestamps()` —Ç–µ–ø–µ—Ä—å –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –¥—É–±–ª–∏ –ø–µ—Ä–µ–¥ –≤—Å—Ç–∞–≤–∫–æ–π
  - `correct_timestamp_drift()` –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –º–æ–Ω–æ—Ç–æ–Ω–Ω–æ—Å—Ç—å (—Ç–æ–ª—å–∫–æ –≤–ø–µ—Ä—ë–¥)

- ‚úÖ **scripts/corrections/boundary_fixer.py:**
  - `split_segment_for_journalist()` —Ç–µ–ø–µ—Ä—å –æ–±–Ω–æ–≤–ª—è–µ—Ç speaker —Å–º–µ–∂–Ω—ã—Ö —Å–µ–≥–º–µ–Ω—Ç–æ–≤
  - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞ —Å–º–µ–∂–Ω—ã—Ö —Ä–µ–ø–ª–∏–∫ –æ–¥–Ω–æ–≥–æ —Å–ø–∏–∫–µ—Ä–∞

- ‚úÖ **tests/test_timestamp_fixer.py:** (–æ–±–Ω–æ–≤–ª—ë–Ω)
  - –î–æ–±–∞–≤–ª–µ–Ω `test_insert_intermediate_no_duplicates()` ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –¥—É–±–ª–∏
  - –î–æ–±–∞–≤–ª–µ–Ω `test_drift_correction_monotonic()` ‚Äî –º–æ–Ω–æ—Ç–æ–Ω–Ω–æ—Å—Ç—å timestamp

- ‚úÖ **tests/test_boundary_fixer.py:** (–æ–±–Ω–æ–≤–ª—ë–Ω)
  - –î–æ–±–∞–≤–ª–µ–Ω `test_split_updates_adjacent_speakers()` ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–º–µ–∂–Ω—ã—Ö
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ speaker –ø–æ—Å–ª–µ split

---

## v16.21: FIX ending hallucination position check
**–î–∞—Ç–∞:** 2026-02-12  
**ROOT CAUSE:** –ü—Ä–æ–≤–µ—Ä–∫–∞ continuation phrase –ù–ï —É—á–∏—Ç—ã–≤–∞–ª–∞ –ø–æ–∑–∏—Ü–∏—é —Ñ—Ä–∞–∑—ã  
**FIX:** –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞: –µ—Å–ª–∏ —Ñ—Ä–∞–∑–∞ –±–ª–∏–∂–µ –∫ –Ω–∞—á–∞–ª—É (‚â§30%) ‚Üí –Ω–µ —Å—á–∏—Ç–∞–µ–º "–∫–æ–Ω—Ü–æ–º"

### –ò–∑–º–µ–Ω–µ–Ω–∏—è:
- ‚úÖ `remove_ending_hallucinations()` —Ç–µ–ø–µ—Ä—å –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–æ–∑–∏—Ü–∏—é —Ñ—Ä–∞–∑—ã
- ‚úÖ Threshold: –µ—Å–ª–∏ continuation phrase –≤ –ø–µ—Ä–≤—ã—Ö 30% —Ç–µ–∫—Å—Ç–∞ ‚Üí —ç—Ç–æ –ù–ê–ß–ê–õ–û, –Ω–µ –∫–æ–Ω–µ—Ü!
- ‚úÖ Debug output –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–æ–∑–∏—Ü–∏—é –∏ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –¥–æ –∫–æ–Ω—Ü–∞

### –ü—Ä–∏–º–µ—Ä:
**–ë–´–õ–û:** "–ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ —Å–ª–µ–¥—É–µ—Ç –æ–ø–µ—Ä–∞—Ü–∏—è –ò—Å–∫—Ä–∞..." ‚Üí —É–¥–∞–ª—è–ª–æ—Å—å "–ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ —Å–ª–µ–¥—É–µ—Ç"  
**–°–¢–ê–õ–û:** "–ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ —Å–ª–µ–¥—É–µ—Ç –æ–ø–µ—Ä–∞—Ü–∏—è –ò—Å–∫—Ä–∞..." ‚Üí –ù–ï —É–¥–∞–ª—è–µ—Ç—Å—è (—ç—Ç–æ –Ω–∞—á–∞–ª–æ!)

---

# Version: v16.23
# Last updated: 2026-02-13

## üÜï v16.23: FIX –ë–ê–ì #3 - Hallucination loops –≤ gap-filled —Å–µ–≥–º–µ–Ω—Ç–∞—Ö
**–î–∞—Ç–∞:** 2026-02-13  
**ROOT CAUSE:** Whisper —Å–æ–∑–¥–∞–≤–∞–ª repeating loops –ø—Ä–∏ force-transcribe gaps  
**FIX:** –ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è `clean_loops()` —Å adaptive threshold + unit tests

### –ò–∑–º–µ–Ω–µ–Ω–∏—è:
- ‚úÖ **scripts/corrections/hallucinations.py:**
  - –ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è `clean_loops()` –¥–ª—è –¥–µ—Ç–µ–∫—Ü–∏–∏ repeating patterns
  - Adaptive threshold: –∫–æ—Ä–æ—Ç–∫–∏–µ —Ñ—Ä–∞–∑—ã (<5 —Å–ª–æ–≤) ‚Üí 85%, –¥–ª–∏–Ω–Ω—ã–µ ‚Üí 75%
  - –û—Å–æ–±–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ gap-filled —Å–µ–≥–º–µ–Ω—Ç–æ–≤ (threshold +10%)
  - –û–±–Ω–æ–≤–ª—ë–Ω `clean_hallucinations_from_text()` ‚Äî –≤—ã–∑—ã–≤–∞–µ—Ç `clean_loops()` –ø–µ—Ä–≤—ã–º
  - –û–±–Ω–æ–≤–ª—ë–Ω `filter_hallucination_segments()` ‚Äî –ø–µ—Ä–µ–¥–∞—ë—Ç `is_gap_filled` —Ñ–ª–∞–≥

- ‚úÖ **tests/test_hallucinations.py:** (–ù–û–í–´–ô –§–ê–ô–õ!)
  - `test_clean_loops_exact_repeat()` ‚Äî —Ç–æ—á–Ω—ã–µ –ø–æ–≤—Ç–æ—Ä—ã
  - `test_clean_loops_with_variations()` ‚Äî –ë–ê–ì #3 (—Ä–µ–∞–ª—å–Ω—ã–π –∫–µ–π—Å!)
  - `test_clean_loops_short_phrases()` ‚Äî —Å—Ç—Ä–æ–≥–∏–π threshold –¥–ª—è –∫–æ—Ä–æ—Ç–∫–∏—Ö —Ñ—Ä–∞–∑
  - `test_clean_loops_no_false_positives()` ‚Äî –Ω–µ —É–¥–∞–ª—è—Ç—å –Ω–æ—Ä–º–∞–ª—å–Ω—ã–π —Ç–µ–∫—Å—Ç
  - `test_clean_loops_gap_filled_stricter()` ‚Äî gap-filled –±–æ–ª–µ–µ —Å—Ç—Ä–æ–≥–∏–π
  - `test_integration_full_pipeline()` ‚Äî –ø–æ–ª–Ω—ã–π pipeline –æ—á–∏—Å—Ç–∫–∏

### 5 Whys Root Cause Analysis:
1. –ü–æ—á–µ–º—É –¥—É–±–ª—å —Ç–µ–∫—Å—Ç–∞? ‚Üí Repeating patterns —Å –≤–∞—Ä–∏–∞—Ü–∏—è–º–∏
2. –ü–æ—á–µ–º—É repeating? ‚Üí Gap-filled —Å–µ–≥–º–µ–Ω—Ç —Å Whisper hallucination loop
3. –ü–æ—á–µ–º—É Whisper —Å–æ–∑–¥–∞–ª loop? ‚Üí Force-transcribe –∏–Ω–æ–≥–¥–∞ —Å–æ–∑–¥–∞—ë—Ç –ø–µ—Ç–ª–∏
4. –ü–æ—á–µ–º—É –Ω–µ –ø–æ–π–º–∞–ª–∏? ‚Üí –í–∞—Ä–∏–∞—Ü–∏–∏ –∏–º–µ—é—Ç similarity < 75%
5. **ROOT CAUSE:** –û–¥–∏–Ω–∞–∫–æ–≤—ã–π threshold (75%) –¥–ª—è –≤—Å–µ—Ö —Ñ—Ä–∞–∑, –∫–æ—Ä–æ—Ç–∫–∏–µ –Ω—É–∂–Ω–æ —Å—Ç—Ä–æ–∂–µ!

### –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:
**–ë–´–õ–û:**
—É—á–∏—Ç—ã–≤–∞—Ç—å –±—ã–ª–∞ –Ω–µ–º–µ—Ü–∫–∞—è –∞—Ä—Ç–∏–ª–ª–µ—Ä–∏—è –≤–ø—Ä–∞–≤—å –¥–æ –µ—â–µ —Ñ–∞–∫—Ç–æ—Ä–æ–º
–∫–æ—Ç–æ—Ä—ã–µ –Ω–∞–¥–æ —É—á–∏—Ç—ã–≤–∞—Ç—å —ç—Ç–æ –±—ã–ª–æ –Ω–µ–º–µ—Ü–∫–∞—è –≤–ø–ª–æ—Ç—å –¥–æ. –∫–æ—Ç–æ—Ä—ã–π
–Ω–∞–¥–æ —É—á–∏—Ç—ã–≤–∞—Ç—å, —ç—Ç–æ –±—ã–ª–∞ –Ω–µ–º–µ—Ü–∫–∞—è –∞—Ä—Ç–∏–ª–ª–µ—Ä–∏—è, –≤–ø–ª–æ—Ç—å –¥–æ

text

**–°–¢–ê–õ–û:**
—É—á–∏—Ç—ã–≤–∞—Ç—å –±—ã–ª–∞ –Ω–µ–º–µ—Ü–∫–∞—è –∞—Ä—Ç–∏–ª–ª–µ—Ä–∏—è –≤–ø–ª–æ—Ç—å –¥–æ

text

---

## üîß v16.22: FIX –ë–ê–ì #1, #2 - Timestamp –¥—É–±–ª–∏ + —Å–º–µ–∂–Ω—ã–µ —Ä–µ–ø–ª–∏–∫–∏
**–î–∞—Ç–∞:** 2026-02-13  
**ROOT CAUSE #1:** `insert_intermediate_timestamps()` –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–ª –¥—É–±–ª–∏  
**ROOT CAUSE #2:** `split_segment_for_journalist()` –Ω–µ –æ–±–Ω–æ–≤–ª—è–ª speaker —Å–æ—Å–µ–¥–Ω–∏—Ö —Å–µ–≥–º–µ–Ω—Ç–æ–≤  
**FIX:** –û–±–Ω–æ–≤–ª–µ–Ω—ã —Ñ—É–Ω–∫—Ü–∏–∏ + unit tests

### –ò–∑–º–µ–Ω–µ–Ω–∏—è:
- ‚úÖ **scripts/corrections/timestamp_fixer.py:**
  - `insert_intermediate_timestamps()` —Ç–µ–ø–µ—Ä—å –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –¥—É–±–ª–∏ –ø–µ—Ä–µ–¥ –≤—Å—Ç–∞–≤–∫–æ–π
  - `correct_timestamp_drift()` –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –º–æ–Ω–æ—Ç–æ–Ω–Ω–æ—Å—Ç—å (—Ç–æ–ª—å–∫–æ –≤–ø–µ—Ä—ë–¥)

- ‚úÖ **scripts/corrections/boundary_fixer.py:**
  - `split_segment_for_journalist()` —Ç–µ–ø–µ—Ä—å –æ–±–Ω–æ–≤–ª—è–µ—Ç speaker —Å–º–µ–∂–Ω—ã—Ö —Å–µ–≥–º–µ–Ω—Ç–æ–≤
  - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞ —Å–º–µ–∂–Ω—ã—Ö —Ä–µ–ø–ª–∏–∫ –æ–¥–Ω–æ–≥–æ —Å–ø–∏–∫–µ—Ä–∞

- ‚úÖ **tests/test_timestamp_fixer.py:** (–æ–±–Ω–æ–≤–ª—ë–Ω)
  - –î–æ–±–∞–≤–ª–µ–Ω `test_insert_intermediate_no_duplicates()` ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –¥—É–±–ª–∏
  - –î–æ–±–∞–≤–ª–µ–Ω `test_drift_correction_monotonic()` ‚Äî –º–æ–Ω–æ—Ç–æ–Ω–Ω–æ—Å—Ç—å timestamp

- ‚úÖ **tests/test_boundary_fixer.py:** (–æ–±–Ω–æ–≤–ª—ë–Ω)
  - –î–æ–±–∞–≤–ª–µ–Ω `test_split_updates_adjacent_speakers()` ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–º–µ–∂–Ω—ã—Ö
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ speaker –ø–æ—Å–ª–µ split

---

## v16.21: FIX ending hallucination position check
**–î–∞—Ç–∞:** 2026-02-12  
**ROOT CAUSE:** –ü—Ä–æ–≤–µ—Ä–∫–∞ continuation phrase –ù–ï —É—á–∏—Ç—ã–≤–∞–ª–∞ –ø–æ–∑–∏—Ü–∏—é —Ñ—Ä–∞–∑—ã  
**FIX:** –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞: –µ—Å–ª–∏ —Ñ—Ä–∞–∑–∞ –±–ª–∏–∂–µ –∫ –Ω–∞—á–∞–ª—É (‚â§30%) ‚Üí –Ω–µ —Å—á–∏—Ç–∞–µ–º "–∫–æ–Ω—Ü–æ–º"

### –ò–∑–º–µ–Ω–µ–Ω–∏—è:
- ‚úÖ `remove_ending_hallucinations()` —Ç–µ–ø–µ—Ä—å –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–æ–∑–∏—Ü–∏—é —Ñ—Ä–∞–∑—ã
- ‚úÖ Threshold: –µ—Å–ª–∏ continuation phrase –≤ –ø–µ—Ä–≤—ã—Ö 30% —Ç–µ–∫—Å—Ç–∞ ‚Üí —ç—Ç–æ –ù–ê–ß–ê–õ–û, –Ω–µ –∫–æ–Ω–µ—Ü!
- ‚úÖ Debug output –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–æ–∑–∏—Ü–∏—é –∏ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –¥–æ –∫–æ–Ω—Ü–∞

### –ü—Ä–∏–º–µ—Ä:
**–ë–´–õ–û:** "–ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ —Å–ª–µ–¥—É–µ—Ç –æ–ø–µ—Ä–∞—Ü–∏—è –ò—Å–∫—Ä–∞..." ‚Üí —É–¥–∞–ª—è–ª–æ—Å—å "–ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ —Å–ª–µ–¥—É–µ—Ç"  
**–°–¢–ê–õ–û:** "–ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ —Å–ª–µ–¥—É–µ—Ç –æ–ø–µ—Ä–∞—Ü–∏—è –ò—Å–∫—Ä–∞..." ‚Üí –ù–ï —É–¥–∞–ª—è–µ—Ç—Å—è (—ç—Ç–æ –Ω–∞—á–∞–ª–æ!)

---

[... previous versions ...]

## v16.24.1 (2026-02-13)
**üîß FIX #2: Adjacent same speaker - neutral —Ñ—Ä–∞–∑—ã –ø–æ—Å–ª–µ split**

### ROOT CAUSE (5 Whys):

**–°–∏–º–ø—Ç–æ–º:**
–û–∂–∏–¥–∞–ª–æ—Å—å: –ò—Å–∞–µ–≤ ‚Üí –ñ—É—Ä–Ω–∞–ª–∏—Å—Ç ‚Üí –ò—Å–∞–µ–≤ (3 —Å–µ–≥–º–µ–Ω—Ç–∞)
–ü–æ–ª—É—á–µ–Ω–æ: –ò—Å–∞–µ–≤ ‚Üí –ñ—É—Ä–Ω–∞–ª–∏—Å—Ç (2 —Å–µ–≥–º–µ–Ω—Ç–∞)

text

**5 Whys:**
1. –ü–æ—á–µ–º—É —Ç—Ä–µ—Ç—å–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –Ω–µ —Å–æ–∑–¥–∞—ë—Ç —Å–µ–≥–º–µ–Ω—Ç –ò—Å–∞–µ–≤?  
   ‚Üí –ü–æ–ø–∞–¥–∞–µ—Ç –≤ –≥—Ä—É–ø–ø—É –ñ—É—Ä–Ω–∞–ª–∏—Å—Ç–∞

2. –ü–æ—á–µ–º—É –ø–æ–ø–∞–¥–∞–µ—Ç –≤ –≥—Ä—É–ø–ø—É –ñ—É—Ä–Ω–∞–ª–∏—Å—Ç–∞?  
   ‚Üí –ù–∞—Å–ª–µ–¥—É–µ—Ç `current_speaker="–ñ—É—Ä–Ω–∞–ª–∏—Å—Ç"`

3. –ü–æ—á–µ–º—É –Ω–∞—Å–ª–µ–¥—É–µ—Ç –ñ—É—Ä–Ω–∞–ª–∏—Å—Ç–∞?  
   ‚Üí –¢–µ–∫—Å—Ç neutral, –ª–æ–≥–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `current_speaker`

4. –ü–æ—á–µ–º—É –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `current_speaker` –∞ –Ω–µ original?  
   ‚Üí –ù–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π `original_speaker`

5. **ROOT CAUSE:** –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∑–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –∏—Å—Ö–æ–¥–Ω–æ–≥–æ —Å–ø–∏–∫–µ—Ä–∞ —Å–µ–≥–º–µ–Ω—Ç–∞

### –†–ï–®–ï–ù–ò–ï:

**scripts/corrections/boundary_fixer.py:**
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `original_speaker = speaker` (—Å—Ç—Ä–æ–∫–∞ 248)
- Neutral —Ñ—Ä–∞–∑—ã —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É—é—Ç `original_speaker` –≤–º–µ—Å—Ç–æ `current_speaker`
- Reason: `"neutral (return to original)"`

**–õ–æ–≥–∏–∫–∞:**
–°–µ–≥–º–µ–Ω—Ç: speaker="–ò—Å–∞–µ–≤"

"–ü–µ—Ä–≤–æ–µ" ‚Üí neutral ‚Üí original_speaker="–ò—Å–∞–µ–≤" ‚úÖ

"–†–∞—Å—Å–∫–∞–∂–∏—Ç–µ" ‚Üí journalist ‚Üí split to "–ñ—É—Ä–Ω–∞–ª–∏—Å—Ç" ‚úÖ

"–¢—Ä–µ—Ç—å–µ" ‚Üí neutral ‚Üí original_speaker="–ò—Å–∞–µ–≤" ‚úÖ (FIX!)

text

### Testing:
```bash
python -m pytest tests/test_boundary_fixer.py::test_raw_speaker_id_mapping -v
‚úÖ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: PASSED (3 —Å–µ–≥–º–µ–Ω—Ç–∞)
v16.24 (2026-02-13)
üîß FIX #1: –î—É–±–ª—å timestamp –≤ –Ω–∞—á–∞–ª–µ —Å–µ–≥–º–µ–Ω—Ç–∞

## v16.24 (2026-02-13)
**üîß FIX #1: –î—É–±–ª—å timestamp –≤ –Ω–∞—á–∞–ª–µ —Å–µ–≥–º–µ–Ω—Ç–∞**

### ROOT CAUSE (5 Whys):

**–°–∏–º–ø—Ç–æ–º:** 
00:00:56 00:00:56 –¢–æ –µ—Å—Ç—å —ç—Ç–æ –±—ã–ª–æ...

text

**5 Whys:**
1. –ü–æ—á–µ–º—É –¥–≤–∞ –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö timestamp?  
   ‚Üí Inner timestamp –≤—Å—Ç–∞–≤–ª–µ–Ω –≤ –Ω–∞—á–∞–ª–æ —Ç–µ–∫—Å—Ç–∞ —Å–µ–≥–º–µ–Ω—Ç–∞

2. –ü–æ—á–µ–º—É –≤—Å—Ç–∞–≤–ª–µ–Ω –≤ –Ω–∞—á–∞–ª–æ?  
   ‚Üí –£—Å–ª–æ–≤–∏–µ `time_since_last >= 25` –≤—ã–ø–æ–ª–Ω–∏–ª–æ—Å—å –¥–ª—è –ø–µ—Ä–≤–æ–≥–æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è

3. –ü–æ—á–µ–º—É –≤—ã–ø–æ–ª–Ω–∏–ª–æ—Å—å –¥–ª—è –ø–µ—Ä–≤–æ–≥–æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è?  
   ‚Üí –ü–µ—Ä–≤–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –¥–ª–∏–Ω–Ω–æ–µ (~30 —Å–µ–∫)

4. –ü–æ—á–µ–º—É —Ç–∞–∫ –±–ª–∏–∑–∫–æ –∫ –Ω–∞—á–∞–ª—É?  
   ‚Üí –ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è –æ—Ç `start_sec`

5. **ROOT CAUSE:** –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ `sent_start - start_sec >= 2.0`

### –†–ï–®–ï–ù–ò–ï:

**scripts/export/txt_export.py:**
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ `is_too_close_to_start = (sent_start - start_sec) < 2.0`
- Inner timestamp –ù–ï –≤—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –µ—Å–ª–∏ < 2 —Å–µ–∫—É–Ω–¥ –æ—Ç –Ω–∞—á–∞–ª–∞ —Å–µ–≥–º–µ–Ω—Ç–∞
- –£—Å–ª–æ–≤–∏–µ `should_insert` —Ç–µ–ø–µ—Ä—å –≤–∫–ª—é—á–∞–µ—Ç `not is_too_close_to_start`

**tests/test_txt_export.py:**
- –ù–æ–≤—ã–π —Ç–µ—Å—Ç: `test_no_duplicate_timestamp_at_segment_start()`
- –°–æ–∑–¥–∞—ë—Ç –æ—á–µ–Ω—å –¥–ª–∏–Ω–Ω–æ–µ –ø–µ—Ä–≤–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ (~35 —Å–µ–∫)
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç: inner timestamp >= 2 —Å–µ–∫ –æ—Ç –Ω–∞—á–∞–ª–∞

### Testing:
```bash
python -m pytest tests/test_txt_export.py::test_no_duplicate_timestamp_at_segment_start -v
‚úÖ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: PASSED
v16.23.2 (2026-02-13)
üß™ FIX: Unit tests –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã - GREEN