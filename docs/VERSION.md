# VERSION v16.12

**Date:** 2026-02-11  
**Status:** ‚úÖ PRODUCTION

---

## üî• v16.12: Critical Fix - raw_speaker_id Sync in Split + Version in JSON

### üÜï –û—Å–Ω–æ–≤–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

**–ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô FIX:** –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è `raw_speaker_id` –∏ `speaker` –ø—Ä–∏ split!

**–ü—Ä–æ–±–ª–µ–º–∞ v16.11:**
- `split_mixed_speaker_segments()` –æ–±–Ω–æ–≤–ª—è–ª —Ç–æ–ª—å–∫–æ –ø–æ–ª–µ `speaker` ("–ñ—É—Ä–Ω–∞–ª–∏—Å—Ç")
- –ü–æ–ª–µ `raw_speaker_id` –æ—Å—Ç–∞–≤–∞–ª–æ—Å—å —Å—Ç–∞—Ä—ã–º (`SPEAKER_01` –≤–º–µ—Å—Ç–æ `SPEAKER_00`)
- –ü—Ä–∏ —ç–∫—Å–ø–æ—Ä—Ç–µ –≤ TXT –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è `speaker` –∏–∑ JSON, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ —Å–æ–≤–ø–∞–¥–∞–ª —Å `raw_speaker_id`
- –†–µ–∑—É–ª—å—Ç–∞—Ç: continuation phrases –∏—Å–ø—Ä–∞–≤–ª—è–ª–∏—Å—å, –Ω–æ –≤ TXT –≤—Å—ë —Ä–∞–≤–Ω–æ –≤—ã–≤–æ–¥–∏–ª—Å—è –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å–ø–∏–∫–µ—Ä

**–†–µ—à–µ–Ω–∏–µ v16.12:**
1. ‚úÖ –°–æ–∑–¥–∞–Ω –æ–±—Ä–∞—Ç–Ω—ã–π –º–∞–ø–ø–∏–Ω–≥ `speaker_roles` (–ò—Å–∞–µ–≤ ‚Üí SPEAKER_01, –ñ—É—Ä–Ω–∞–ª–∏—Å—Ç ‚Üí SPEAKER_00)
2. ‚úÖ –ü—Ä–∏ split –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è **–û–ë–ê** –ø–æ–ª—è: `speaker` –ò `raw_speaker_id`
3. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `"pipeline_version"` –≤ JSON metadata
4. ‚úÖ –ü–µ—Ä–µ–¥–∞—á–∞ `speaker_roles` –≤ `split_mixed_speaker_segments()`
5. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ –æ–±–∞ –ø–æ–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã

### üìù –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

1. **`scripts/corrections/boundary_fixer.py`**
   - –î–æ–±–∞–≤–ª–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä `speaker_roles` –≤ `split_mixed_speaker_segments()`
   - –°–æ–∑–¥–∞–Ω –æ–±—Ä–∞—Ç–Ω—ã–π –º–∞–ø–ø–∏–Ω–≥ `reverse_roles = {role: raw_id}`
   - –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ `newseg` –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è `raw_speaker_id` —á–µ—Ä–µ–∑ `reverse_roles.get(current_speaker)`
   - –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏: `# üÜï v16.12: –û–ë–ù–û–í–õ–Ø–ï–ú raw_speaker_id —á–µ—Ä–µ–∑ –æ–±—Ä–∞—Ç–Ω—ã–π –º–∞–ø–ø–∏–Ω–≥`

2. **`scripts/transcribe.py`**
   - –û–±–Ω–æ–≤–ª–µ–Ω–∞ –≤–µ—Ä—Å–∏—è: `VERSION = "16.12"`
   - –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `"pipeline_version": VERSION` –≤ `file_info`
   - –ü–µ—Ä–µ–¥–∞—á–∞ `speaker_roles` –≤ `split_mixed_speaker_segments()`
   - –û–±–Ω–æ–≤–ª–µ–Ω—ã –æ–ø–∏—Å–∞–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ docstring

3. **`docs/VERSION.md`**
   - –û–ø–∏—Å–∞–Ω–∏–µ v16.12
   - –ü—Ä–æ–±–ª–µ–º–∞ –∏ —Ä–µ—à–µ–Ω–∏–µ

---

## üîç –¢–µ—Å—Ç –∫–µ–π—Å

**–î–æ v16.12:**
```json
{
  "speaker": "–ò—Å–∞–µ–≤",
  "raw_speaker_id": "SPEAKER_01"
},
{
  "speaker": "–ñ—É—Ä–Ω–∞–ª–∏—Å—Ç",  ‚Üê –æ–±–Ω–æ–≤–ª–µ–Ω–æ
  "raw_speaker_id": "SPEAKER_01"  ‚Üê –ù–ï –æ–±–Ω–æ–≤–ª–µ–Ω–æ! ‚ùå
}
