# üîç DEBUGGING WORKFLOW

–ú–µ—Ç–æ–¥–æ–ª–æ–≥–∏—è –ø–æ–∏—Å–∫–∞ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–∞–≥–æ–≤ –≤ –ø—Ä–æ–µ–∫—Ç–µ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ü–∏–∏.

---

## üéØ –§–ò–õ–û–°–û–§–ò–Ø: ROOT CAUSE ANALYSIS FIRST

**‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û:**
```
–°–∏–º–ø—Ç–æ–º ‚Üí –ì–∏–ø–æ—Ç–µ–∑–∞ ‚Üí –§–∏–∫—Å ‚Üí –¢–µ—Å—Ç ‚Üí –ù–æ–≤–∞—è –≥–∏–ø–æ—Ç–µ–∑–∞ ‚Üí ...
```

**‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û:**
```
–°–∏–º–ø—Ç–æ–º ‚Üí –ü–æ—á–µ–º—É? ‚Üí –ü–æ—á–µ–º—É? ‚Üí –ü–æ—á–µ–º—É? ‚Üí ROOT CAUSE ‚Üí –§–∏–∫—Å ‚Üí ‚úÖ
```

---

## üìã DEBUGGING CHECKLIST

### –®–∞–≥ 1: –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

- [ ] **–¢–æ—á–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Å–∏–º–ø—Ç–æ–º–∞**
  - –ß—Ç–æ –∏–º–µ–Ω–Ω–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç? (–∫–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è —Å—Ç—Ä–æ–∫–∞, —Ç–∞–π–º–∫–æ–¥, —Å–ø–∏–∫–µ—Ä)
  - –ö–∞–∫–æ–π –æ–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç?
  - –ö–∞–∫–æ–π —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç?
  
- [ ] **–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø—Ä–∏–º–µ—Ä (minimal reproducible example)**
  - –§–∞–π–ª: `test-results/latest/—ç–∫—Å–ø–µ—Ä—Ç.txt`
  - –°—Ç—Ä–æ–∫–∞: `00:01:47 –ñ—É—Ä–Ω–∞–ª–∏—Å—Ç: –¢–æ –µ—Å—Ç—å —Å –Ω–µ–±–æ–ª—å—à–æ–≥–æ...`
  - –û–∂–∏–¥–∞–µ—Ç—Å—è: `00:01:47 –ò—Å–∞–µ–≤: –¢–æ –µ—Å—Ç—å —Å –Ω–µ–±–æ–ª—å—à–æ–≥–æ...`

- [ ] **–í–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º–æ—Å—Ç—å**
  - –ü—Ä–æ–±–ª–µ–º–∞ –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è –∫–∞–∂–¥—ã–π —Ä–∞–∑? –î–ê/–ù–ï–¢
  - –ù–∞ –∫–∞–∫–∏—Ö —Ñ–∞–π–ª–∞—Ö –ø—Ä–æ—è–≤–ª—è–µ—Ç—Å—è?
  - –ü–∞—Ç—Ç–µ—Ä–Ω: –∫–æ–≥–¥–∞ –ø–æ—è–≤–ª—è–µ—Ç—Å—è, –∫–æ–≥–¥–∞ –Ω–µ—Ç?

---

### –®–∞–≥ 2: –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–±–ª–µ–º—ã

**–ò—Å–ø–æ–ª—å–∑—É–π –ú–ï–¢–û–î "5 –ü–û–ß–ï–ú–£" (5 Whys):**

```
–ü—Ä–∏–º–µ—Ä: 00:01:47 –ñ—É—Ä–Ω–∞–ª–∏—Å—Ç –≤–º–µ—Å—Ç–æ –ò—Å–∞–µ–≤

‚ùì –ü–û–ß–ï–ú–£ —Å–ø–∏–∫–µ—Ä = –ñ—É—Ä–Ω–∞–ª–∏—Å—Ç?
‚Üí –ü–æ—Ç–æ–º—É —á—Ç–æ –ø—Ä–æ–∏–∑–æ—à—ë–ª SPLIT –≤ boundary_fixer.py

‚ùì –ü–û–ß–ï–ú–£ –ø—Ä–æ–∏–∑–æ—à—ë–ª SPLIT?
‚Üí –ü–æ—Ç–æ–º—É —á—Ç–æ is_journalist_phrase() = True

‚ùì –ü–û–ß–ï–ú–£ is_journalist_phrase() = True –¥–ª—è "–¢–æ –µ—Å—Ç—å —Å –Ω–µ–±–æ–ª—å—à–æ–≥–æ... –ù–µ–≤—ã"?
‚Üí –ü–æ—Ç–æ–º—É —á—Ç–æ regex –Ω–∞—à—ë–ª —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ

‚ùì –ü–û–ß–ï–ú–£ regex –Ω–∞—à—ë–ª —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ?
‚Üí –ü–æ—Ç–æ–º—É —á—Ç–æ r'–≤—ã\s+' –Ω–∞—à—ë–ª "–≤—ã " –≤ —Å–ª–æ–≤–µ "–ù–µ–≤—ã"

‚ùì –ü–û–ß–ï–ú–£ regex –Ω–∞—Ö–æ–¥–∏—Ç "–≤—ã " –≤–Ω—É—Ç—Ä–∏ —Å–ª–æ–≤–∞?
‚Üí –ü–æ—Ç–æ–º—É —á—Ç–æ –ù–ï–¢ word boundary (\b) –≤ –Ω–∞—á–∞–ª–µ –ø–∞—Ç—Ç–µ—Ä–Ω–∞

‚úÖ ROOT CAUSE: –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ \b –≤ regex –ø–∞—Ç—Ç–µ—Ä–Ω–∞—Ö
```

**üõ†Ô∏è –ò–ù–°–¢–†–£–ú–ï–ù–¢–´:**

1. **DEBUG OUTPUT** - –¥–æ–±–∞–≤—å –¥–µ—Ç–∞–ª—å–Ω—ã–π –≤—ã–≤–æ–¥ –≤ –ø—Ä–æ–±–ª–µ–º–Ω—ã–π –º–æ–¥—É–ª—å
2. **LOG —Ñ–∞–π–ª—ã** - `test-results/latest/—ç–∫—Å–ø–µ—Ä—Ç_debug.log`
3. **JSON traces** - `test-results/latest/—ç–∫—Å–ø–µ—Ä—Ç_*.json`
4. **Git blame** - –∫–æ–≥–¥–∞ –∫–æ–¥ –±—ã–ª –∏–∑–º–µ–Ω—ë–Ω –ø–æ—Å–ª–µ–¥–Ω–∏–π —Ä–∞–∑?
5. **Diff —Å –ø—Ä–µ–¥—ã–¥—É—â–µ–π –≤–µ—Ä—Å–∏–µ–π** - —á—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å?

---

### –®–∞–≥ 3: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ DEBUG OUTPUT

**–ü–†–ê–í–ò–õ–û:** –ü–µ—Ä–µ–¥ —Ñ–∏–∫—Å–æ–º –í–°–ï–ì–î–ê –¥–æ–±–∞–≤–ª—è–π debug output!

```python
# ‚ùå –ü–õ–û–•–û: Silent mode
def is_journalist_phrase(text):
    for marker in journalist_markers:
        if re.search(marker, text):
            return True
    return False

# ‚úÖ –•–û–†–û–®–û: Debug mode
def is_journalist_phrase(text, debug=False):
    """
    v16.16: –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ —Ñ—Ä–∞–∑–∞ –∂—É—Ä–Ω–∞–ª–∏—Å—Ç—Å–∫–æ–π
    
    Args:
        text: –¢–µ–∫—Å—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
        debug: –í—ã–≤–æ–¥ –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
    """
    text_lower = text.lower()
    
    if debug:
        print(f"  üîç is_journalist_phrase('{text[:50]}...')")
    
    for marker in journalist_markers:
        if re.search(marker, text_lower):
            if debug:
                print(f"    ‚úÖ MATCH: {marker}")
            return True
    
    if debug:
        print(f"    ‚ùå NO MATCH")
    return False
```

**üìä DEBUG –£–†–û–í–ù–ò:**

```python
# –£—Ä–æ–≤–µ–Ω—å 1: Minimal (—Ç–æ–ª—å–∫–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç)
print(f"‚úÖ is_journalist_phrase() = {result}")

# –£—Ä–æ–≤–µ–Ω—å 2: Medium (—Ä–µ–∑—É–ª—å—Ç–∞—Ç + –ø—Ä–∏—á–∏–Ω–∞)
print(f"‚úÖ is_journalist_phrase() = {result} (reason: {marker})")

# –£—Ä–æ–≤–µ–Ω—å 3: Detailed (–≤–µ—Å—å –ø—Ä–æ—Ü–µ—Å—Å)
print(f"  üîç Checking: '{text[:50]}...'")
for marker in markers:
    match = re.search(marker, text)
    print(f"    Marker: {marker} ‚Üí {'‚úÖ' if match else '‚ùå'}")
print(f"  ‚Üí RESULT: {result}")
```

---

### –®–∞–≥ 4: –°–æ–∑–¥–∞–Ω–∏–µ Unit Test

**–ü–†–ê–í–ò–õ–û:** –ù–∞–π–¥—ë–Ω–Ω—ã–π –±–∞–≥ ‚Üí –°–†–ê–ó–£ unit test!

```python
# tests/test_regex_patterns.py

def test_journalist_phrase_positive_cases():
    """–ü–æ–∑–∏—Ç–∏–≤–Ω—ã–µ –∫–µ–π—Å—ã: –¥–æ–ª–∂–Ω—ã –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å—Å—è –∫–∞–∫ –∂—É—Ä–Ω–∞–ª–∏—Å—Ç—Å–∫–∏–µ"""
    assert is_journalist_phrase("–≤—ã –º–æ–∂–µ—Ç–µ –æ–±—ä—è—Å–Ω–∏—Ç—å") == True
    assert is_journalist_phrase("—Ä–∞—Å—Å–∫–∞–∂–∏—Ç–µ –Ω–∞–º") == True
    assert is_journalist_phrase("–¥–∞–≤–∞–π—Ç–µ –æ–±—Å—É–¥–∏–º") == True

def test_journalist_phrase_false_positives():
    """–ù–µ–≥–∞—Ç–∏–≤–Ω—ã–µ –∫–µ–π—Å—ã: –ù–ï –¥–æ–ª–∂–Ω—ã –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å—Å—è –∫–∞–∫ –∂—É—Ä–Ω–∞–ª–∏—Å—Ç—Å–∫–∏–µ"""
    # BUG v16.15: "–ù–µ–≤—ã" –æ–ø—Ä–µ–¥–µ–ª—è–ª–∞—Å—å –∫–∞–∫ "–≤—ã"
    assert is_journalist_phrase("–Ω–∞ –≤–æ—Å—Ç–æ—á–Ω–æ–º –±–µ—Ä–µ–≥—É –ù–µ–≤—ã") == False
    assert is_journalist_phrase("—Å–æ–≤—ã –æ—Ö–æ—Ç—è—Ç—Å—è –Ω–æ—á—å—é") == False
    assert is_journalist_phrase("—É –∫—Ä–æ–≤—ã –µ—Å—Ç—å –∫—Ä—ã—à–∞") == False
    assert is_journalist_phrase("–ø—Ä–∞–≤—ã –±—ã–ª–∏ –≤—Å–µ") == False

def test_journalist_phrase_edge_cases():
    """Edge cases: –ø–æ–≥—Ä–∞–Ω–∏—á–Ω—ã–µ —Å–∏—Ç—É–∞—Ü–∏–∏"""
    # "–≤—ã" –≤ –∫–æ–Ω—Ü–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è
    assert is_journalist_phrase("—ç—Ç–æ –±—ã–ª–∏ –≤—ã?") == True
    # "–≤—ã" –≤ —Å–µ—Ä–µ–¥–∏–Ω–µ –¥—Ä—É–≥–æ–≥–æ —Å–ª–æ–≤–∞
    assert is_journalist_phrase("–Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è") == False
    # Multiple matches
    assert is_journalist_phrase("–≤—ã –º–æ–∂–µ—Ç–µ —Ä–∞—Å—Å–∫–∞–∂–∏—Ç–µ") == True
```

**üéØ –ö–û–ì–î–ê –°–û–ó–î–ê–í–ê–¢–¨ TESTS:**
- ‚úÖ –ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –Ω–∞–π–¥–µ–Ω–Ω–æ–≥–æ –±–∞–≥–∞
- ‚úÖ –ü–µ—Ä–µ–¥ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º –Ω–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–∏
- ‚úÖ –î–ª—è –≤—Å–µ—Ö edge cases
- ‚úÖ –î–ª—è –≤—Å–µ—Ö regex –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤

---

### –®–∞–≥ 5: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ (—Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –ø–æ–Ω–∏–º–∞–Ω–∏—è ROOT CAUSE!)

**–ü–†–û–¶–ï–°–°:**

1. **–ù–∞–ø–∏—Å–∞—Ç—å —Ñ–∏–∫—Å**
```python
# v16.16: –î–æ–±–∞–≤–ª–µ–Ω word boundary
journalist_markers = [
    r'\b–≤—ã\s+(–º–æ–∂–µ—Ç–µ|–º–æ–≥–ª–∏|–¥–æ–ª–∂–Ω—ã)?',  # üî• –¥–æ–±–∞–≤–ª–µ–Ω \b
    r'\b—Ä–∞—Å—Å–∫–∞–∂–∏—Ç–µ\b',
    # ...
]
```

2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å unit test**
```bash
pytest tests/test_regex_patterns.py::test_journalist_phrase_false_positives
# ‚úÖ PASSED
```

3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å integration test**
```bash
python scripts/transcribe.py
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å: 00:01:47 –ò—Å–∞–µ–≤ ‚úÖ
```

4. **–û–±–Ω–æ–≤–∏—Ç—å VERSION**
```python
VERSION = "16.16"
VERSION_NAME = "Critical Fix: Word Boundary –≤ regex"
```

5. **–ö–æ–º–º–∏—Ç —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º ROOT CAUSE**

git commit -m "üî• v16.16: Critical fix - word boundary –≤ regex (false positive '–ù–µ–≤—ã')

ROOT CAUSE: Regex r'–≤—ã\s+' –Ω–∞—Ö–æ–¥–∏–ª '–≤—ã ' –≤–Ω—É—Ç—Ä–∏ —Å–ª–æ–≤ (–ù–µ–≤—ã, —Å–æ–≤—ã, –∫—Ä–æ–≤—ã)
FIX: –î–æ–±–∞–≤–ª–µ–Ω word boundary \b –≤–æ –≤—Å–µ regex –ø–∞—Ç—Ç–µ—Ä–Ω—ã
RESULT: False positive —É—Å—Ç—Ä–∞–Ω—ë–Ω, –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –æ—Å—Ç–∞—ë—Ç—Å—è –∑–∞ –ò—Å–∞–µ–≤—ã–º"
```

---

## üö´ –¢–ò–ü–ò–ß–ù–´–ï –û–®–ò–ë–ö–ò

### ‚ùå –û—à–∏–±–∫–∞ 1: –§–∏–∫—Å –±–µ–∑ –ø–æ–Ω–∏–º–∞–Ω–∏—è ROOT CAUSE

```
–°–∏–º–ø—Ç–æ–º: "00:01:47 –ñ—É—Ä–Ω–∞–ª–∏—Å—Ç –≤–º–µ—Å—Ç–æ –ò—Å–∞–µ–≤"
–ì–∏–ø–æ—Ç–µ–∑–∞: "–ü—Ä–æ–±–ª–µ–º–∞ –≤ continuation phrase logic"
‚Üí –ú–µ–Ω—è—é continuation logic
‚Üí –¢–µ—Å—Ç: –ø—Ä–æ–±–ª–µ–º–∞ –æ—Å—Ç–∞–ª–∞—Å—å
‚Üí –ù–æ–≤–∞—è –≥–∏–ø–æ—Ç–µ–∑–∞: "–ü—Ä–æ–±–ª–µ–º–∞ –≤ raw_speaker_id"
... 8 –∏—Ç–µ—Ä–∞—Ü–∏–π ...
```

**‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û:**
```
–°–∏–º–ø—Ç–æ–º: "00:01:47 –ñ—É—Ä–Ω–∞–ª–∏—Å—Ç –≤–º–µ—Å—Ç–æ –ò—Å–∞–µ–≤"
‚Üí –î–æ–±–∞–≤–ª—è—é DEBUG output –≤ split_mixed_speaker_segments()
‚Üí –í–∏–∂—É: is_journalist_phrase=True –¥–ª—è "–ù–µ–≤—ã"
‚Üí ROOT CAUSE: regex –±–µ–∑ word boundary
‚Üí –§–∏–∫—Å: –¥–æ–±–∞–≤–ª—è—é \b
‚Üí ‚úÖ –ü—Ä–æ–±–ª–µ–º–∞ —Ä–µ—à–µ–Ω–∞ –∑–∞ 1 –∏—Ç–µ—Ä–∞—Ü–∏—é
```

---

### ‚ùå –û—à–∏–±–∫–∞ 2: –ò–∑–º–µ–Ω–µ–Ω–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –≤–µ—â–µ–π –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ

```
Commit: "Fix continuation phrase + raw_speaker_id sync + add debug"
‚Üí –ß—Ç–æ –∏–º–µ–Ω–Ω–æ –ø–æ–º–æ–≥–ª–æ? –ù–µ–ø–æ–Ω—è—Ç–Ω–æ!
```

**‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û:**
```
Commit 1: "Add debug output to split function"
Commit 2: "Fix regex word boundary (ROOT CAUSE)"
‚Üí –ß—ë—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ: debug ‚Üí —Ñ–∏–∫—Å
```

---

### ‚ùå –û—à–∏–±–∫–∞ 3: –§–∏–∫—Å –±–µ–∑ unit test

```
‚Üí –ò—Å–ø—Ä–∞–≤–∏–ª–∏ –±–∞–≥
‚Üí –ó–∞–∫–æ–º–º–∏—Ç–∏–ª–∏
‚Üí –ß–µ—Ä–µ–∑ 2 –Ω–µ–¥–µ–ª–∏: –±–∞–≥ –≤–µ—Ä–Ω—É–ª—Å—è (–¥—Ä—É–≥–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –∏–∑–º–µ–Ω–∏–ª regex)
```

**‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û:**
```
‚Üí –ò—Å–ø—Ä–∞–≤–∏–ª–∏ –±–∞–≥
‚Üí –ù–∞–ø–∏—Å–∞–ª–∏ unit test
‚Üí –ó–∞–∫–æ–º–º–∏—Ç–∏–ª–∏ (–∫–æ–¥ + —Ç–µ—Å—Ç)
‚Üí Regression –∑–∞—â–∏—Ç–∞: –±–∞–≥ –Ω–µ –º–æ–∂–µ—Ç –≤–µ—Ä–Ω—É—Ç—å—Å—è
```

---

## üìä DEBUGGING METRICS

**–¶–ï–õ–¨:** –°–æ–∫—Ä–∞—Ç–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏—Ç–µ—Ä–∞—Ü–∏–π –æ—Ç –±–∞–≥–∞ –¥–æ —Ñ–∏–∫—Å–∞

### –ú–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞ debugging:

| –ú–µ—Ç—Ä–∏–∫–∞ | –ò–¥–µ–∞–ª | –¢–µ–∫—É—â–∏–π | –¶–µ–ª—å |
|---------|-------|---------|------|
| –ò—Ç–µ—Ä–∞—Ü–∏–π –¥–æ —Ñ–∏–∫—Å–∞ | 1-2 | 8 | ‚â§3 |
| –í—Ä–µ–º—è –Ω–∞ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É | 10-30 –º–∏–Ω | 5.5 —á–∞—Å–æ–≤ | ‚â§1 —á–∞—Å |
| Unit tests coverage | 100% | 0% | ‚â•80% |
| False positives –Ω–∞–π–¥–µ–Ω–æ —Ç–µ—Å—Ç–∞–º–∏ | 100% | 0% | ‚â•90% |

---

## üõ†Ô∏è DEBUGGING TOOLS

### 1. Debug Mode –≤ —Ñ—É–Ω–∫—Ü–∏—è—Ö

```python
def function_name(..., debug=False):
    if debug:
        print(f"üîç function_name: –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ...")
```

### 2. –î–µ—Ç–∞–ª—å–Ω—ã–π LOG

```python
# transcribe.py
if mode == "—Ç–æ—á–Ω—ã–π":
    log_file = f"{latest_dir}/{speaker_surname}_debug.log"
    # –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –í–ï–°–¨ —Ç–µ—Ä–º–∏–Ω–∞–ª—å–Ω—ã–π –≤—ã–≤–æ–¥
```

### 3. JSON traces

```json
{
  "segments_raw": [...],  // –î–æ –æ–±—Ä–∞–±–æ—Ç–∫–∏
  "segments_merged": [...], // –ü–æ—Å–ª–µ merge
  "corrections_log": {...}  // –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å
}
```

### 4. Git diff –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è

```bash
# –°—Ä–∞–≤–Ω–∏—Ç—å —Å –ø—Ä–µ–¥—ã–¥—É—â–µ–π –≤–µ—Ä—Å–∏–µ–π
git diff v16.15 v16.16 -- scripts/corrections/boundary_fixer.py
```

---

## üéì –ü–†–ò–ú–ï–†–´ ROOT CAUSE ANALYSIS

### –ü—Ä–∏–º–µ—Ä 1: False Positive –≤ Regex

**–°–∏–º–ø—Ç–æ–º:** `00:01:47 –ñ—É—Ä–Ω–∞–ª–∏—Å—Ç` –≤–º–µ—Å—Ç–æ `–ò—Å–∞–µ–≤`

**5 Whys:**
1. –ü–æ—á–µ–º—É —Å–ø–∏–∫–µ—Ä = –ñ—É—Ä–Ω–∞–ª–∏—Å—Ç? ‚Üí SPLIT –ø—Ä–æ–∏–∑–æ—à—ë–ª
2. –ü–æ—á–µ–º—É SPLIT? ‚Üí is_journalist_phrase=True
3. –ü–æ—á–µ–º—É =True? ‚Üí regex r'–≤—ã\s+' –Ω–∞—à—ë–ª —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ
4. –ü–æ—á–µ–º—É –Ω–∞—à—ë–ª? ‚Üí "–ù–µ–≤—ã" —Å–æ–¥–µ—Ä–∂–∏—Ç "–≤—ã "
5. –ü–æ—á–µ–º—É –ª–æ–≤–∏—Ç –≤–Ω—É—Ç—Ä–∏ —Å–ª–æ–≤–∞? ‚Üí –ù–µ—Ç word boundary

**ROOT CAUSE:** `r'–≤—ã\s+'` –±–µ–∑ `\b`  
**FIX:** `r'\b–≤—ã\s+'`

---

### –ü—Ä–∏–º–µ—Ä 2: –ù–µ—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø–æ–ª–µ–π

**–°–∏–º–ø—Ç–æ–º:** JSON –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç `speaker="–ò—Å–∞–µ–≤"`, TXT –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç `SPEAKER_00`

**5 Whys:**
1. –ü–æ—á–µ–º—É TXT –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π? ‚Üí –ò—Å–ø–æ–ª—å–∑—É–µ—Ç raw_speaker_id
2. –ü–æ—á–µ–º—É raw_speaker_id –Ω–µ –æ–±–Ω–æ–≤–ª—ë–Ω? ‚Üí –§—É–Ω–∫—Ü–∏—è –º–µ–Ω—è–µ—Ç —Ç–æ–ª—å–∫–æ speaker
3. –ü–æ—á–µ–º—É –º–µ–Ω—è–µ—Ç —Ç–æ–ª—å–∫–æ speaker? ‚Üí –ó–∞–±—ã–ª–∏ –æ–±–Ω–æ–≤–∏—Ç—å raw_speaker_id
4. –ü–æ—á–µ–º—É –∑–∞–±—ã–ª–∏? ‚Üí –ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
5. –ü–æ—á–µ–º—É –Ω–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏? ‚Üí –ù–µ—Ç unit test –¥–ª—è —ç—Ç–æ–≥–æ

**ROOT CAUSE:** –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ `speaker` ‚Üî `raw_speaker_id`  
**FIX:** –û–±–Ω–æ–≤–ª—è—Ç—å –æ–±–∞ –ø–æ–ª—è + —Å–æ–∑–¥–∞—Ç—å reverse mapping

---

## üìö –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –†–ï–°–£–†–°–´

### Recommended Reading:
- [The 5 Whys Technique](https://en.wikipedia.org/wiki/Five_whys)
- [Root Cause Analysis](https://en.wikipedia.org/wiki/Root_cause_analysis)
- [Test-Driven Development (TDD)](https://en.wikipedia.org/wiki/Test-driven_development)

### –í –ø—Ä–æ–µ–∫—Ç–µ:
- `docs/TESTING-STRATEGY.md` - —Å—Ç—Ä–∞—Ç–µ–≥–∏—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- `docs/MODULES.md` - —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ —Ñ—É–Ω–∫—Ü–∏–π
- `tests/test_regex_patterns.py` - –ø—Ä–∏–º–µ—Ä—ã unit tests

---

## üéØ POST-PROCESSING VALIDATION (v16.20+)

### –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ü–†–ê–í–ò–õ–û: Audit Results Before "Done"!

**–ü–ï–†–ï–î —Ç–µ–º –∫–∞–∫ —Å–∫–∞–∑–∞—Ç—å "–ì–æ—Ç–æ–≤–æ!":**

1. **‚úÖ –ü—Ä–æ—á–∏—Ç–∞–π `docs/VALIDATION.md`** ‚Äî –ø–æ–ª–Ω—ã–π —á–µ–∫–ª–∏—Å—Ç –∏–∑ 7 –ø—Ä–æ–≤–µ—Ä–æ–∫
2. **‚úÖ –ó–∞–ø—É—Å—Ç–∏ –±–∞–∑–æ–≤—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏:**
   
   # –í test-results/latest/
   
   # –î–ª–∏–Ω–Ω—ã–µ –±–ª–æ–∫–∏
   grep -oE "\[.*\]" *.txt | head -20  # –ü—Ä–æ–≤–µ—Ä—å –≤–∏–∑—É–∞–ª—å–Ω–æ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã
   
   # –î—É–±–ª–∏
   grep -E "(.{20,})\. \1" *.txt
   
   # Ending hallucinations
   grep -i "–ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ —Å–ª–µ–¥—É–µ—Ç\|—Å–ø–∞—Å–∏–±–æ –∑–∞ –≤–Ω–∏–º–∞–Ω–∏–µ" *.txt
   
   # –ó–∞–∏–∫–∞–Ω–∏—è –±–µ–∑ "..."
   grep -oE "\b(\w+) \1\b" *.txt | head -10
‚úÖ –ü—Ä–æ–≤–µ—Ä—å —Å–ª—É—á–∞–π–Ω—ã–µ timestamp (3-5 —à—Ç—É–∫) –≤ –∞—É–¥–∏–æ —Ñ–∞–π–ª–µ:

–û—Ç–∫—Ä–æ–π –∞—É–¥–∏–æ –≤ Audacity

–ù–∞–π–¥–∏ timestamp –∏–∑ TXT

–ü—Ä–æ–≤–µ—Ä—å: —Ç–µ–∫—Å—Ç —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å –∞—É–¥–∏–æ?

‚úÖ –ò—â–∏ —Å–º–µ–∂–Ω—ã–µ —Ä–µ–ø–ª–∏–∫–∏ –æ–¥–Ω–æ–≥–æ —Å–ø–∏–∫–µ—Ä–∞ (–∞–Ω–æ–º–∞–ª–∏—è!):

–î–≤–∞ —Å–µ–≥–º–µ–Ω—Ç–∞ –ø–æ–¥—Ä—è–¥ —Å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º speaker = –±–∞–≥

–î–æ–ª–∂–Ω—ã –±—ã–ª–∏ –±—ã—Ç—å merged

‚úÖ –ü—Ä–æ–≤–µ—Ä—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∏–∞–ª–æ–≥–∞:

–ñ—É—Ä–Ω–∞–ª–∏—Å—Ç ‚Üí –ò—Å–∞–µ–≤ ‚Üí –ñ—É—Ä–Ω–∞–ª–∏—Å—Ç (–ø—Ä–∞–≤–∏–ª—å–Ω–æ)

–ò—Å–∞–µ–≤ ‚Üí –ò—Å–∞–µ–≤ (–ê–ù–û–ú–ê–õ–ò–Ø!)

–ï—Å–ª–∏ –Ω–∞—à—ë–ª –∞–Ω–æ–º–∞–ª–∏—é ‚Üí —ç—Ç–æ –ë–ê–ì!

–ü—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –±–∞–≥–∞ —á–µ—Ä–µ–∑ –≤–∞–ª–∏–¥–∞—Ü–∏—é:
‚úÖ Root Cause Analysis (5 Whys) ‚Äî —Å–º. —Å–µ–∫—Ü–∏—é –≤—ã—à–µ

‚úÖ –ü—Ä–æ–≤–µ—Ä—å docs/KNOWN-ISSUES.md ‚Äî –≤–æ–∑–º–æ–∂–Ω–æ –±–∞–≥ —É–∂–µ –∏–∑–≤–µ—Å—Ç–µ–Ω

‚úÖ Debug output ‚Äî –¥–æ–±–∞–≤—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

‚úÖ Unit test ‚Äî —Å–æ–∑–¥–∞–π failing test

‚úÖ Fix ‚Äî –∏—Å–ø—Ä–∞–≤—å ROOT CAUSE

‚úÖ Test GREEN ‚Äî —É–±–µ–¥–∏—Å—å —á—Ç–æ —Ç–µ—Å—Ç –ø—Ä–æ—Ö–æ–¥–∏—Ç

‚úÖ –û–±–Ω–æ–≤–∏ KNOWN-ISSUES.md ‚Äî –¥–æ–±–∞–≤—å –ø–∞—Ç—Ç–µ—Ä–Ω –µ—Å–ª–∏ –Ω–æ–≤—ã–π –±–∞–≥

–ü—Ä–∏–º–µ—Ä—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏:
–ü—Ä–∏–º–µ—Ä 1: –ù–∞—à–ª–∏ –¥–ª–∏–Ω–Ω—ã–π –±–ª–æ–∫
bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞
grep -oE "\[00:06:.*\]" result.txt | head -5

# –†–µ–∑—É–ª—å—Ç–∞—Ç:
[00:06:12] –ò—Å–∞–µ–≤: ...
[00:10:03] –ò—Å–∞–µ–≤: ...   # ‚ö†Ô∏è 231 —Å–µ–∫—É–Ω–¥—É –±–µ–∑ –º–µ—Ç–æ–∫!

# –î–µ–π—Å—Ç–≤–∏–µ: –ë–ê–ì 1.1 –∏–∑ KNOWN-ISSUES.md ‚Üí insert_intermediate_timestamps
–ü—Ä–∏–º–µ—Ä 2: –ù–∞—à–ª–∏ –¥—É–±–ª—å
bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞
grep -E "(.{20,})\. \1" result.txt

# –†–µ–∑—É–ª—å—Ç–∞—Ç:
–Ω–∏—á–µ–≥–æ –Ω–µ –∑–Ω–∞–ª–∏. –Ω–∏—á–µ–≥–æ –Ω–µ –∑–Ω–∞–ª–∏.

# –î–µ–π—Å—Ç–≤–∏–µ: –ë–ê–ì 2.1 –∏–∑ KNOWN-ISSUES.md ‚Üí is_duplicate_phrase
–ü—Ä–∏–º–µ—Ä 3: Timestamp drift
bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ Audacity
TXT: [00:21:36] —É—á–∏—Ç—ã–≤–∞—Ç—å –±—ã–ª–∞ –Ω–µ–º–µ—Ü–∫–∞—è –∞—Ä—Ç–∏–ª–ª–µ—Ä–∏—è...
AUDIO 00:21:36: "...–±–µ—Ä–µ–≥—É –ù–µ–≤—ã" ‚Üê –ù–ï –°–û–í–ü–ê–î–ê–ï–¢!
AUDIO 00:21:39: "—É—á–∏—Ç—ã–≤–∞—Ç—å –±—ã–ª–∞..." ‚Üê –°–û–í–ü–ê–î–ê–ï–¢ (—Å–¥–≤–∏–≥ +3 —Å–µ–∫)

# –î–µ–π—Å—Ç–≤–∏–µ: –ë–ê–ì 1.2 –∏–∑ KNOWN-ISSUES.md ‚Üí correct_timestamp_drift
üìö –°–º. —Ç–∞–∫–∂–µ:
docs/VALIDATION.md ‚Äî –ø–æ–ª–Ω–∞—è –º–µ—Ç–æ–¥–æ–ª–æ–≥–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏

docs/KNOWN-ISSUES.md ‚Äî –±–∞–∑–∞ –∑–Ω–∞–Ω–∏–π —Ç–∏–ø–∏—á–Ω—ã—Ö –±–∞–≥–æ–≤

docs/TESTING-STRATEGY.md ‚Äî —Å—Ç—Ä–∞—Ç–µ–≥–∏—è unit testing

–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: 12.02.2026 (—Å–µ–∫—Ü–∏—è Post-Processing Validation)

======================================================================

## üß™ –ö–æ–≥–¥–∞ –ù–ï —Å–æ–∑–¥–∞–≤–∞—Ç—å unit test (v16.27)

**–ü–†–ê–í–ò–õ–û:** –ù–∞–π–¥—ë–Ω–Ω—ã–π –±–∞–≥ ‚Üí DEBUG OUTPUT ‚Üí ROOT CAUSE ‚Üí FIX ‚Üí **REAL TEST!**

### ‚úÖ Unit tests –¢–û–õ–¨–ö–û –¥–ª—è:
- **–£—Ç–∏–ª–∏—Ç—ã –±–µ–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:** `seconds_to_hms()`, `text_similarity()`
- **Regex patterns (–∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ):** –ø—Ä–æ—Å—Ç—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏
- **Edge cases –ø—Ä–æ—Å—Ç—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π:** boundary check, null check

### ‚ùå –ù–ï —Å–æ–∑–¥–∞–≤–∞—Ç—å unit tests –¥–ª—è:
- **–í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –º–æ–¥—É–ª–µ–π:** `replica_merger` + `txt_export`
- **Pipeline —ç—Ç–∞–ø–æ–≤:** –≠–¢–ê–ü 6.1 ‚Üí txt_export
- **–†–µ–∞–ª—å–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤:** –¥–ª–∏–Ω–Ω—ã–µ merged segments
- **–ë–∞–≥–æ–≤ v16.22-v16.26:** –≤—Å–µ –∏–∑-–∑–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –º–æ–¥—É–ª–µ–π!

### üéØ –ü–æ—á–µ–º—É –ù–ï unit tests –¥–ª—è –±–∞–≥–æ–≤?

**–£—Ä–æ–∫ v16.22-v16.26:**
```
v16.22: Unit test ‚Üí pytest GREEN ‚Üí real test ‚Üí ‚ùå –ù–û–í–´–ô –ë–ê–ì!
v16.23: Unit test ‚Üí pytest GREEN ‚Üí real test ‚Üí ‚ùå –í—ã—Ä–µ–∑–∞–µ—Ç –Ω–æ—Ä–º–∞–ª—å–Ω—ã–π —Ç–µ–∫—Å—Ç!
v16.25: –ë–ï–ó unit test ‚Üí real test ‚Üí ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç!
```

**ROOT CAUSE:** Unit tests –∏–∑–æ–ª–∏—Ä—É—é—Ç —Ñ—É–Ω–∫—Ü–∏–∏, –Ω–æ –±–∞–≥–∏ –ø—Ä–æ–∏—Å—Ö–æ–¥—è—Ç –ø—Ä–∏ **–≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–∏** –º–æ–¥—É–ª–µ–π.

---

### üîß –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π workflow –¥–ª—è –±–∞–≥–∞:

```
1. –û–ë–ù–ê–†–£–ñ–ï–ù–ò–ï ‚Üí –ß–∏—Ç–∞—é VALIDATION.md
2. DEBUG OUTPUT ‚Üí –î–æ–±–∞–≤–ª—è—é print() –≤ –ø—Ä–æ–±–ª–µ–º–Ω—ã–π –º–æ–¥—É–ª—å
3. ROOT CAUSE ‚Üí 5 Whys
4. FIX ‚Üí –ò—Å–ø—Ä–∞–≤–ª—è—é –û–î–ù–£ –≤–µ—â—å
5. REAL TEST ‚Üí –ó–∞–ø—É—Å–∫–∞—é transcribe.py
6. VALIDATION ‚Üí –ü—Ä–æ–≤–µ—Ä—è—é 7 –ø—É–Ω–∫—Ç–æ–≤
7. –ö–û–ú–ú–ò–¢ ‚Üí –¢–æ–ª—å–∫–æ –µ—Å–ª–∏ checklist GREEN!
```

---

### üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ:

| –ö—Ä–∏—Ç–µ—Ä–∏–π | Unit Test | Real Test |
|----------|-----------|----------|
| **–°–∫–æ—Ä–æ—Å—Ç—å** | ‚ö° –ë—ã—Å—Ç—Ä–æ | üê¢ –ú–µ–¥–ª–µ–Ω–Ω–æ |
| **–í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ** | ‚ùå –ù–ï –≤–∏–¥–∏—Ç | ‚úÖ –í–∏–¥–∏—Ç –≤—Å—ë |
| **–ì–∞—Ä–∞–Ω—Ç–∏—è** | ‚ö†Ô∏è –õ–æ–∂–Ω–∞—è | ‚úÖ –ù–∞—Å—Ç–æ—è—â–∞—è |

**–í—ã–≤–æ–¥:** –î–ª—è –±–∞–≥–æ–≤ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è ‚Üí **Real test –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω!**

